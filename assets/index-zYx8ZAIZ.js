(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ju(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ef(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var ku={exports:{}},Mi={},Nu={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),Tf=Symbol.for("react.portal"),Af=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),Rf=Symbol.for("react.provider"),Of=Symbol.for("react.context"),Lf=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),$f=Symbol.for("react.memo"),Uf=Symbol.for("react.lazy"),Wl=Symbol.iterator;function Df(t){return t===null||typeof t!="object"?null:(t=Wl&&t[Wl]||t["@@iterator"],typeof t=="function"?t:null)}var _u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Su=Object.assign,Cu={};function fn(t,e,r){this.props=t,this.context=e,this.refs=Cu,this.updater=r||_u}fn.prototype.isReactComponent={};fn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Eu(){}Eu.prototype=fn.prototype;function Wo(t,e,r){this.props=t,this.context=e,this.refs=Cu,this.updater=r||_u}var Vo=Wo.prototype=new Eu;Vo.constructor=Wo;Su(Vo,fn.prototype);Vo.isPureReactComponent=!0;var Vl=Array.isArray,Tu=Object.prototype.hasOwnProperty,qo={current:null},Au={key:!0,ref:!0,__self:!0,__source:!0};function Pu(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Tu.call(e,n)&&!Au.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:fs,type:t,key:a,ref:o,props:s,_owner:qo.current}}function zf(t,e){return{$$typeof:fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Go(t){return typeof t=="object"&&t!==null&&t.$$typeof===fs}function Ff(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ql=/\/+/g;function ia(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ff(""+t.key):e.toString(36)}function Vs(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fs:case Tf:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+ia(o,0):n,Vl(s)?(r="",t!=null&&(r=t.replace(ql,"$&/")+"/"),Vs(s,e,r,"",function(u){return u})):s!=null&&(Go(s)&&(s=zf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ql,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Vl(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+ia(a,l);o+=Vs(a,e,r,c,s)}else if(c=Df(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+ia(a,l++),o+=Vs(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function js(t,e,r){if(t==null)return t;var n=[],s=0;return Vs(t,n,"","",function(a){return e.call(r,a,s++)}),n}function Bf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},qs={transition:null},Hf={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:qs,ReactCurrentOwner:qo};function Iu(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:js,forEach:function(t,e,r){js(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!Go(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=fn;V.Fragment=Af;V.Profiler=If;V.PureComponent=Wo;V.StrictMode=Pf;V.Suspense=Mf;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hf;V.act=Iu;V.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Su({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=qo.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Tu.call(e,c)&&!Au.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:fs,type:t.type,key:s,ref:a,props:n,_owner:o}};V.createContext=function(t){return t={$$typeof:Of,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rf,_context:t},t.Consumer=t};V.createElement=Pu;V.createFactory=function(t){var e=Pu.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Lf,render:t}};V.isValidElement=Go;V.lazy=function(t){return{$$typeof:Uf,_payload:{_status:-1,_result:t},_init:Bf}};V.memo=function(t,e){return{$$typeof:$f,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=qs.transition;qs.transition={};try{t()}finally{qs.transition=e}};V.unstable_act=Iu;V.useCallback=function(t,e){return Ae.current.useCallback(t,e)};V.useContext=function(t){return Ae.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};V.useEffect=function(t,e){return Ae.current.useEffect(t,e)};V.useId=function(){return Ae.current.useId()};V.useImperativeHandle=function(t,e,r){return Ae.current.useImperativeHandle(t,e,r)};V.useInsertionEffect=function(t,e){return Ae.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Ae.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Ae.current.useMemo(t,e)};V.useReducer=function(t,e,r){return Ae.current.useReducer(t,e,r)};V.useRef=function(t){return Ae.current.useRef(t)};V.useState=function(t){return Ae.current.useState(t)};V.useSyncExternalStore=function(t,e,r){return Ae.current.useSyncExternalStore(t,e,r)};V.useTransition=function(){return Ae.current.useTransition()};V.version="18.3.1";Nu.exports=V;var _=Nu.exports;const Ye=ju(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=_,Vf=Symbol.for("react.element"),qf=Symbol.for("react.fragment"),Gf=Object.prototype.hasOwnProperty,Kf=Wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jf={key:!0,ref:!0,__self:!0,__source:!0};function Ru(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Gf.call(e,n)&&!Jf.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Vf,type:t,key:a,ref:o,props:s,_owner:Kf.current}}Mi.Fragment=qf;Mi.jsx=Ru;Mi.jsxs=Ru;ku.exports=Mi;var i=ku.exports,Ou={exports:{}},qe={},Lu={exports:{}},Mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,A){var $=I.length;I.push(A);e:for(;0<$;){var q=$-1>>>1,J=I[q];if(0<s(J,A))I[q]=A,I[$]=J,$=q;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var A=I[0],$=I.pop();if($!==A){I[0]=$;e:for(var q=0,J=I.length,re=J>>>1;q<re;){var Ke=2*(q+1)-1,it=I[Ke],Se=Ke+1,Tr=I[Se];if(0>s(it,$))Se<J&&0>s(Tr,it)?(I[q]=Tr,I[Se]=$,q=Se):(I[q]=it,I[Ke]=$,q=Ke);else if(Se<J&&0>s(Tr,$))I[q]=Tr,I[Se]=$,q=Se;else break e}}return A}function s(I,A){var $=I.sortIndex-A.sortIndex;return $!==0?$:I.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,g=3,b=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(I){for(var A=r(u);A!==null;){if(A.callback===null)n(u);else if(A.startTime<=I)n(u),A.sortIndex=A.expirationTime,e(c,A);else break;A=r(u)}}function w(I){if(x=!1,f(I),!v)if(r(c)!==null)v=!0,F(C);else{var A=r(u);A!==null&&ge(w,A.startTime-I)}}function C(I,A){v=!1,x&&(x=!1,m(j),j=-1),b=!0;var $=g;try{for(f(A),p=r(c);p!==null&&(!(p.expirationTime>A)||I&&!M());){var q=p.callback;if(typeof q=="function"){p.callback=null,g=p.priorityLevel;var J=q(p.expirationTime<=A);A=t.unstable_now(),typeof J=="function"?p.callback=J:p===r(c)&&n(c),f(A)}else n(c);p=r(c)}if(p!==null)var re=!0;else{var Ke=r(u);Ke!==null&&ge(w,Ke.startTime-A),re=!1}return re}finally{p=null,g=$,b=!1}}var E=!1,k=null,j=-1,O=5,S=-1;function M(){return!(t.unstable_now()-S<O)}function P(){if(k!==null){var I=t.unstable_now();S=I;var A=!0;try{A=k(!0,I)}finally{A?N():(E=!1,k=null)}}else E=!1}var N;if(typeof d=="function")N=function(){d(P)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,z=T.port2;T.port1.onmessage=P,N=function(){z.postMessage(null)}}else N=function(){y(P,0)};function F(I){k=I,E||(E=!0,N())}function ge(I,A){j=y(function(){I(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||b||(v=!0,F(C))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(I){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var $=g;g=A;try{return I()}finally{g=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,A){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var $=g;g=I;try{return A()}finally{g=$}},t.unstable_scheduleCallback=function(I,A,$){var q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,I){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=$+J,I={id:h++,callback:A,priorityLevel:I,startTime:$,expirationTime:J,sortIndex:-1},$>q?(I.sortIndex=$,e(u,I),r(c)===null&&I===r(u)&&(x?(m(j),j=-1):x=!0,ge(w,$-q))):(I.sortIndex=J,e(c,I),v||b||(v=!0,F(C))),I},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(I){var A=g;return function(){var $=g;g=A;try{return I.apply(this,arguments)}finally{g=$}}}})(Mu);Lu.exports=Mu;var Qf=Lu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=_,Ve=Qf;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $u=new Set,Kn={};function Sr(t,e){rn(t,e),rn(t+"Capture",e)}function rn(t,e){for(Kn[t]=e,t=0;t<e.length;t++)$u.add(e[t])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Da=Object.prototype.hasOwnProperty,Yf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gl={},Kl={};function Xf(t){return Da.call(Kl,t)?!0:Da.call(Gl,t)?!1:Yf.test(t)?Kl[t]=!0:(Gl[t]=!0,!1)}function em(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tm(t,e,r,n){if(e===null||typeof e>"u"||em(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ve[t]=new Pe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ve[e]=new Pe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ve[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ve[t]=new Pe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ve[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ve[t]=new Pe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ve[t]=new Pe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ve[t]=new Pe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ve[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ko=/[\-:]([a-z])/g;function Jo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ko,Jo);ve[e]=new Pe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ko,Jo);ve[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ko,Jo);ve[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ve[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ve[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qo(t,e,r,n){var s=ve.hasOwnProperty(e)?ve[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tm(e,r,s,n)&&(r=null),n||s===null?Xf(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Rt=Zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Zo=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),Uu=Symbol.for("react.provider"),Du=Symbol.for("react.context"),Yo=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),Xo=Symbol.for("react.memo"),$t=Symbol.for("react.lazy"),zu=Symbol.for("react.offscreen"),Jl=Symbol.iterator;function wn(t){return t===null||typeof t!="object"?null:(t=Jl&&t[Jl]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,aa;function Tn(t){if(aa===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);aa=e&&e[1]||""}return`
`+aa+t}var oa=!1;function la(t,e){if(!t||oa)return"";oa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{oa=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Tn(t):""}function rm(t){switch(t.tag){case 5:return Tn(t.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 2:case 15:return t=la(t.type,!1),t;case 11:return t=la(t.type.render,!1),t;case 1:return t=la(t.type,!0),t;default:return""}}function Ha(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Mr:return"Portal";case za:return"Profiler";case Zo:return"StrictMode";case Fa:return"Suspense";case Ba:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Du:return(t.displayName||"Context")+".Consumer";case Uu:return(t._context.displayName||"Context")+".Provider";case Yo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xo:return e=t.displayName||null,e!==null?e:Ha(t.type)||"Memo";case $t:e=t._payload,t=t._init;try{return Ha(t(e))}catch{}}return null}function nm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ha(e);case 8:return e===Zo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sm(t){var e=Fu(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ns(t){t._valueTracker||(t._valueTracker=sm(t))}function Bu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Fu(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function si(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wa(t,e){var r=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ql(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=er(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hu(t,e){e=e.checked,e!=null&&Qo(t,"checked",e,!1)}function Va(t,e){Hu(t,e);var r=er(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qa(t,e.type,r):e.hasOwnProperty("defaultValue")&&qa(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zl(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qa(t,e,r){(e!=="number"||si(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var An=Array.isArray;function Kr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+er(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ga(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yl(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(L(92));if(An(r)){if(1<r.length)throw Error(L(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:er(r)}}function Wu(t,e){var r=er(e.value),n=er(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Xl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ka(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _s,qu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_s.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var On={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},im=["Webkit","ms","Moz","O"];Object.keys(On).forEach(function(t){im.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),On[e]=On[t]})});function Gu(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||On.hasOwnProperty(t)&&On[t]?(""+e).trim():e+"px"}function Ku(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Gu(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var am=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(t,e){if(e){if(am[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Qa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function el(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ya=null,Jr=null,Qr=null;function ec(t){if(t=gs(t)){if(typeof Ya!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Fi(e),Ya(t.stateNode,t.type,e))}}function Ju(t){Jr?Qr?Qr.push(t):Qr=[t]:Jr=t}function Qu(){if(Jr){var t=Jr,e=Qr;if(Qr=Jr=null,ec(t),e)for(t=0;t<e.length;t++)ec(e[t])}}function Zu(t,e){return t(e)}function Yu(){}var ca=!1;function Xu(t,e,r){if(ca)return t(e,r);ca=!0;try{return Zu(t,e,r)}finally{ca=!1,(Jr!==null||Qr!==null)&&(Yu(),Qu())}}function Qn(t,e){var r=t.stateNode;if(r===null)return null;var n=Fi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(L(231,e,typeof r));return r}var Xa=!1;if(Tt)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Xa=!1}function om(t,e,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Ln=!1,ii=null,ai=!1,eo=null,lm={onError:function(t){Ln=!0,ii=t}};function cm(t,e,r,n,s,a,o,l,c){Ln=!1,ii=null,om.apply(lm,arguments)}function um(t,e,r,n,s,a,o,l,c){if(cm.apply(this,arguments),Ln){if(Ln){var u=ii;Ln=!1,ii=null}else throw Error(L(198));ai||(ai=!0,eo=u)}}function Cr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function ed(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tc(t){if(Cr(t)!==t)throw Error(L(188))}function dm(t){var e=t.alternate;if(!e){if(e=Cr(t),e===null)throw Error(L(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return tc(s),t;if(a===n)return tc(s),e;a=a.sibling}throw Error(L(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(L(189))}}if(r.alternate!==n)throw Error(L(190))}if(r.tag!==3)throw Error(L(188));return r.stateNode.current===r?t:e}function td(t){return t=dm(t),t!==null?rd(t):null}function rd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rd(t);if(e!==null)return e;t=t.sibling}return null}var nd=Ve.unstable_scheduleCallback,rc=Ve.unstable_cancelCallback,hm=Ve.unstable_shouldYield,fm=Ve.unstable_requestPaint,le=Ve.unstable_now,mm=Ve.unstable_getCurrentPriorityLevel,tl=Ve.unstable_ImmediatePriority,sd=Ve.unstable_UserBlockingPriority,oi=Ve.unstable_NormalPriority,pm=Ve.unstable_LowPriority,id=Ve.unstable_IdlePriority,$i=null,yt=null;function gm(t){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot($i,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:vm,xm=Math.log,ym=Math.LN2;function vm(t){return t>>>=0,t===0?32:31-(xm(t)/ym|0)|0}var Ss=64,Cs=4194304;function Pn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function li(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Pn(l):(a&=o,a!==0&&(n=Pn(a)))}else o=r&~s,o!==0?n=Pn(o):a!==0&&(n=Pn(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ht(e),s=1<<r,n|=t[r],e&=~s;return n}function wm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ht(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=wm(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function to(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ad(){var t=Ss;return Ss<<=1,!(Ss&4194240)&&(Ss=64),t}function ua(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ms(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ht(e),t[e]=r}function jm(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ht(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function rl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ht(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Q=0;function od(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ld,nl,cd,ud,dd,ro=!1,Es=[],Vt=null,qt=null,Gt=null,Zn=new Map,Yn=new Map,zt=[],km="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nc(t,e){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":Zn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(e.pointerId)}}function jn(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=gs(e),e!==null&&nl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Nm(t,e,r,n,s){switch(e){case"focusin":return Vt=jn(Vt,t,e,r,n,s),!0;case"dragenter":return qt=jn(qt,t,e,r,n,s),!0;case"mouseover":return Gt=jn(Gt,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return Zn.set(a,jn(Zn.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Yn.set(a,jn(Yn.get(a)||null,t,e,r,n,s)),!0}return!1}function hd(t){var e=fr(t.target);if(e!==null){var r=Cr(e);if(r!==null){if(e=r.tag,e===13){if(e=ed(r),e!==null){t.blockedOn=e,dd(t.priority,function(){cd(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=no(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Za=n,r.target.dispatchEvent(n),Za=null}else return e=gs(r),e!==null&&nl(e),t.blockedOn=r,!1;e.shift()}return!0}function sc(t,e,r){Gs(t)&&r.delete(e)}function _m(){ro=!1,Vt!==null&&Gs(Vt)&&(Vt=null),qt!==null&&Gs(qt)&&(qt=null),Gt!==null&&Gs(Gt)&&(Gt=null),Zn.forEach(sc),Yn.forEach(sc)}function kn(t,e){t.blockedOn===e&&(t.blockedOn=null,ro||(ro=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,_m)))}function Xn(t){function e(s){return kn(s,t)}if(0<Es.length){kn(Es[0],t);for(var r=1;r<Es.length;r++){var n=Es[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Vt!==null&&kn(Vt,t),qt!==null&&kn(qt,t),Gt!==null&&kn(Gt,t),Zn.forEach(e),Yn.forEach(e),r=0;r<zt.length;r++)n=zt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<zt.length&&(r=zt[0],r.blockedOn===null);)hd(r),r.blockedOn===null&&zt.shift()}var Zr=Rt.ReactCurrentBatchConfig,ci=!0;function Sm(t,e,r,n){var s=Q,a=Zr.transition;Zr.transition=null;try{Q=1,sl(t,e,r,n)}finally{Q=s,Zr.transition=a}}function Cm(t,e,r,n){var s=Q,a=Zr.transition;Zr.transition=null;try{Q=4,sl(t,e,r,n)}finally{Q=s,Zr.transition=a}}function sl(t,e,r,n){if(ci){var s=no(t,e,r,n);if(s===null)wa(t,e,n,ui,r),nc(t,n);else if(Nm(s,t,e,r,n))n.stopPropagation();else if(nc(t,n),e&4&&-1<km.indexOf(t)){for(;s!==null;){var a=gs(s);if(a!==null&&ld(a),a=no(t,e,r,n),a===null&&wa(t,e,n,ui,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else wa(t,e,n,null,r)}}var ui=null;function no(t,e,r,n){if(ui=null,t=el(n),t=fr(t),t!==null)if(e=Cr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=ed(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ui=t,null}function fd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mm()){case tl:return 1;case sd:return 4;case oi:case pm:return 16;case id:return 536870912;default:return 16}default:return 16}}var Ht=null,il=null,Ks=null;function md(){if(Ks)return Ks;var t,e=il,r=e.length,n,s="value"in Ht?Ht.value:Ht.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Ks=s.slice(t,1<n?1-n:void 0)}function Js(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function ic(){return!1}function Ge(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ts:ic,this.isPropagationStopped=ic,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),e}var mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=Ge(mn),ps=ae({},mn,{view:0,detail:0}),Em=Ge(ps),da,ha,Nn,Ui=ae({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nn&&(Nn&&t.type==="mousemove"?(da=t.screenX-Nn.screenX,ha=t.screenY-Nn.screenY):ha=da=0,Nn=t),da)},movementY:function(t){return"movementY"in t?t.movementY:ha}}),ac=Ge(Ui),Tm=ae({},Ui,{dataTransfer:0}),Am=Ge(Tm),Pm=ae({},ps,{relatedTarget:0}),fa=Ge(Pm),Im=ae({},mn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rm=Ge(Im),Om=ae({},mn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lm=Ge(Om),Mm=ae({},mn,{data:0}),oc=Ge(Mm),$m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dm[t])?!!e[t]:!1}function ol(){return zm}var Fm=ae({},ps,{key:function(t){if(t.key){var e=$m[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Js(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Um[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(t){return t.type==="keypress"?Js(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Js(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bm=Ge(Fm),Hm=ae({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lc=Ge(Hm),Wm=ae({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),Vm=Ge(Wm),qm=ae({},mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gm=Ge(qm),Km=ae({},Ui,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jm=Ge(Km),Qm=[9,13,27,32],ll=Tt&&"CompositionEvent"in window,Mn=null;Tt&&"documentMode"in document&&(Mn=document.documentMode);var Zm=Tt&&"TextEvent"in window&&!Mn,pd=Tt&&(!ll||Mn&&8<Mn&&11>=Mn),cc=" ",uc=!1;function gd(t,e){switch(t){case"keyup":return Qm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function Ym(t,e){switch(t){case"compositionend":return xd(e);case"keypress":return e.which!==32?null:(uc=!0,cc);case"textInput":return t=e.data,t===cc&&uc?null:t;default:return null}}function Xm(t,e){if(Ur)return t==="compositionend"||!ll&&gd(t,e)?(t=md(),Ks=il=Ht=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pd&&e.locale!=="ko"?null:e.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e0[t.type]:e==="textarea"}function yd(t,e,r,n){Ju(n),e=di(e,"onChange"),0<e.length&&(r=new al("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var $n=null,es=null;function t0(t){Td(t,0)}function Di(t){var e=Fr(t);if(Bu(e))return t}function r0(t,e){if(t==="change")return e}var vd=!1;if(Tt){var ma;if(Tt){var pa="oninput"in document;if(!pa){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),pa=typeof hc.oninput=="function"}ma=pa}else ma=!1;vd=ma&&(!document.documentMode||9<document.documentMode)}function fc(){$n&&($n.detachEvent("onpropertychange",wd),es=$n=null)}function wd(t){if(t.propertyName==="value"&&Di(es)){var e=[];yd(e,es,t,el(t)),Xu(t0,e)}}function n0(t,e,r){t==="focusin"?(fc(),$n=e,es=r,$n.attachEvent("onpropertychange",wd)):t==="focusout"&&fc()}function s0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Di(es)}function i0(t,e){if(t==="click")return Di(e)}function a0(t,e){if(t==="input"||t==="change")return Di(e)}function o0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:o0;function ts(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Da.call(e,s)||!mt(t[s],e[s]))return!1}return!0}function mc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pc(t,e){var r=mc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mc(r)}}function bd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jd(){for(var t=window,e=si();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=si(t.document)}return e}function cl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function l0(t){var e=jd(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&bd(r.ownerDocument.documentElement,r)){if(n!==null&&cl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=pc(r,a);var o=pc(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var c0=Tt&&"documentMode"in document&&11>=document.documentMode,Dr=null,so=null,Un=null,io=!1;function gc(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;io||Dr==null||Dr!==si(n)||(n=Dr,"selectionStart"in n&&cl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Un&&ts(Un,n)||(Un=n,n=di(so,"onSelect"),0<n.length&&(e=new al("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Dr)))}function As(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},ga={},kd={};Tt&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function zi(t){if(ga[t])return ga[t];if(!zr[t])return t;var e=zr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in kd)return ga[t]=e[r];return t}var Nd=zi("animationend"),_d=zi("animationiteration"),Sd=zi("animationstart"),Cd=zi("transitionend"),Ed=new Map,xc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){Ed.set(t,e),Sr(e,[t])}for(var xa=0;xa<xc.length;xa++){var ya=xc[xa],u0=ya.toLowerCase(),d0=ya[0].toUpperCase()+ya.slice(1);nr(u0,"on"+d0)}nr(Nd,"onAnimationEnd");nr(_d,"onAnimationIteration");nr(Sd,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(Cd,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var In="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h0=new Set("cancel close invalid load scroll toggle".split(" ").concat(In));function yc(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,um(n,e,void 0,t),t.currentTarget=null}function Td(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;yc(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;yc(s,l,u),a=c}}}if(ai)throw t=eo,ai=!1,eo=null,t}function ee(t,e){var r=e[uo];r===void 0&&(r=e[uo]=new Set);var n=t+"__bubble";r.has(n)||(Ad(e,t,2,!1),r.add(n))}function va(t,e,r){var n=0;e&&(n|=4),Ad(r,t,n,e)}var Ps="_reactListening"+Math.random().toString(36).slice(2);function rs(t){if(!t[Ps]){t[Ps]=!0,$u.forEach(function(r){r!=="selectionchange"&&(h0.has(r)||va(r,!1,t),va(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ps]||(e[Ps]=!0,va("selectionchange",!1,e))}}function Ad(t,e,r,n){switch(fd(e)){case 1:var s=Sm;break;case 4:s=Cm;break;default:s=sl}r=s.bind(null,e,r,t),s=void 0,!Xa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function wa(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=fr(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Xu(function(){var u=a,h=el(r),p=[];e:{var g=Ed.get(t);if(g!==void 0){var b=al,v=t;switch(t){case"keypress":if(Js(r)===0)break e;case"keydown":case"keyup":b=Bm;break;case"focusin":v="focus",b=fa;break;case"focusout":v="blur",b=fa;break;case"beforeblur":case"afterblur":b=fa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Vm;break;case Nd:case _d:case Sd:b=Rm;break;case Cd:b=Gm;break;case"scroll":b=Em;break;case"wheel":b=Jm;break;case"copy":case"cut":case"paste":b=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=lc}var x=(e&4)!==0,y=!x&&t==="scroll",m=x?g!==null?g+"Capture":null:g;x=[];for(var d=u,f;d!==null;){f=d;var w=f.stateNode;if(f.tag===5&&w!==null&&(f=w,m!==null&&(w=Qn(d,m),w!=null&&x.push(ns(d,w,f)))),y)break;d=d.return}0<x.length&&(g=new b(g,v,null,r,h),p.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&r!==Za&&(v=r.relatedTarget||r.fromElement)&&(fr(v)||v[At]))break e;if((b||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,b?(v=r.relatedTarget||r.toElement,b=u,v=v?fr(v):null,v!==null&&(y=Cr(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(b=null,v=u),b!==v)){if(x=ac,w="onMouseLeave",m="onMouseEnter",d="mouse",(t==="pointerout"||t==="pointerover")&&(x=lc,w="onPointerLeave",m="onPointerEnter",d="pointer"),y=b==null?g:Fr(b),f=v==null?g:Fr(v),g=new x(w,d+"leave",b,r,h),g.target=y,g.relatedTarget=f,w=null,fr(h)===u&&(x=new x(m,d+"enter",v,r,h),x.target=f,x.relatedTarget=y,w=x),y=w,b&&v)t:{for(x=b,m=v,d=0,f=x;f;f=Ar(f))d++;for(f=0,w=m;w;w=Ar(w))f++;for(;0<d-f;)x=Ar(x),d--;for(;0<f-d;)m=Ar(m),f--;for(;d--;){if(x===m||m!==null&&x===m.alternate)break t;x=Ar(x),m=Ar(m)}x=null}else x=null;b!==null&&vc(p,g,b,x,!1),v!==null&&y!==null&&vc(p,y,v,x,!0)}}e:{if(g=u?Fr(u):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var C=r0;else if(dc(g))if(vd)C=a0;else{C=s0;var E=n0}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=i0);if(C&&(C=C(t,u))){yd(p,C,r,h);break e}E&&E(t,g,u),t==="focusout"&&(E=g._wrapperState)&&E.controlled&&g.type==="number"&&qa(g,"number",g.value)}switch(E=u?Fr(u):window,t){case"focusin":(dc(E)||E.contentEditable==="true")&&(Dr=E,so=u,Un=null);break;case"focusout":Un=so=Dr=null;break;case"mousedown":io=!0;break;case"contextmenu":case"mouseup":case"dragend":io=!1,gc(p,r,h);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":gc(p,r,h)}var k;if(ll)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ur?gd(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(pd&&r.locale!=="ko"&&(Ur||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ur&&(k=md()):(Ht=h,il="value"in Ht?Ht.value:Ht.textContent,Ur=!0)),E=di(u,j),0<E.length&&(j=new oc(j,t,null,r,h),p.push({event:j,listeners:E}),k?j.data=k:(k=xd(r),k!==null&&(j.data=k)))),(k=Zm?Ym(t,r):Xm(t,r))&&(u=di(u,"onBeforeInput"),0<u.length&&(h=new oc("onBeforeInput","beforeinput",null,r,h),p.push({event:h,listeners:u}),h.data=k))}Td(p,e)})}function ns(t,e,r){return{instance:t,listener:e,currentTarget:r}}function di(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Qn(t,r),a!=null&&n.unshift(ns(t,a,s)),a=Qn(t,e),a!=null&&n.push(ns(t,a,s))),t=t.return}return n}function Ar(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vc(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Qn(r,a),c!=null&&o.unshift(ns(r,c,l))):s||(c=Qn(r,a),c!=null&&o.push(ns(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var f0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function wc(t){return(typeof t=="string"?t:""+t).replace(f0,`
`).replace(m0,"")}function Is(t,e,r){if(e=wc(e),wc(t)!==e&&r)throw Error(L(425))}function hi(){}var ao=null,oo=null;function lo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var co=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,bc=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof bc<"u"?function(t){return bc.resolve(null).then(t).catch(x0)}:co;function x0(t){setTimeout(function(){throw t})}function ba(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Xn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Xn(e)}function Kt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var pn=Math.random().toString(36).slice(2),xt="__reactFiber$"+pn,ss="__reactProps$"+pn,At="__reactContainer$"+pn,uo="__reactEvents$"+pn,y0="__reactListeners$"+pn,v0="__reactHandles$"+pn;function fr(t){var e=t[xt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[At]||r[xt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=jc(t);t!==null;){if(r=t[xt])return r;t=jc(t)}return e}t=r,r=t.parentNode}return null}function gs(t){return t=t[xt]||t[At],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Fi(t){return t[ss]||null}var ho=[],Br=-1;function sr(t){return{current:t}}function te(t){0>Br||(t.current=ho[Br],ho[Br]=null,Br--)}function Y(t,e){Br++,ho[Br]=t.current,t.current=e}var tr={},_e=sr(tr),Ue=sr(!1),wr=tr;function nn(t,e){var r=t.type.contextTypes;if(!r)return tr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function De(t){return t=t.childContextTypes,t!=null}function fi(){te(Ue),te(_e)}function kc(t,e,r){if(_e.current!==tr)throw Error(L(168));Y(_e,e),Y(Ue,r)}function Pd(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(L(108,nm(t)||"Unknown",s));return ae({},r,n)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,wr=_e.current,Y(_e,t),Y(Ue,Ue.current),!0}function Nc(t,e,r){var n=t.stateNode;if(!n)throw Error(L(169));r?(t=Pd(t,e,wr),n.__reactInternalMemoizedMergedChildContext=t,te(Ue),te(_e),Y(_e,t)):te(Ue),Y(Ue,r)}var Nt=null,Bi=!1,ja=!1;function Id(t){Nt===null?Nt=[t]:Nt.push(t)}function w0(t){Bi=!0,Id(t)}function ir(){if(!ja&&Nt!==null){ja=!0;var t=0,e=Q;try{var r=Nt;for(Q=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Nt=null,Bi=!1}catch(s){throw Nt!==null&&(Nt=Nt.slice(t+1)),nd(tl,ir),s}finally{Q=e,ja=!1}}return null}var Hr=[],Wr=0,pi=null,gi=0,Qe=[],Ze=0,br=null,_t=1,St="";function cr(t,e){Hr[Wr++]=gi,Hr[Wr++]=pi,pi=t,gi=e}function Rd(t,e,r){Qe[Ze++]=_t,Qe[Ze++]=St,Qe[Ze++]=br,br=t;var n=_t;t=St;var s=32-ht(n)-1;n&=~(1<<s),r+=1;var a=32-ht(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,_t=1<<32-ht(e)+s|r<<s|n,St=a+t}else _t=1<<a|r<<s|n,St=t}function ul(t){t.return!==null&&(cr(t,1),Rd(t,1,0))}function dl(t){for(;t===pi;)pi=Hr[--Wr],Hr[Wr]=null,gi=Hr[--Wr],Hr[Wr]=null;for(;t===br;)br=Qe[--Ze],Qe[Ze]=null,St=Qe[--Ze],Qe[Ze]=null,_t=Qe[--Ze],Qe[Ze]=null}var We=null,He=null,ne=!1,dt=null;function Od(t,e){var r=Xe(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function _c(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,We=t,He=Kt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,We=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=br!==null?{id:_t,overflow:St}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xe(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,We=t,He=null,!0):!1;default:return!1}}function fo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mo(t){if(ne){var e=He;if(e){var r=e;if(!_c(t,e)){if(fo(t))throw Error(L(418));e=Kt(r.nextSibling);var n=We;e&&_c(t,e)?Od(n,r):(t.flags=t.flags&-4097|2,ne=!1,We=t)}}else{if(fo(t))throw Error(L(418));t.flags=t.flags&-4097|2,ne=!1,We=t}}}function Sc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;We=t}function Rs(t){if(t!==We)return!1;if(!ne)return Sc(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lo(t.type,t.memoizedProps)),e&&(e=He)){if(fo(t))throw Ld(),Error(L(418));for(;e;)Od(t,e),e=Kt(e.nextSibling)}if(Sc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){He=Kt(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}He=null}}else He=We?Kt(t.stateNode.nextSibling):null;return!0}function Ld(){for(var t=He;t;)t=Kt(t.nextSibling)}function sn(){He=We=null,ne=!1}function hl(t){dt===null?dt=[t]:dt.push(t)}var b0=Rt.ReactCurrentBatchConfig;function _n(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(L(309));var n=r.stateNode}if(!n)throw Error(L(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(L(284));if(!r._owner)throw Error(L(290,t))}return t}function Os(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cc(t){var e=t._init;return e(t._payload)}function Md(t){function e(m,d){if(t){var f=m.deletions;f===null?(m.deletions=[d],m.flags|=16):f.push(d)}}function r(m,d){if(!t)return null;for(;d!==null;)e(m,d),d=d.sibling;return null}function n(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function s(m,d){return m=Yt(m,d),m.index=0,m.sibling=null,m}function a(m,d,f){return m.index=f,t?(f=m.alternate,f!==null?(f=f.index,f<d?(m.flags|=2,d):f):(m.flags|=2,d)):(m.flags|=1048576,d)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,d,f,w){return d===null||d.tag!==6?(d=Ta(f,m.mode,w),d.return=m,d):(d=s(d,f),d.return=m,d)}function c(m,d,f,w){var C=f.type;return C===$r?h(m,d,f.props.children,w,f.key):d!==null&&(d.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$t&&Cc(C)===d.type)?(w=s(d,f.props),w.ref=_n(m,d,f),w.return=m,w):(w=ri(f.type,f.key,f.props,null,m.mode,w),w.ref=_n(m,d,f),w.return=m,w)}function u(m,d,f,w){return d===null||d.tag!==4||d.stateNode.containerInfo!==f.containerInfo||d.stateNode.implementation!==f.implementation?(d=Aa(f,m.mode,w),d.return=m,d):(d=s(d,f.children||[]),d.return=m,d)}function h(m,d,f,w,C){return d===null||d.tag!==7?(d=xr(f,m.mode,w,C),d.return=m,d):(d=s(d,f),d.return=m,d)}function p(m,d,f){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ta(""+d,m.mode,f),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case ks:return f=ri(d.type,d.key,d.props,null,m.mode,f),f.ref=_n(m,null,d),f.return=m,f;case Mr:return d=Aa(d,m.mode,f),d.return=m,d;case $t:var w=d._init;return p(m,w(d._payload),f)}if(An(d)||wn(d))return d=xr(d,m.mode,f,null),d.return=m,d;Os(m,d)}return null}function g(m,d,f,w){var C=d!==null?d.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return C!==null?null:l(m,d,""+f,w);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ks:return f.key===C?c(m,d,f,w):null;case Mr:return f.key===C?u(m,d,f,w):null;case $t:return C=f._init,g(m,d,C(f._payload),w)}if(An(f)||wn(f))return C!==null?null:h(m,d,f,w,null);Os(m,f)}return null}function b(m,d,f,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(f)||null,l(d,m,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ks:return m=m.get(w.key===null?f:w.key)||null,c(d,m,w,C);case Mr:return m=m.get(w.key===null?f:w.key)||null,u(d,m,w,C);case $t:var E=w._init;return b(m,d,f,E(w._payload),C)}if(An(w)||wn(w))return m=m.get(f)||null,h(d,m,w,C,null);Os(d,w)}return null}function v(m,d,f,w){for(var C=null,E=null,k=d,j=d=0,O=null;k!==null&&j<f.length;j++){k.index>j?(O=k,k=null):O=k.sibling;var S=g(m,k,f[j],w);if(S===null){k===null&&(k=O);break}t&&k&&S.alternate===null&&e(m,k),d=a(S,d,j),E===null?C=S:E.sibling=S,E=S,k=O}if(j===f.length)return r(m,k),ne&&cr(m,j),C;if(k===null){for(;j<f.length;j++)k=p(m,f[j],w),k!==null&&(d=a(k,d,j),E===null?C=k:E.sibling=k,E=k);return ne&&cr(m,j),C}for(k=n(m,k);j<f.length;j++)O=b(k,m,j,f[j],w),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?j:O.key),d=a(O,d,j),E===null?C=O:E.sibling=O,E=O);return t&&k.forEach(function(M){return e(m,M)}),ne&&cr(m,j),C}function x(m,d,f,w){var C=wn(f);if(typeof C!="function")throw Error(L(150));if(f=C.call(f),f==null)throw Error(L(151));for(var E=C=null,k=d,j=d=0,O=null,S=f.next();k!==null&&!S.done;j++,S=f.next()){k.index>j?(O=k,k=null):O=k.sibling;var M=g(m,k,S.value,w);if(M===null){k===null&&(k=O);break}t&&k&&M.alternate===null&&e(m,k),d=a(M,d,j),E===null?C=M:E.sibling=M,E=M,k=O}if(S.done)return r(m,k),ne&&cr(m,j),C;if(k===null){for(;!S.done;j++,S=f.next())S=p(m,S.value,w),S!==null&&(d=a(S,d,j),E===null?C=S:E.sibling=S,E=S);return ne&&cr(m,j),C}for(k=n(m,k);!S.done;j++,S=f.next())S=b(k,m,j,S.value,w),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?j:S.key),d=a(S,d,j),E===null?C=S:E.sibling=S,E=S);return t&&k.forEach(function(P){return e(m,P)}),ne&&cr(m,j),C}function y(m,d,f,w){if(typeof f=="object"&&f!==null&&f.type===$r&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ks:e:{for(var C=f.key,E=d;E!==null;){if(E.key===C){if(C=f.type,C===$r){if(E.tag===7){r(m,E.sibling),d=s(E,f.props.children),d.return=m,m=d;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$t&&Cc(C)===E.type){r(m,E.sibling),d=s(E,f.props),d.ref=_n(m,E,f),d.return=m,m=d;break e}r(m,E);break}else e(m,E);E=E.sibling}f.type===$r?(d=xr(f.props.children,m.mode,w,f.key),d.return=m,m=d):(w=ri(f.type,f.key,f.props,null,m.mode,w),w.ref=_n(m,d,f),w.return=m,m=w)}return o(m);case Mr:e:{for(E=f.key;d!==null;){if(d.key===E)if(d.tag===4&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){r(m,d.sibling),d=s(d,f.children||[]),d.return=m,m=d;break e}else{r(m,d);break}else e(m,d);d=d.sibling}d=Aa(f,m.mode,w),d.return=m,m=d}return o(m);case $t:return E=f._init,y(m,d,E(f._payload),w)}if(An(f))return v(m,d,f,w);if(wn(f))return x(m,d,f,w);Os(m,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,d!==null&&d.tag===6?(r(m,d.sibling),d=s(d,f),d.return=m,m=d):(r(m,d),d=Ta(f,m.mode,w),d.return=m,m=d),o(m)):r(m,d)}return y}var an=Md(!0),$d=Md(!1),xi=sr(null),yi=null,Vr=null,fl=null;function ml(){fl=Vr=yi=null}function pl(t){var e=xi.current;te(xi),t._currentValue=e}function po(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yr(t,e){yi=t,fl=Vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function rt(t){var e=t._currentValue;if(fl!==t)if(t={context:t,memoizedValue:e,next:null},Vr===null){if(yi===null)throw Error(L(308));Vr=t,yi.dependencies={lanes:0,firstContext:t}}else Vr=Vr.next=t;return e}var mr=null;function gl(t){mr===null?mr=[t]:mr.push(t)}function Ud(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,gl(e)):(r.next=s.next,s.next=r),e.interleaved=r,Pt(t,n)}function Pt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ut=!1;function xl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ct(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jt(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Pt(t,r)}return s=n.interleaved,s===null?(e.next=e,gl(n)):(e.next=s.next,s.next=e),n.interleaved=e,Pt(t,r)}function Qs(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rl(t,r)}}function Ec(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function vi(t,e,r,n){var s=t.updateQueue;Ut=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var p=s.baseState;o=0,h=u=c=null,l=a;do{var g=l.lane,b=l.eventTime;if((n&g)===g){h!==null&&(h=h.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,x=l;switch(g=e,b=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){p=v.call(b,p,g);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,g=typeof v=="function"?v.call(b,p,g):v,g==null)break e;p=ae({},p,g);break e;case 2:Ut=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else b={eventTime:b,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=b,c=p):h=h.next=b,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);kr|=o,t.lanes=o,t.memoizedState=p}}function Tc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(L(191,s));s.call(n)}}}var xs={},vt=sr(xs),is=sr(xs),as=sr(xs);function pr(t){if(t===xs)throw Error(L(174));return t}function yl(t,e){switch(Y(as,e),Y(is,t),Y(vt,xs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ka(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ka(e,t)}te(vt),Y(vt,e)}function on(){te(vt),te(is),te(as)}function zd(t){pr(as.current);var e=pr(vt.current),r=Ka(e,t.type);e!==r&&(Y(is,t),Y(vt,r))}function vl(t){is.current===t&&(te(vt),te(is))}var se=sr(0);function wi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ka=[];function wl(){for(var t=0;t<ka.length;t++)ka[t]._workInProgressVersionPrimary=null;ka.length=0}var Zs=Rt.ReactCurrentDispatcher,Na=Rt.ReactCurrentBatchConfig,jr=0,ie=null,de=null,me=null,bi=!1,Dn=!1,os=0,j0=0;function be(){throw Error(L(321))}function bl(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!mt(t[r],e[r]))return!1;return!0}function jl(t,e,r,n,s,a){if(jr=a,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zs.current=t===null||t.memoizedState===null?S0:C0,t=r(n,s),Dn){a=0;do{if(Dn=!1,os=0,25<=a)throw Error(L(301));a+=1,me=de=null,e.updateQueue=null,Zs.current=E0,t=r(n,s)}while(Dn)}if(Zs.current=ji,e=de!==null&&de.next!==null,jr=0,me=de=ie=null,bi=!1,e)throw Error(L(300));return t}function kl(){var t=os!==0;return os=0,t}function gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?ie.memoizedState=me=t:me=me.next=t,me}function nt(){if(de===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=de.next;var e=me===null?ie.memoizedState:me.next;if(e!==null)me=e,de=t;else{if(t===null)throw Error(L(310));de=t,t={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},me===null?ie.memoizedState=me=t:me=me.next=t}return me}function ls(t,e){return typeof e=="function"?e(t):e}function _a(t){var e=nt(),r=e.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=t;var n=de,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((jr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=n):c=c.next=p,ie.lanes|=h,kr|=h}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,mt(n,e.memoizedState)||($e=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,ie.lanes|=a,kr|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Sa(t){var e=nt(),r=e.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);mt(a,e.memoizedState)||($e=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Fd(){}function Bd(t,e){var r=ie,n=nt(),s=e(),a=!mt(n.memoizedState,s);if(a&&(n.memoizedState=s,$e=!0),n=n.queue,Nl(Vd.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||me!==null&&me.memoizedState.tag&1){if(r.flags|=2048,cs(9,Wd.bind(null,r,n,s,e),void 0,null),pe===null)throw Error(L(349));jr&30||Hd(r,e,s)}return s}function Hd(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Wd(t,e,r,n){e.value=r,e.getSnapshot=n,qd(e)&&Gd(t)}function Vd(t,e,r){return r(function(){qd(e)&&Gd(t)})}function qd(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!mt(t,r)}catch{return!0}}function Gd(t){var e=Pt(t,1);e!==null&&ft(e,t,1,-1)}function Ac(t){var e=gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},e.queue=t,t=t.dispatch=_0.bind(null,ie,t),[e.memoizedState,t]}function cs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Kd(){return nt().memoizedState}function Ys(t,e,r,n){var s=gt();ie.flags|=t,s.memoizedState=cs(1|e,r,void 0,n===void 0?null:n)}function Hi(t,e,r,n){var s=nt();n=n===void 0?null:n;var a=void 0;if(de!==null){var o=de.memoizedState;if(a=o.destroy,n!==null&&bl(n,o.deps)){s.memoizedState=cs(e,r,a,n);return}}ie.flags|=t,s.memoizedState=cs(1|e,r,a,n)}function Pc(t,e){return Ys(8390656,8,t,e)}function Nl(t,e){return Hi(2048,8,t,e)}function Jd(t,e){return Hi(4,2,t,e)}function Qd(t,e){return Hi(4,4,t,e)}function Zd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yd(t,e,r){return r=r!=null?r.concat([t]):null,Hi(4,4,Zd.bind(null,e,t),r)}function _l(){}function Xd(t,e){var r=nt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bl(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function eh(t,e){var r=nt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bl(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function th(t,e,r){return jr&21?(mt(r,e)||(r=ad(),ie.lanes|=r,kr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=r)}function k0(t,e){var r=Q;Q=r!==0&&4>r?r:4,t(!0);var n=Na.transition;Na.transition={};try{t(!1),e()}finally{Q=r,Na.transition=n}}function rh(){return nt().memoizedState}function N0(t,e,r){var n=Zt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nh(t))sh(e,r);else if(r=Ud(t,e,r,n),r!==null){var s=Te();ft(r,t,n,s),ih(r,e,n)}}function _0(t,e,r){var n=Zt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nh(t))sh(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,mt(l,o)){var c=e.interleaved;c===null?(s.next=s,gl(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Ud(t,e,s,n),r!==null&&(s=Te(),ft(r,t,n,s),ih(r,e,n))}}function nh(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function sh(t,e){Dn=bi=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ih(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,rl(t,r)}}var ji={readContext:rt,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},S0={readContext:rt,useCallback:function(t,e){return gt().memoizedState=[t,e===void 0?null:e],t},useContext:rt,useEffect:Pc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ys(4194308,4,Zd.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ys(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ys(4,2,t,e)},useMemo:function(t,e){var r=gt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=gt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=N0.bind(null,ie,t),[n.memoizedState,t]},useRef:function(t){var e=gt();return t={current:t},e.memoizedState=t},useState:Ac,useDebugValue:_l,useDeferredValue:function(t){return gt().memoizedState=t},useTransition:function(){var t=Ac(!1),e=t[0];return t=k0.bind(null,t[1]),gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ie,s=gt();if(ne){if(r===void 0)throw Error(L(407));r=r()}else{if(r=e(),pe===null)throw Error(L(349));jr&30||Hd(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,Pc(Vd.bind(null,n,a,t),[t]),n.flags|=2048,cs(9,Wd.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=gt(),e=pe.identifierPrefix;if(ne){var r=St,n=_t;r=(n&~(1<<32-ht(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=os++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=j0++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C0={readContext:rt,useCallback:Xd,useContext:rt,useEffect:Nl,useImperativeHandle:Yd,useInsertionEffect:Jd,useLayoutEffect:Qd,useMemo:eh,useReducer:_a,useRef:Kd,useState:function(){return _a(ls)},useDebugValue:_l,useDeferredValue:function(t){var e=nt();return th(e,de.memoizedState,t)},useTransition:function(){var t=_a(ls)[0],e=nt().memoizedState;return[t,e]},useMutableSource:Fd,useSyncExternalStore:Bd,useId:rh,unstable_isNewReconciler:!1},E0={readContext:rt,useCallback:Xd,useContext:rt,useEffect:Nl,useImperativeHandle:Yd,useInsertionEffect:Jd,useLayoutEffect:Qd,useMemo:eh,useReducer:Sa,useRef:Kd,useState:function(){return Sa(ls)},useDebugValue:_l,useDeferredValue:function(t){var e=nt();return de===null?e.memoizedState=t:th(e,de.memoizedState,t)},useTransition:function(){var t=Sa(ls)[0],e=nt().memoizedState;return[t,e]},useMutableSource:Fd,useSyncExternalStore:Bd,useId:rh,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function go(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ae({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Wi={isMounted:function(t){return(t=t._reactInternals)?Cr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Te(),s=Zt(t),a=Ct(n,s);a.payload=e,r!=null&&(a.callback=r),e=Jt(t,a,s),e!==null&&(ft(e,t,s,n),Qs(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Te(),s=Zt(t),a=Ct(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Jt(t,a,s),e!==null&&(ft(e,t,s,n),Qs(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Te(),n=Zt(t),s=Ct(r,n);s.tag=2,e!=null&&(s.callback=e),e=Jt(t,s,n),e!==null&&(ft(e,t,n,r),Qs(e,t,n))}};function Ic(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!ts(r,n)||!ts(s,a):!0}function ah(t,e,r){var n=!1,s=tr,a=e.contextType;return typeof a=="object"&&a!==null?a=rt(a):(s=De(e)?wr:_e.current,n=e.contextTypes,a=(n=n!=null)?nn(t,s):tr),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Rc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Wi.enqueueReplaceState(e,e.state,null)}function xo(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},xl(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=rt(a):(a=De(e)?wr:_e.current,s.context=nn(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(go(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wi.enqueueReplaceState(s,s.state,null),vi(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ln(t,e){try{var r="",n=e;do r+=rm(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Ca(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function yo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function oh(t,e,r){r=Ct(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ni||(Ni=!0,Eo=n),yo(t,e)},r}function lh(t,e,r){r=Ct(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){yo(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){yo(t,e),typeof n!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Oc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new T0;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=H0.bind(null,t,e,r),e.then(t,t))}function Lc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ct(-1,1),e.tag=2,Jt(r,e,1))),r.lanes|=1),t)}var A0=Rt.ReactCurrentOwner,$e=!1;function Ee(t,e,r,n){e.child=t===null?$d(e,null,r,n):an(e,t.child,r,n)}function $c(t,e,r,n,s){r=r.render;var a=e.ref;return Yr(e,s),n=jl(t,e,r,n,a,s),r=kl(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,It(t,e,s)):(ne&&r&&ul(e),e.flags|=1,Ee(t,e,n,s),e.child)}function Uc(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!Rl(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,ch(t,e,a,n,s)):(t=ri(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ts,r(o,n)&&t.ref===e.ref)return It(t,e,s)}return e.flags|=1,t=Yt(a,n),t.ref=e.ref,t.return=e,e.child=t}function ch(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(ts(a,n)&&t.ref===e.ref)if($e=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,It(t,e,s)}return vo(t,e,r,n,s)}function uh(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Gr,Fe),Fe|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Gr,Fe),Fe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Y(Gr,Fe),Fe|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Y(Gr,Fe),Fe|=n;return Ee(t,e,s,r),e.child}function dh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function vo(t,e,r,n,s){var a=De(r)?wr:_e.current;return a=nn(e,a),Yr(e,s),r=jl(t,e,r,n,a,s),n=kl(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,It(t,e,s)):(ne&&n&&ul(e),e.flags|=1,Ee(t,e,r,s),e.child)}function Dc(t,e,r,n,s){if(De(r)){var a=!0;mi(e)}else a=!1;if(Yr(e,s),e.stateNode===null)Xs(t,e),ah(e,r,n),xo(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=rt(u):(u=De(r)?wr:_e.current,u=nn(e,u));var h=r.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Rc(e,o,n,u),Ut=!1;var g=e.memoizedState;o.state=g,vi(e,n,o,s),c=e.memoizedState,l!==n||g!==c||Ue.current||Ut?(typeof h=="function"&&(go(e,r,h,n),c=e.memoizedState),(l=Ut||Ic(e,r,l,n,g,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Dd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:lt(e.type,l),o.props=u,p=e.pendingProps,g=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=rt(c):(c=De(r)?wr:_e.current,c=nn(e,c));var b=r.getDerivedStateFromProps;(h=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&Rc(e,o,n,c),Ut=!1,g=e.memoizedState,o.state=g,vi(e,n,o,s);var v=e.memoizedState;l!==p||g!==v||Ue.current||Ut?(typeof b=="function"&&(go(e,r,b,n),v=e.memoizedState),(u=Ut||Ic(e,r,u,n,g,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return wo(t,e,r,n,a,s)}function wo(t,e,r,n,s,a){dh(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Nc(e,r,!1),It(t,e,a);n=e.stateNode,A0.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=an(e,t.child,null,a),e.child=an(e,null,l,a)):Ee(t,e,l,a),e.memoizedState=n.state,s&&Nc(e,r,!0),e.child}function hh(t){var e=t.stateNode;e.pendingContext?kc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kc(t,e.context,!1),yl(t,e.containerInfo)}function zc(t,e,r,n,s){return sn(),hl(s),e.flags|=256,Ee(t,e,r,n),e.child}var bo={dehydrated:null,treeContext:null,retryLane:0};function jo(t){return{baseLanes:t,cachePool:null,transitions:null}}function fh(t,e,r){var n=e.pendingProps,s=se.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Y(se,s&1),t===null)return mo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Gi(o,n,0,null),t=xr(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=jo(r),e.memoizedState=bo,t):Sl(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return P0(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Yt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Yt(l,a):(a=xr(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?jo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=bo,n}return a=t.child,t=a.sibling,n=Yt(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Sl(t,e){return e=Gi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ls(t,e,r,n){return n!==null&&hl(n),an(e,t.child,null,r),t=Sl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function P0(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Ca(Error(L(422))),Ls(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=Gi({mode:"visible",children:n.children},s,0,null),a=xr(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&an(e,t.child,null,o),e.child.memoizedState=jo(o),e.memoizedState=bo,a);if(!(e.mode&1))return Ls(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(L(419)),n=Ca(a,n,void 0),Ls(t,e,o,n)}if(l=(o&t.childLanes)!==0,$e||l){if(n=pe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Pt(t,s),ft(n,t,s,-1))}return Il(),n=Ca(Error(L(421))),Ls(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=W0.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,He=Kt(s.nextSibling),We=e,ne=!0,dt=null,t!==null&&(Qe[Ze++]=_t,Qe[Ze++]=St,Qe[Ze++]=br,_t=t.id,St=t.overflow,br=e),e=Sl(e,n.children),e.flags|=4096,e)}function Fc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),po(t.return,e,r)}function Ea(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function mh(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Ee(t,e,n.children,r),n=se.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fc(t,r,e);else if(t.tag===19)Fc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Y(se,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&wi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Ea(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Ea(e,!0,r,null,a);break;case"together":Ea(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function It(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,r=Yt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Yt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function I0(t,e,r){switch(e.tag){case 3:hh(e),sn();break;case 5:zd(e);break;case 1:De(e.type)&&mi(e);break;case 4:yl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Y(xi,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Y(se,se.current&1),e.flags|=128,null):r&e.child.childLanes?fh(t,e,r):(Y(se,se.current&1),t=It(t,e,r),t!==null?t.sibling:null);Y(se,se.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return mh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(se,se.current),n)break;return null;case 22:case 23:return e.lanes=0,uh(t,e,r)}return It(t,e,r)}var ph,ko,gh,xh;ph=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ko=function(){};gh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,pr(vt.current);var a=null;switch(r){case"input":s=Wa(t,s),n=Wa(t,n),a=[];break;case"select":s=ae({},s,{value:void 0}),n=ae({},n,{value:void 0}),a=[];break;case"textarea":s=Ga(t,s),n=Ga(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hi)}Ja(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ee("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};xh=function(t,e,r,n){r!==n&&(e.flags|=4)};function Sn(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function R0(t,e,r){var n=e.pendingProps;switch(dl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return De(e.type)&&fi(),je(e),null;case 3:return n=e.stateNode,on(),te(Ue),te(_e),wl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(Po(dt),dt=null))),ko(t,e),je(e),null;case 5:vl(e);var s=pr(as.current);if(r=e.type,t!==null&&e.stateNode!=null)gh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(L(166));return je(e),null}if(t=pr(vt.current),Rs(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[xt]=e,n[ss]=a,t=(e.mode&1)!==0,r){case"dialog":ee("cancel",n),ee("close",n);break;case"iframe":case"object":case"embed":ee("load",n);break;case"video":case"audio":for(s=0;s<In.length;s++)ee(In[s],n);break;case"source":ee("error",n);break;case"img":case"image":case"link":ee("error",n),ee("load",n);break;case"details":ee("toggle",n);break;case"input":Ql(n,a),ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ee("invalid",n);break;case"textarea":Yl(n,a),ee("invalid",n)}Ja(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Is(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Is(n.textContent,l,t),s=["children",""+l]):Kn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ee("scroll",n)}switch(r){case"input":Ns(n),Zl(n,a,!0);break;case"textarea":Ns(n),Xl(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=hi)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vu(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[xt]=e,t[ss]=n,ph(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qa(r,n),r){case"dialog":ee("cancel",t),ee("close",t),s=n;break;case"iframe":case"object":case"embed":ee("load",t),s=n;break;case"video":case"audio":for(s=0;s<In.length;s++)ee(In[s],t);s=n;break;case"source":ee("error",t),s=n;break;case"img":case"image":case"link":ee("error",t),ee("load",t),s=n;break;case"details":ee("toggle",t),s=n;break;case"input":Ql(t,n),s=Wa(t,n),ee("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ae({},n,{value:void 0}),ee("invalid",t);break;case"textarea":Yl(t,n),s=Ga(t,n),ee("invalid",t);break;default:s=n}Ja(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Ku(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qu(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Jn(t,c):typeof c=="number"&&Jn(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ee("scroll",t):c!=null&&Qo(t,a,c,o))}switch(r){case"input":Ns(t),Zl(t,n,!1);break;case"textarea":Ns(t),Xl(t);break;case"option":n.value!=null&&t.setAttribute("value",""+er(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Kr(t,!!n.multiple,a,!1):n.defaultValue!=null&&Kr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)xh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(L(166));if(r=pr(as.current),pr(vt.current),Rs(e)){if(n=e.stateNode,r=e.memoizedProps,n[xt]=e,(a=n.nodeValue!==r)&&(t=We,t!==null))switch(t.tag){case 3:Is(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Is(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xt]=e,e.stateNode=n}return je(e),null;case 13:if(te(se),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&He!==null&&e.mode&1&&!(e.flags&128))Ld(),sn(),e.flags|=98560,a=!1;else if(a=Rs(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(L(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[xt]=e}else sn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),a=!1}else dt!==null&&(Po(dt),dt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||se.current&1?he===0&&(he=3):Il())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return on(),ko(t,e),t===null&&rs(e.stateNode.containerInfo),je(e),null;case 10:return pl(e.type._context),je(e),null;case 17:return De(e.type)&&fi(),je(e),null;case 19:if(te(se),a=e.memoizedState,a===null)return je(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Sn(a,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wi(t),o!==null){for(e.flags|=128,Sn(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Y(se,se.current&1|2),e.child}t=t.sibling}a.tail!==null&&le()>cn&&(e.flags|=128,n=!0,Sn(a,!1),e.lanes=4194304)}else{if(!n)if(t=wi(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Sn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ne)return je(e),null}else 2*le()-a.renderingStartTime>cn&&r!==1073741824&&(e.flags|=128,n=!0,Sn(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=le(),e.sibling=null,r=se.current,Y(se,n?r&1|2:r&1),e):(je(e),null);case 22:case 23:return Pl(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Fe&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function O0(t,e){switch(dl(e),e.tag){case 1:return De(e.type)&&fi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return on(),te(Ue),te(_e),wl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vl(e),null;case 13:if(te(se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));sn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(se),null;case 4:return on(),null;case 10:return pl(e.type._context),null;case 22:case 23:return Pl(),null;case 24:return null;default:return null}}var Ms=!1,Ne=!1,L0=typeof WeakSet=="function"?WeakSet:Set,D=null;function qr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(t,e,n)}else r.current=null}function No(t,e,r){try{r()}catch(n){oe(t,e,n)}}var Bc=!1;function M0(t,e){if(ao=ci,t=jd(),cl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,p=t,g=null;t:for(;;){for(var b;p!==r||s!==0&&p.nodeType!==3||(l=o+s),p!==a||n!==0&&p.nodeType!==3||(c=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(b=p.firstChild)!==null;)g=p,p=b;for(;;){if(p===t)break t;if(g===r&&++u===s&&(l=o),g===a&&++h===n&&(c=o),(b=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=b}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(oo={focusedElem:t,selectionRange:r},ci=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,y=v.memoizedState,m=e.stateNode,d=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:lt(e.type,x),y);m.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(w){oe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=Bc,Bc=!1,v}function zn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&No(e,r,a)}s=s.next}while(s!==n)}}function Vi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function _o(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function yh(t){var e=t.alternate;e!==null&&(t.alternate=null,yh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xt],delete e[ss],delete e[uo],delete e[y0],delete e[v0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vh(t){return t.tag===5||t.tag===3||t.tag===4}function Hc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function So(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hi));else if(n!==4&&(t=t.child,t!==null))for(So(t,e,r),t=t.sibling;t!==null;)So(t,e,r),t=t.sibling}function Co(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Co(t,e,r),t=t.sibling;t!==null;)Co(t,e,r),t=t.sibling}var xe=null,ct=!1;function Lt(t,e,r){for(r=r.child;r!==null;)wh(t,e,r),r=r.sibling}function wh(t,e,r){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount($i,r)}catch{}switch(r.tag){case 5:Ne||qr(r,e);case 6:var n=xe,s=ct;xe=null,Lt(t,e,r),xe=n,ct=s,xe!==null&&(ct?(t=xe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):xe.removeChild(r.stateNode));break;case 18:xe!==null&&(ct?(t=xe,r=r.stateNode,t.nodeType===8?ba(t.parentNode,r):t.nodeType===1&&ba(t,r),Xn(t)):ba(xe,r.stateNode));break;case 4:n=xe,s=ct,xe=r.stateNode.containerInfo,ct=!0,Lt(t,e,r),xe=n,ct=s;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&No(r,e,o),s=s.next}while(s!==n)}Lt(t,e,r);break;case 1:if(!Ne&&(qr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){oe(r,e,l)}Lt(t,e,r);break;case 21:Lt(t,e,r);break;case 22:r.mode&1?(Ne=(n=Ne)||r.memoizedState!==null,Lt(t,e,r),Ne=n):Lt(t,e,r);break;default:Lt(t,e,r)}}function Wc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new L0),e.forEach(function(n){var s=V0.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function at(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:xe=l.stateNode,ct=!1;break e;case 3:xe=l.stateNode.containerInfo,ct=!0;break e;case 4:xe=l.stateNode.containerInfo,ct=!0;break e}l=l.return}if(xe===null)throw Error(L(160));wh(a,o,s),xe=null,ct=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){oe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bh(e,t),e=e.sibling}function bh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(at(e,t),pt(t),n&4){try{zn(3,t,t.return),Vi(3,t)}catch(x){oe(t,t.return,x)}try{zn(5,t,t.return)}catch(x){oe(t,t.return,x)}}break;case 1:at(e,t),pt(t),n&512&&r!==null&&qr(r,r.return);break;case 5:if(at(e,t),pt(t),n&512&&r!==null&&qr(r,r.return),t.flags&32){var s=t.stateNode;try{Jn(s,"")}catch(x){oe(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Hu(s,a),Qa(l,o);var u=Qa(l,a);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?Ku(s,p):h==="dangerouslySetInnerHTML"?qu(s,p):h==="children"?Jn(s,p):Qo(s,h,p,u)}switch(l){case"input":Va(s,a);break;case"textarea":Wu(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Kr(s,!!a.multiple,b,!1):g!==!!a.multiple&&(a.defaultValue!=null?Kr(s,!!a.multiple,a.defaultValue,!0):Kr(s,!!a.multiple,a.multiple?[]:"",!1))}s[ss]=a}catch(x){oe(t,t.return,x)}}break;case 6:if(at(e,t),pt(t),n&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(x){oe(t,t.return,x)}}break;case 3:if(at(e,t),pt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xn(e.containerInfo)}catch(x){oe(t,t.return,x)}break;case 4:at(e,t),pt(t);break;case 13:at(e,t),pt(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Tl=le())),n&4&&Wc(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Ne=(u=Ne)||h,at(e,t),Ne=u):at(e,t),pt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(D=t,h=t.child;h!==null;){for(p=D=h;D!==null;){switch(g=D,b=g.child,g.tag){case 0:case 11:case 14:case 15:zn(4,g,g.return);break;case 1:qr(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){oe(n,r,x)}}break;case 5:qr(g,g.return);break;case 22:if(g.memoizedState!==null){qc(p);continue}}b!==null?(b.return=g,D=b):qc(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Gu("display",o))}catch(x){oe(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(x){oe(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:at(e,t),pt(t),n&4&&Wc(t);break;case 21:break;default:at(e,t),pt(t)}}function pt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(vh(r)){var n=r;break e}r=r.return}throw Error(L(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Jn(s,""),n.flags&=-33);var a=Hc(t);Co(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Hc(t);So(t,l,o);break;default:throw Error(L(161))}}catch(c){oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $0(t,e,r){D=t,jh(t)}function jh(t,e,r){for(var n=(t.mode&1)!==0;D!==null;){var s=D,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ms;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ne;l=Ms;var u=Ne;if(Ms=o,(Ne=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?Gc(s):c!==null?(c.return=o,D=c):Gc(s);for(;a!==null;)D=a,jh(a),a=a.sibling;D=s,Ms=l,Ne=u}Vc(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,D=a):Vc(t)}}function Vc(t){for(;D!==null;){var e=D;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ne||Vi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ne)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:lt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Tc(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Tc(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Xn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ne||e.flags&512&&_o(e)}catch(g){oe(e,e.return,g)}}if(e===t){D=null;break}if(r=e.sibling,r!==null){r.return=e.return,D=r;break}D=e.return}}function qc(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var r=e.sibling;if(r!==null){r.return=e.return,D=r;break}D=e.return}}function Gc(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Vi(4,e)}catch(c){oe(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){oe(e,s,c)}}var a=e.return;try{_o(e)}catch(c){oe(e,a,c)}break;case 5:var o=e.return;try{_o(e)}catch(c){oe(e,o,c)}}}catch(c){oe(e,e.return,c)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var U0=Math.ceil,ki=Rt.ReactCurrentDispatcher,Cl=Rt.ReactCurrentOwner,et=Rt.ReactCurrentBatchConfig,G=0,pe=null,ue=null,ye=0,Fe=0,Gr=sr(0),he=0,us=null,kr=0,qi=0,El=0,Fn=null,Oe=null,Tl=0,cn=1/0,jt=null,Ni=!1,Eo=null,Qt=null,$s=!1,Wt=null,_i=0,Bn=0,To=null,ei=-1,ti=0;function Te(){return G&6?le():ei!==-1?ei:ei=le()}function Zt(t){return t.mode&1?G&2&&ye!==0?ye&-ye:b0.transition!==null?(ti===0&&(ti=ad()),ti):(t=Q,t!==0||(t=window.event,t=t===void 0?16:fd(t.type)),t):1}function ft(t,e,r,n){if(50<Bn)throw Bn=0,To=null,Error(L(185));ms(t,r,n),(!(G&2)||t!==pe)&&(t===pe&&(!(G&2)&&(qi|=r),he===4&&Ft(t,ye)),ze(t,n),r===1&&G===0&&!(e.mode&1)&&(cn=le()+500,Bi&&ir()))}function ze(t,e){var r=t.callbackNode;bm(t,e);var n=li(t,t===pe?ye:0);if(n===0)r!==null&&rc(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&rc(r),e===1)t.tag===0?w0(Kc.bind(null,t)):Id(Kc.bind(null,t)),g0(function(){!(G&6)&&ir()}),r=null;else{switch(od(n)){case 1:r=tl;break;case 4:r=sd;break;case 16:r=oi;break;case 536870912:r=id;break;default:r=oi}r=Ah(r,kh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function kh(t,e){if(ei=-1,ti=0,G&6)throw Error(L(327));var r=t.callbackNode;if(Xr()&&t.callbackNode!==r)return null;var n=li(t,t===pe?ye:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Si(t,n);else{e=n;var s=G;G|=2;var a=_h();(pe!==t||ye!==e)&&(jt=null,cn=le()+500,gr(t,e));do try{F0();break}catch(l){Nh(t,l)}while(!0);ml(),ki.current=a,G=s,ue!==null?e=0:(pe=null,ye=0,e=he)}if(e!==0){if(e===2&&(s=to(t),s!==0&&(n=s,e=Ao(t,s))),e===1)throw r=us,gr(t,0),Ft(t,n),ze(t,le()),r;if(e===6)Ft(t,n);else{if(s=t.current.alternate,!(n&30)&&!D0(s)&&(e=Si(t,n),e===2&&(a=to(t),a!==0&&(n=a,e=Ao(t,a))),e===1))throw r=us,gr(t,0),Ft(t,n),ze(t,le()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(L(345));case 2:ur(t,Oe,jt);break;case 3:if(Ft(t,n),(n&130023424)===n&&(e=Tl+500-le(),10<e)){if(li(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Te(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=co(ur.bind(null,t,Oe,jt),e);break}ur(t,Oe,jt);break;case 4:if(Ft(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-ht(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*U0(n/1960))-n,10<n){t.timeoutHandle=co(ur.bind(null,t,Oe,jt),n);break}ur(t,Oe,jt);break;case 5:ur(t,Oe,jt);break;default:throw Error(L(329))}}}return ze(t,le()),t.callbackNode===r?kh.bind(null,t):null}function Ao(t,e){var r=Fn;return t.current.memoizedState.isDehydrated&&(gr(t,e).flags|=256),t=Si(t,e),t!==2&&(e=Oe,Oe=r,e!==null&&Po(e)),t}function Po(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function D0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!mt(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ft(t,e){for(e&=~El,e&=~qi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ht(e),n=1<<r;t[r]=-1,e&=~n}}function Kc(t){if(G&6)throw Error(L(327));Xr();var e=li(t,0);if(!(e&1))return ze(t,le()),null;var r=Si(t,e);if(t.tag!==0&&r===2){var n=to(t);n!==0&&(e=n,r=Ao(t,n))}if(r===1)throw r=us,gr(t,0),Ft(t,e),ze(t,le()),r;if(r===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,Oe,jt),ze(t,le()),null}function Al(t,e){var r=G;G|=1;try{return t(e)}finally{G=r,G===0&&(cn=le()+500,Bi&&ir())}}function Nr(t){Wt!==null&&Wt.tag===0&&!(G&6)&&Xr();var e=G;G|=1;var r=et.transition,n=Q;try{if(et.transition=null,Q=1,t)return t()}finally{Q=n,et.transition=r,G=e,!(G&6)&&ir()}}function Pl(){Fe=Gr.current,te(Gr)}function gr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,p0(r)),ue!==null)for(r=ue.return;r!==null;){var n=r;switch(dl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fi();break;case 3:on(),te(Ue),te(_e),wl();break;case 5:vl(n);break;case 4:on();break;case 13:te(se);break;case 19:te(se);break;case 10:pl(n.type._context);break;case 22:case 23:Pl()}r=r.return}if(pe=t,ue=t=Yt(t.current,null),ye=Fe=e,he=0,us=null,El=qi=kr=0,Oe=Fn=null,mr!==null){for(e=0;e<mr.length;e++)if(r=mr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}mr=null}return t}function Nh(t,e){do{var r=ue;try{if(ml(),Zs.current=ji,bi){for(var n=ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bi=!1}if(jr=0,me=de=ie=null,Dn=!1,os=0,Cl.current=null,r===null||r.return===null){he=1,us=e,ue=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=Lc(o);if(b!==null){b.flags&=-257,Mc(b,o,l,a,e),b.mode&1&&Oc(a,u,e),e=b,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){Oc(a,u,e),Il();break e}c=Error(L(426))}}else if(ne&&l.mode&1){var y=Lc(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Mc(y,o,l,a,e),hl(ln(c,l));break e}}a=c=ln(c,l),he!==4&&(he=2),Fn===null?Fn=[a]:Fn.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=oh(a,c,e);Ec(a,m);break e;case 1:l=c;var d=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof d.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Qt===null||!Qt.has(f)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=lh(a,l,e);Ec(a,w);break e}}a=a.return}while(a!==null)}Ch(r)}catch(C){e=C,ue===r&&r!==null&&(ue=r=r.return);continue}break}while(!0)}function _h(){var t=ki.current;return ki.current=ji,t===null?ji:t}function Il(){(he===0||he===3||he===2)&&(he=4),pe===null||!(kr&268435455)&&!(qi&268435455)||Ft(pe,ye)}function Si(t,e){var r=G;G|=2;var n=_h();(pe!==t||ye!==e)&&(jt=null,gr(t,e));do try{z0();break}catch(s){Nh(t,s)}while(!0);if(ml(),G=r,ki.current=n,ue!==null)throw Error(L(261));return pe=null,ye=0,he}function z0(){for(;ue!==null;)Sh(ue)}function F0(){for(;ue!==null&&!hm();)Sh(ue)}function Sh(t){var e=Th(t.alternate,t,Fe);t.memoizedProps=t.pendingProps,e===null?Ch(t):ue=e,Cl.current=null}function Ch(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=O0(r,e),r!==null){r.flags&=32767,ue=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,ue=null;return}}else if(r=R0(r,e,Fe),r!==null){ue=r;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);he===0&&(he=5)}function ur(t,e,r){var n=Q,s=et.transition;try{et.transition=null,Q=1,B0(t,e,r,n)}finally{et.transition=s,Q=n}return null}function B0(t,e,r,n){do Xr();while(Wt!==null);if(G&6)throw Error(L(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(jm(t,a),t===pe&&(ue=pe=null,ye=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$s||($s=!0,Ah(oi,function(){return Xr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=et.transition,et.transition=null;var o=Q;Q=1;var l=G;G|=4,Cl.current=null,M0(t,r),bh(r,t),l0(oo),ci=!!ao,oo=ao=null,t.current=r,$0(r),fm(),G=l,Q=o,et.transition=a}else t.current=r;if($s&&($s=!1,Wt=t,_i=s),a=t.pendingLanes,a===0&&(Qt=null),gm(r.stateNode),ze(t,le()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ni)throw Ni=!1,t=Eo,Eo=null,t;return _i&1&&t.tag!==0&&Xr(),a=t.pendingLanes,a&1?t===To?Bn++:(Bn=0,To=t):Bn=0,ir(),null}function Xr(){if(Wt!==null){var t=od(_i),e=et.transition,r=Q;try{if(et.transition=null,Q=16>t?16:t,Wt===null)var n=!1;else{if(t=Wt,Wt=null,_i=0,G&6)throw Error(L(331));var s=G;for(G|=4,D=t.current;D!==null;){var a=D,o=a.child;if(D.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:zn(8,h,a)}var p=h.child;if(p!==null)p.return=h,D=p;else for(;D!==null;){h=D;var g=h.sibling,b=h.return;if(yh(h),h===u){D=null;break}if(g!==null){g.return=b,D=g;break}D=b}}}var v=a.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}D=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,D=o;else e:for(;D!==null;){if(a=D,a.flags&2048)switch(a.tag){case 0:case 11:case 15:zn(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,D=m;break e}D=a.return}}var d=t.current;for(D=d;D!==null;){o=D;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,D=f;else e:for(o=d;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vi(9,l)}}catch(C){oe(l,l.return,C)}if(l===o){D=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,D=w;break e}D=l.return}}if(G=s,ir(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot($i,t)}catch{}n=!0}return n}finally{Q=r,et.transition=e}}return!1}function Jc(t,e,r){e=ln(r,e),e=oh(t,e,1),t=Jt(t,e,1),e=Te(),t!==null&&(ms(t,1,e),ze(t,e))}function oe(t,e,r){if(t.tag===3)Jc(t,t,r);else for(;e!==null;){if(e.tag===3){Jc(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qt===null||!Qt.has(n))){t=ln(r,t),t=lh(e,t,1),e=Jt(e,t,1),t=Te(),e!==null&&(ms(e,1,t),ze(e,t));break}}e=e.return}}function H0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Te(),t.pingedLanes|=t.suspendedLanes&r,pe===t&&(ye&r)===r&&(he===4||he===3&&(ye&130023424)===ye&&500>le()-Tl?gr(t,0):El|=r),ze(t,e)}function Eh(t,e){e===0&&(t.mode&1?(e=Cs,Cs<<=1,!(Cs&130023424)&&(Cs=4194304)):e=1);var r=Te();t=Pt(t,e),t!==null&&(ms(t,e,r),ze(t,r))}function W0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Eh(t,r)}function V0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(L(314))}n!==null&&n.delete(e),Eh(t,r)}var Th;Th=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ue.current)$e=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $e=!1,I0(t,e,r);$e=!!(t.flags&131072)}else $e=!1,ne&&e.flags&1048576&&Rd(e,gi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xs(t,e),t=e.pendingProps;var s=nn(e,_e.current);Yr(e,r),s=jl(null,e,n,t,s,r);var a=kl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(n)?(a=!0,mi(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xl(e),s.updater=Wi,e.stateNode=s,s._reactInternals=e,xo(e,n,t,r),e=wo(null,e,n,!0,a,r)):(e.tag=0,ne&&a&&ul(e),Ee(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xs(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=G0(n),t=lt(n,t),s){case 0:e=vo(null,e,n,t,r);break e;case 1:e=Dc(null,e,n,t,r);break e;case 11:e=$c(null,e,n,t,r);break e;case 14:e=Uc(null,e,n,lt(n.type,t),r);break e}throw Error(L(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:lt(n,s),vo(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:lt(n,s),Dc(t,e,n,s,r);case 3:e:{if(hh(e),t===null)throw Error(L(387));n=e.pendingProps,a=e.memoizedState,s=a.element,Dd(t,e),vi(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=ln(Error(L(423)),e),e=zc(t,e,n,r,s);break e}else if(n!==s){s=ln(Error(L(424)),e),e=zc(t,e,n,r,s);break e}else for(He=Kt(e.stateNode.containerInfo.firstChild),We=e,ne=!0,dt=null,r=$d(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(sn(),n===s){e=It(t,e,r);break e}Ee(t,e,n,r)}e=e.child}return e;case 5:return zd(e),t===null&&mo(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,lo(n,s)?o=null:a!==null&&lo(n,a)&&(e.flags|=32),dh(t,e),Ee(t,e,o,r),e.child;case 6:return t===null&&mo(e),null;case 13:return fh(t,e,r);case 4:return yl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=an(e,null,n,r):Ee(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:lt(n,s),$c(t,e,n,s,r);case 7:return Ee(t,e,e.pendingProps,r),e.child;case 8:return Ee(t,e,e.pendingProps.children,r),e.child;case 12:return Ee(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Y(xi,n._currentValue),n._currentValue=o,a!==null)if(mt(a.value,o)){if(a.children===s.children&&!Ue.current){e=It(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Ct(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),po(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(L(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),po(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ee(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Yr(e,r),s=rt(s),n=n(s),e.flags|=1,Ee(t,e,n,r),e.child;case 14:return n=e.type,s=lt(n,e.pendingProps),s=lt(n.type,s),Uc(t,e,n,s,r);case 15:return ch(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:lt(n,s),Xs(t,e),e.tag=1,De(n)?(t=!0,mi(e)):t=!1,Yr(e,r),ah(e,n,s),xo(e,n,s,r),wo(null,e,n,!0,t,r);case 19:return mh(t,e,r);case 22:return uh(t,e,r)}throw Error(L(156,e.tag))};function Ah(t,e){return nd(t,e)}function q0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(t,e,r,n){return new q0(t,e,r,n)}function Rl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G0(t){if(typeof t=="function")return Rl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yo)return 11;if(t===Xo)return 14}return 2}function Yt(t,e){var r=t.alternate;return r===null?(r=Xe(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ri(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")Rl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $r:return xr(r.children,s,a,e);case Zo:o=8,s|=8;break;case za:return t=Xe(12,r,e,s|2),t.elementType=za,t.lanes=a,t;case Fa:return t=Xe(13,r,e,s),t.elementType=Fa,t.lanes=a,t;case Ba:return t=Xe(19,r,e,s),t.elementType=Ba,t.lanes=a,t;case zu:return Gi(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uu:o=10;break e;case Du:o=9;break e;case Yo:o=11;break e;case Xo:o=14;break e;case $t:o=16,n=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Xe(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function xr(t,e,r,n){return t=Xe(7,t,n,e),t.lanes=r,t}function Gi(t,e,r,n){return t=Xe(22,t,n,e),t.elementType=zu,t.lanes=r,t.stateNode={isHidden:!1},t}function Ta(t,e,r){return t=Xe(6,t,null,e),t.lanes=r,t}function Aa(t,e,r){return e=Xe(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K0(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ol(t,e,r,n,s,a,o,l,c){return t=new K0(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Xe(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xl(a),t}function J0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Ph(t){if(!t)return tr;t=t._reactInternals;e:{if(Cr(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var r=t.type;if(De(r))return Pd(t,r,e)}return e}function Ih(t,e,r,n,s,a,o,l,c){return t=Ol(r,n,!0,t,s,a,o,l,c),t.context=Ph(null),r=t.current,n=Te(),s=Zt(r),a=Ct(n,s),a.callback=e??null,Jt(r,a,s),t.current.lanes=s,ms(t,s,n),ze(t,n),t}function Ki(t,e,r,n){var s=e.current,a=Te(),o=Zt(s);return r=Ph(r),e.context===null?e.context=r:e.pendingContext=r,e=Ct(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Jt(s,e,o),t!==null&&(ft(t,s,o,a),Qs(t,s,o)),o}function Ci(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ll(t,e){Qc(t,e),(t=t.alternate)&&Qc(t,e)}function Q0(){return null}var Rh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ml(t){this._internalRoot=t}Ji.prototype.render=Ml.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Ki(t,e,null,null)};Ji.prototype.unmount=Ml.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nr(function(){Ki(null,t,null,null)}),e[At]=null}};function Ji(t){this._internalRoot=t}Ji.prototype.unstable_scheduleHydration=function(t){if(t){var e=ud();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zt.length&&e!==0&&e<zt[r].priority;r++);zt.splice(r,0,t),r===0&&hd(t)}};function $l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zc(){}function Z0(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Ci(o);a.call(u)}}var o=Ih(e,n,t,0,null,!1,!1,"",Zc);return t._reactRootContainer=o,t[At]=o.current,rs(t.nodeType===8?t.parentNode:t),Nr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ci(c);l.call(u)}}var c=Ol(t,0,!1,null,null,!1,!1,"",Zc);return t._reactRootContainer=c,t[At]=c.current,rs(t.nodeType===8?t.parentNode:t),Nr(function(){Ki(e,c,r,n)}),c}function Zi(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Ci(o);l.call(c)}}Ki(e,o,t,s)}else o=Z0(r,e,t,s,n);return Ci(o)}ld=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Pn(e.pendingLanes);r!==0&&(rl(e,r|1),ze(e,le()),!(G&6)&&(cn=le()+500,ir()))}break;case 13:Nr(function(){var n=Pt(t,1);if(n!==null){var s=Te();ft(n,t,1,s)}}),Ll(t,1)}};nl=function(t){if(t.tag===13){var e=Pt(t,134217728);if(e!==null){var r=Te();ft(e,t,134217728,r)}Ll(t,134217728)}};cd=function(t){if(t.tag===13){var e=Zt(t),r=Pt(t,e);if(r!==null){var n=Te();ft(r,t,e,n)}Ll(t,e)}};ud=function(){return Q};dd=function(t,e){var r=Q;try{return Q=t,e()}finally{Q=r}};Ya=function(t,e,r){switch(e){case"input":if(Va(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Fi(n);if(!s)throw Error(L(90));Bu(n),Va(n,s)}}}break;case"textarea":Wu(t,r);break;case"select":e=r.value,e!=null&&Kr(t,!!r.multiple,e,!1)}};Zu=Al;Yu=Nr;var Y0={usingClientEntryPoint:!1,Events:[gs,Fr,Fi,Ju,Qu,Al]},Cn={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X0={bundleType:Cn.bundleType,version:Cn.version,rendererPackageName:Cn.rendererPackageName,rendererConfig:Cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=td(t),t===null?null:t.stateNode},findFiberByHostInstance:Cn.findFiberByHostInstance||Q0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Us.isDisabled&&Us.supportsFiber)try{$i=Us.inject(X0),yt=Us}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y0;qe.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$l(e))throw Error(L(200));return J0(t,e,null,r)};qe.createRoot=function(t,e){if(!$l(t))throw Error(L(299));var r=!1,n="",s=Rh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ol(t,1,!1,null,null,r,!1,n,s),t[At]=e.current,rs(t.nodeType===8?t.parentNode:t),new Ml(e)};qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=td(e),t=t===null?null:t.stateNode,t};qe.flushSync=function(t){return Nr(t)};qe.hydrate=function(t,e,r){if(!Qi(e))throw Error(L(200));return Zi(null,t,e,!0,r)};qe.hydrateRoot=function(t,e,r){if(!$l(t))throw Error(L(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=Rh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Ih(e,null,t,1,r??null,s,!1,a,o),t[At]=e.current,rs(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ji(e)};qe.render=function(t,e,r){if(!Qi(e))throw Error(L(200));return Zi(null,t,e,!1,r)};qe.unmountComponentAtNode=function(t){if(!Qi(t))throw Error(L(40));return t._reactRootContainer?(Nr(function(){Zi(null,null,t,!1,function(){t._reactRootContainer=null,t[At]=null})}),!0):!1};qe.unstable_batchedUpdates=Al;qe.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Qi(r))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Zi(t,e,r,!1,n)};qe.version="18.3.1-next-f1338f8080-20240426";function Oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oh)}catch(t){console.error(t)}}Oh(),Ou.exports=qe;var Lh=Ou.exports;const ep=ju(Lh);var Mh,Yc=Lh;Mh=Yc.createRoot,Yc.hydrateRoot;const tp="modulepreload",rp=function(t){return"/tickets/"+t},Xc={},ys=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=rp(c),c in Xc)return;Xc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":tp,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,b)=>{p.addEventListener("load",g),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},np=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ys(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Ul extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class sp extends Ul{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ip extends Ul{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ap extends Ul{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Io;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Io||(Io={}));var op=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class lp{constructor(e,{headers:r={},customFetch:n,region:s=Io.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=np(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return op(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new sp(v)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new ip(h);if(!h.ok)throw new ap(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield h.json():g==="application/octet-stream"?b=yield h.blob():g==="text/event-stream"?b=h:g==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var Le={},Dl={},Yi={},vs={},Xi={},ea={},cp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},un=cp();const up=un.fetch,$h=un.fetch.bind(un),Uh=un.Headers,dp=un.Request,hp=un.Response,gn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uh,Request:dp,Response:hp,default:$h,fetch:up},Symbol.toStringTag,{value:"Module"})),fp=Ef(gn);var ta={};Object.defineProperty(ta,"__esModule",{value:!0});let mp=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ta.default=mp;var Dh=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ea,"__esModule",{value:!0});const pp=Dh(fp),gp=Dh(ta);let xp=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,h=null,p=null,g=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=m:h=JSON.parse(m))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(p=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,g=406,b="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await a.text();try{u=JSON.parse(x),Array.isArray(u)&&a.status===404&&(h=[],u=null,g=200,b="OK")}catch{a.status===404&&x===""?(g=204,b="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,b="OK"),u&&this.shouldThrowOnError)throw new gp.default(u)}return{error:u,data:h,count:p,status:g,statusText:b}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};ea.default=xp;var yp=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xi,"__esModule",{value:!0});const vp=yp(ea);let wp=class extends vp.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xi.default=wp;var bp=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vs,"__esModule",{value:!0});const jp=bp(Xi);let kp=class extends jp.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};vs.default=kp;var Np=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yi,"__esModule",{value:!0});const En=Np(vs);let _p=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new En.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new En.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new En.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new En.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new En.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yi.default=_p;var ra={},na={};Object.defineProperty(na,"__esModule",{value:!0});na.version=void 0;na.version="0.0.0-automated";Object.defineProperty(ra,"__esModule",{value:!0});ra.DEFAULT_HEADERS=void 0;const Sp=na;ra.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Sp.version}`};var zh=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dl,"__esModule",{value:!0});const Cp=zh(Yi),Ep=zh(vs),Tp=ra;let Ap=class Fh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Tp.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Cp.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{l.searchParams.append(h,p)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Ep.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Dl.default=Ap;var xn=tt&&tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Le,"__esModule",{value:!0});Le.PostgrestError=Le.PostgrestBuilder=Le.PostgrestTransformBuilder=Le.PostgrestFilterBuilder=Le.PostgrestQueryBuilder=Le.PostgrestClient=void 0;const Bh=xn(Dl);Le.PostgrestClient=Bh.default;const Hh=xn(Yi);Le.PostgrestQueryBuilder=Hh.default;const Wh=xn(vs);Le.PostgrestFilterBuilder=Wh.default;const Vh=xn(Xi);Le.PostgrestTransformBuilder=Vh.default;const qh=xn(ea);Le.PostgrestBuilder=qh.default;const Gh=xn(ta);Le.PostgrestError=Gh.default;var Pp=Le.default={PostgrestClient:Bh.default,PostgrestQueryBuilder:Hh.default,PostgrestFilterBuilder:Wh.default,PostgrestTransformBuilder:Vh.default,PostgrestBuilder:qh.default,PostgrestError:Gh.default};const{PostgrestClient:Ip,PostgrestQueryBuilder:ky,PostgrestFilterBuilder:Ny,PostgrestTransformBuilder:_y,PostgrestBuilder:Sy,PostgrestError:Cy}=Pp;function Rp(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Op=Rp(),Lp="2.11.15",Mp=`realtime-js/${Lp}`,$p="1.0.0",Kh=1e4,Up=1e3;var Hn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Hn||(Hn={}));var ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ke||(ke={}));var ut;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ut||(ut={}));var Ro;(function(t){t.websocket="websocket"})(Ro||(Ro={}));var hr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hr||(hr={}));class Dp{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Jh{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const eu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=zp(o,t,e,s),a),{})},zp=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?Qh(a,o):Oo(o)},Qh=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Wp(e,r)}switch(t){case Z.bool:return Fp(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return Bp(e);case Z.json:case Z.jsonb:return Hp(e);case Z.timestamp:return Vp(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return Oo(e);default:return Oo(e)}},Oo=t=>t,Fp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Bp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Wp=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Qh(e,l))}return t},Vp=t=>typeof t=="string"?t.replace(" ","T"):t,Zh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Pa{constructor(e,r,n={},s=Kh){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tu||(tu={}));class Wn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wn.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Wn.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wn.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(a,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const p=a[u];if(p){const g=h.map(y=>y.presence_ref),b=p.map(y=>y.presence_ref),v=h.filter(y=>b.indexOf(y.presence_ref)<0),x=p.filter(y=>g.indexOf(y.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),h.length>0){const p=e[l].map(b=>b.presence_ref),g=h.filter(b=>p.indexOf(b.presence_ref)<0);e[l].unshift(...g)}n(l,h,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const h=c.map(p=>p.presence_ref);u=u.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ru;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ru||(ru={}));var nu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nu||(nu={}));var kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(kt||(kt={}));class zl{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Pa(this,ut.join,this.params,this.timeout),this.rejoinTimer=new Jh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Wn(this),this.broadcastEndpointURL=Zh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(h=>e==null?void 0:e(kt.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(kt.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e==null||e(kt.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,v=[];for(let x=0;x<b;x++){const y=g[x],{filter:{event:m,schema:d,table:f,filter:w}}=y,C=h&&h[x];if(C&&C.event===m&&C.schema===d&&C.table===f&&C.filter===w)v.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=ke.errored,e==null||e(kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(kt.SUBSCRIBED);return}}).receive("error",h=>{this.state=ke.errored,e==null||e(kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Pa(this,ut.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Pa(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=ut;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var v,x,y;return((v=b.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(x=b.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(b=>b.callback(g,n)):(a=this.bindings[o])===null||a===void 0||a.filter(b=>{var v,x,y,m,d,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const w=b.id,C=(v=b.filter)===null||v===void 0?void 0:v.event;return w&&((x=r.ids)===null||x===void 0?void 0:x.includes(w))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(d=(m=b==null?void 0:b.filter)===null||m===void 0?void 0:m.event)===null||d===void 0?void 0:d.toLocaleLowerCase();return w==="*"||w===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:x,table:y,commit_timestamp:m,type:d,errors:f}=v;g=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:m,eventType:d,new:{},old:{},errors:f}),this._getPayloadRecords(v))}b.callback(g,n)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&zl.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ut.close,{},e)}_onError(e){this._on(ut.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=eu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=eu(e.columns,e.old_record)),r}}const su=()=>{},qp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gp{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=su,this.ref=0,this.logger=su,this.conn=null,this.sendBuffer=[],this.serializer=new Dp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>ys(async()=>{const{default:c}=await Promise.resolve().then(()=>gn);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Ro.websocket}`,this.httpEndpoint=Zh(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Op),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$p}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hn.connecting:return hr.Connecting;case Hn.open:return hr.Open;case Hn.closing:return hr.Closing;default:return hr.Closed}}isConnected(){return this.connectionState()===hr.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new zl(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Mp};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ut.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Up,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ut.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([qp],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Fl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Kp extends Fl{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lo extends Fl{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Jp=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Yh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ys(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Qp=()=>Jp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ys(()=>Promise.resolve().then(()=>gn),void 0)).Response:Response}),Mo=t=>{if(Array.isArray(t))return t.map(r=>Mo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Mo(n)}),e};var Er=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Ia=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zp=(t,e,r)=>Er(void 0,void 0,void 0,function*(){const n=yield Qp();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new Kp(Ia(s),t.status||500))}).catch(s=>{e(new Lo(Ia(s),s))}):e(new Lo(Ia(t),t))}),Yp=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ws(t,e,r,n,s,a){return Er(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Yp(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Zp(c,l,n))})})}function Ei(t,e,r,n){return Er(this,void 0,void 0,function*(){return ws(t,"GET",e,r,n)})}function Dt(t,e,r,n,s){return Er(this,void 0,void 0,function*(){return ws(t,"POST",e,n,s,r)})}function Xp(t,e,r,n,s){return Er(this,void 0,void 0,function*(){return ws(t,"PUT",e,n,s,r)})}function eg(t,e,r,n){return Er(this,void 0,void 0,function*(){return ws(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xh(t,e,r,n,s){return Er(this,void 0,void 0,function*(){return ws(t,"DELETE",e,n,s,r)})}var Re=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const tg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rg{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Yh(s)}uploadOrUpdate(e,r,n,s){return Re(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},iu),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield p.json();return p.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(a){if(fe(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Re(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:iu.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const p=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:h}),g=yield p.json();return p.ok?{data:{path:a,fullPath:g.Key},error:null}:{data:null,error:g}}catch(c){if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Re(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Fl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}update(e,r,n){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Re(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Dt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Re(this,void 0,void 0,function*(){try{const s=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}download(e,r){return Re(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ei(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}info(e){return Re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ei(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Mo(n),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}exists(e){return Re(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield eg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(fe(n)&&n instanceof Lo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}list(e,r,n){return Re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},tg),r),{prefix:e||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ng="2.7.1",sg={"X-Client-Info":`storage-js/${ng}`};var Pr=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class ig{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},sg),r),this.fetch=Yh(n)}listBuckets(){return Pr(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}getBucket(e){return Pr(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Pr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Pr(this,void 0,void 0,function*(){try{return{data:yield Xp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Pr(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Pr(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}}class ag extends ig{constructor(e,r={},n){super(e,r,n)}from(e){return new rg(this.url,this.headers,e,this.fetch)}}const og="2.50.2";let Rn="";typeof Deno<"u"?Rn="deno":typeof document<"u"?Rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rn="react-native":Rn="node";const lg={"X-Client-Info":`supabase-js-${Rn}/${og}`},cg={headers:lg},ug={schema:"public"},dg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hg={};var fg=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const mg=t=>{let e;return t?e=t:typeof fetch>"u"?e=$h:e=fetch,(...r)=>e(...r)},pg=()=>typeof Headers>"u"?Uh:Headers,gg=(t,e,r)=>{const n=mg(r),s=pg();return(a,o)=>fg(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var xg=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function yg(t){return t.endsWith("/")?t:t+"/"}function vg(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:h,global:p}=e,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>xg(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const ef="2.70.0",Lr=30*1e3,$o=3,Ra=$o*Lr,wg="http://localhost:9999",bg="supabase.auth.token",jg={"X-Client-Info":`gotrue-js/${ef}`},Uo="X-Supabase-Api-Version",tf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ng=6e5;class Bl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _g extends Bl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Sg(t){return H(t)&&t.name==="AuthApiError"}class rf extends Bl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ar extends Bl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Mt extends ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cg(t){return H(t)&&t.name==="AuthSessionMissingError"}class Ds extends ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zs extends ar{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fs extends ar{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Eg(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class au extends ar{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Do extends ar{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Oa(t){return H(t)&&t.name==="AuthRetryableFetchError"}class ou extends ar{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Vn extends ar{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lu=` 	
\r=`.split(""),Tg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lu.length;e+=1)t[lu[e].charCodeAt(0)]=-2;for(let e=0;e<Ti.length;e+=1)t[Ti[e].charCodeAt(0)]=e;return t})();function cu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ti[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ti[n]),e.queuedBits-=6}}function nf(t,e,r){const n=Tg[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uu(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{Ig(o,n,r)};for(let o=0;o<t.length;o+=1)nf(t.charCodeAt(o),s,a);return e.join("")}function Ag(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pg(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Ag(n,e)}}function Ig(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Rg(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)nf(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Og(t){const e=[];return Pg(t,r=>e.push(r)),new Uint8Array(e)}function Lg(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>cu(s,r,n)),cu(null,r,n),e.join("")}function Mg(t){return Math.round(Date.now()/1e3)+t}function $g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ot=()=>typeof window<"u"&&typeof document<"u",lr={tested:!1,writable:!1},qn=()=>{if(!ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lr.tested)return lr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),lr.tested=!0,lr.writable=!0}catch{lr.tested=!0,lr.writable=!1}return lr.writable};function Ug(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const sf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ys(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Dg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",af=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Bs=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hs=async(t,e)=>{await t.removeItem(e)};class sa{constructor(){this.promise=new sa.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}sa.promiseConstructor=Promise;function La(t){const e=t.split(".");if(e.length!==3)throw new Vn("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!kg.test(e[n]))throw new Vn("JWT not in base64url format");return{header:JSON.parse(uu(e[0])),payload:JSON.parse(uu(e[1])),signature:Rg(e[2]),raw:{header:e[0],payload:e[1]}}}async function zg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Fg(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function Bg(t){return("0"+t.toString(16)).substr(-2)}function Hg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Bg).join("")}async function Wg(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Vg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Wg(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ir(t,e,r=!1){const n=Hg();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await af(t,`${e}-code-verifier`,s);const a=await Vg(n);return[a,n===a?"plain":"s256"]}const qg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gg(t){const e=t.headers.get(Uo);if(!e||!e.match(qg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Kg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Jg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rr(t){if(!Qg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Zg=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yg=[502,503,504];async function du(t){var e;if(!Dg(t))throw new Do(dr(t),0);if(Yg.includes(t.status))throw new Do(dr(t),t.status);let r;try{r=await t.json()}catch(a){throw new rf(dr(a),a)}let n;const s=Gg(t);if(s&&s.getTime()>=tf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ou(dr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Mt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new ou(dr(r),t.status,r.weak_password.reasons);throw new _g(dr(r),t.status||500,n)}const Xg=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function W(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Uo]||(a[Uo]=tf["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ex(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ex(t,e,r,n,s,a){const o=Xg(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Do(dr(c),0)}if(l.ok||await du(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await du(c)}}function bt(t){var e;let r=null;sx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Mg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function hu(t){const e=bt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Bt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function tx(t){return{data:t,error:null}}function rx(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=Zg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function nx(t){return t}function sx(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ma=["global","local","others"];var ix=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class ax{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=sf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Ma[0]){if(Ma.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ma.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ix(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:rx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:nx});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(H(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Rr(e);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Rr(e);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Bt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Rr(e);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Rr(e.userId);try{const{data:r,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Rr(e.userId),Rr(e.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}const ox={getItem:t=>qn()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{qn()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{qn()&&globalThis.localStorage.removeItem(t)}};function fu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function lx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Or={debug:!!(globalThis&&qn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class of extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cx extends of{}async function ux(t,e,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Or.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}lx();const dx={url:wg,storageKey:bg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mu(t,e,r){return await r()}class ds{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ds.nextInstanceID,ds.nextInstanceID+=1,this.instanceID>0&&ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},dx),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ax({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sf(s.fetch),this.lock=s.lock||mu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ot()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ux:this.lock=mu,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:qn()?this.storage=ox:(this.memoryStorage={},this.storage=fu(this.memoryStorage)):(this.memoryStorage={},this.storage=fu(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ef}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Ug(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ot()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Eg(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new rf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:bt}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:h,password:p,options:g}=e;let b=null,v=null;this.flowType==="pkce"&&([b,v]=await Ir(this.storage,this.storageKey)),a=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:b,code_challenge_method:v},xform:bt})}else if("phone"in e){const{phone:h,password:p,options:g}=e;a=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:bt})}else throw new zs("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hu})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hu})}else throw new zs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ds}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,a,o,l,c,u,h,p,g,b;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:y,wallet:m,statement:d,options:f}=e;let w;if(ot())if(typeof m=="object")w=m;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const C=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),d?{statement:d}:null));let k;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")k=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)k=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...d?["",d,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((p=(h=f==null?void 0:f.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...f.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=E}}try{const{data:y,error:m}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Lg(x)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:bt});if(m)throw m;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ds}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:m})}catch(y){if(H(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await Bs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:bt});if(await Hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ds}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(H(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ds}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Ir(this.storage,this.storageKey));const{error:p}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new zs("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:bt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Ir(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:tx})}catch(a){if(H(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Mt;const{error:s}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await W(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await W(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new zs("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Bs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ra:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bt}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mt}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Bt})})}catch(r){if(H(r))return Cg(r)&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Mt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ir(this.storage,this.storageKey));const{data:u,error:h}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Bt});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mt;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=La(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Mt;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ot())throw new Fs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new au("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new au("No code detected.");const{data:d,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:d.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Fs("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let g=h+p;c&&(g=parseInt(c));const b=g-h;b*1e3<=Lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const v=g-p;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,h);const{data:x,error:y}=await this._getUser(a);if(y)throw y;const m={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:g,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Bs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Sg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=$g(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ir(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(H(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,h;const{data:p,error:g}=a;if(g)throw g;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",b,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return ot()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(H(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Fg(async s=>(s>0&&await zg(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bt})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Oa(a)&&Date.now()+o-n<Lr})}catch(n){if(this._debug(r,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ot()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Bs(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ra;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Ra}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Oa(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Mt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sa;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Mt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),H(a)){const o={session:null,error:a};return Oa(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await af(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ot()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Lr}ms, refresh threshold is ${$o} ticks`),s<=$o&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof of)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Ir(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=La(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Ng>Date.now()))return n;const{data:s,error:a}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Vn("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new Vn("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:b,error:v}=await this.getSession();if(v||!b.session)return{data:null,error:v};n=b.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=La(n);if(Kg(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:s,signature:o},error:null}}const u=Jg(s.alg),h=await this.fetchJwk(s.kid,r),p=await crypto.subtle.importKey("jwk",h,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,o,Og(`${l}.${c}`)))throw new Vn("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}ds.nextInstanceID=0;const hx=ds;class fx extends hx{constructor(e){super(e)}}var mx=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(p){o(p)}}function c(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class px{constructor(e,r,n){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=yg(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:ug,realtime:hg,auth:Object.assign(Object.assign({},dg),{storageKey:u}),global:cg},p=vg(n??{},h);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=gg(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Ip(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new lp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ag(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return mx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fx({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Gp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gx=(t,e,r)=>new px(t,e,r),lf="https://wfykgzmaijulvvdwexcm.supabase.co",cf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndmeWtnem1haWp1bHZ2ZHdleGNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMzgxOTgsImV4cCI6MjA2NjcxNDE5OH0.xajVg18SWFeI3I1RIqS4keY64fz6w4ap566fPCaAE68";console.log("🔧 Configurando Supabase:",{url:lf,hasKey:!!cf});const B=gx(lf,cf,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},realtime:{params:{eventsPerSecond:10}}}),xx=()=>{console.log("🔄 Inicializando suscripciones en tiempo real..."),B.channel("chat-messages-changes").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},t=>{console.log("🔄 Cambio en tiempo real (chat_messages):",t);const e=new CustomEvent("realtimeMessage",{detail:t});window.dispatchEvent(e);const r=new CustomEvent("messageReceived");window.dispatchEvent(r)}).subscribe(t=>{console.log("🔄 Estado de suscripción (chat_messages):",t)}),B.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},t=>{console.log("🔄 Cambio en tiempo real (notifications):",t);const e=new CustomEvent("realtimeNotification",{detail:t});window.dispatchEvent(e);const r=new CustomEvent("notificationReceived");window.dispatchEvent(r)}).subscribe(t=>{console.log("🔄 Estado de suscripción (notifications):",t.state)}),B.channel("tickets-changes").on("postgres_changes",{event:"*",schema:"public",table:"tickets"},t=>{console.log("🔄 Cambio en tiempo real (tickets):",t);const e=new CustomEvent("realtimeTicket",{detail:t});window.dispatchEvent(e);const r=new CustomEvent("ticketUpdated");if(window.dispatchEvent(r),t.eventType==="INSERT"){console.log("🔔 Nuevo ticket creado en tiempo real, disparando evento personalizado");const n=new CustomEvent("ticketCreated",{detail:{ticket:{id:t.new.id,title:t.new.title,createdByName:"Usuario",createdBy:t.new.created_by}}});window.dispatchEvent(n)}}).subscribe(t=>{console.log("🔄 Estado de suscripción (tickets):",t.state)}),B.channel("unread-counts-changes").on("postgres_changes",{event:"*",schema:"public",table:"chat_room_unread"},t=>{console.log("🔄 Cambio en tiempo real (chat_room_unread):",t);const e=new CustomEvent("unreadCountsUpdated",{detail:t});window.dispatchEvent(e)}).subscribe(t=>{console.log("🔄 Estado de suscripción (unread-counts):",t)}),console.log("✅ Suscripciones en tiempo real inicializadas correctamente")},yx=async()=>{try{console.log("🔍 Probando conexión a Supabase...");const{data:t,error:e}=await B.from("users").select("count").limit(1);return e?(console.error("❌ Error de conexión a Supabase:",e),!1):(console.log("✅ Conexión a Supabase exitosa"),!0)}catch(t){return console.error("❌ Error inesperado conectando a Supabase:",t),!1}},$a={async signIn(t,e){try{console.log("🔐 Autenticando con Supabase:",t);const{data:r,error:n}=await B.from("users").select("*").eq("email",t.toLowerCase().trim()).single();if(n||!r)return console.error("❌ Usuario no encontrado:",n),{user:null,error:"Usuario no encontrado"};if(n||!r)return console.error("❌ Usuario no encontrado:",n),{user:null,error:"Usuario no encontrado"};if(r.password_hash!==e)return console.error("❌ Contraseña incorrecta"),{user:null,error:"Contraseña incorrecta"};await B.from("users").update({is_online:!0,last_seen:new Date().toISOString()}).eq("id",r.id);const s={id:r.id,email:r.email,name:r.name,role:r.role,phone:r.phone,department:r.department,isOnline:!0,lastSeen:new Date};return console.log("✅ Autenticación exitosa:",s.name),{user:s,error:null}}catch(r){return console.error("❌ Error en autenticación:",r),{user:null,error:"Error inesperado al iniciar sesión"}}},async signOut(t){try{console.log("🔐 Cerrando sesión..."),await B.from("users").update({is_online:!1,last_seen:new Date().toISOString()}).eq("id",t),console.log("✅ Sesión cerrada")}catch(e){console.error("❌ Error cerrando sesión:",e)}},async getCurrentUser(){try{console.log("🔍 getCurrentUser - Verificando localStorage...");const t=localStorage.getItem("currentUser");if(!t)return console.log("ℹ️ getCurrentUser - No hay datos en localStorage"),null;const e=JSON.parse(t);console.log("📊 getCurrentUser - Datos encontrados:",e);const{data:r,error:n}=await B.from("users").select("*").eq("id",e.id).single();if(n||!r)return console.log("❌ Usuario no encontrado en Supabase, limpiando localStorage"),localStorage.removeItem("currentUser"),null;const s={id:r.id,email:r.email,name:r.name,role:r.role,phone:r.phone,department:r.department,isOnline:r.is_online,lastSeen:new Date(r.last_seen)};return console.log("✅ getCurrentUser - Usuario válido encontrado:",s.name),s}catch(t){return console.error("❌ Error obteniendo usuario actual:",t),localStorage.removeItem("currentUser"),null}},async createUser(t){try{console.log("🔐 Creando usuario en Supabase...");const{data:e,error:r}=await B.from("users").insert({email:t.email,name:t.name,role:t.role,phone:t.phone,department:t.department,password_hash:t.password,is_online:!0,last_seen:new Date().toISOString()}).select().single();if(r)return console.error("❌ Error creando usuario:",r),{user:null,error:r.message};const n={id:e.id,email:e.email,name:e.name,role:e.role,phone:e.phone,department:e.department,isOnline:e.is_online,lastSeen:new Date(e.last_seen)};return console.log("✅ Usuario creado en Supabase:",n.name),{user:n,error:null}}catch(e){return console.error("❌ Error creando usuario:",e),{user:null,error:e.message}}},async changePassword(t,e){try{const{error:r}=await B.from("users").update({password_hash:e}).eq("id",t);return r?{success:!1,error:r.message}:{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}},uf=_.createContext(void 0);function vx({children:t}){const[e,r]=_.useState(null),[n,s]=_.useState(!0);_.useEffect(()=>{(async()=>{try{console.log("🔍 AuthContext - Verificando usuario almacenado...");const c=await $a.getCurrentUser();c?(console.log("✅ AuthContext - Usuario encontrado en localStorage:",c),r({id:c.id,name:c.name,email:c.email,role:c.role,phone:c.phone,department:c.department,isOnline:c.isOnline,lastSeen:c.lastSeen})):console.log("ℹ️ AuthContext - No hay usuario almacenado en localStorage")}catch(c){console.error("❌ AuthContext - Error verificando usuario:",c),localStorage.removeItem("currentUser")}finally{s(!1)}})()},[]);const a=async(l,c)=>{s(!0);try{console.log("🔐 Intentando iniciar sesión con datos demo...");const{user:u,error:h}=await $a.signIn(l,c);if(h)return console.error("❌ Error de login:",h),!1;if(u){const p={id:u.id,name:u.name,email:u.email,role:u.role,phone:u.phone,department:u.department,isOnline:u.isOnline,lastSeen:u.lastSeen};return r(p),localStorage.setItem("currentUser",JSON.stringify(p)),console.log("✅ Login exitoso, usuario guardado en localStorage:",u.name),!0}return!1}catch(u){return console.error("❌ Error inesperado en login:",u),!1}finally{s(!1)}},o=async()=>{console.log("🔐 Logout - Cerrando sesión..."),e&&await $a.signOut(e.id),r(null),localStorage.removeItem("currentUser"),setTimeout(()=>{const l=new CustomEvent("userLoggedOut");window.dispatchEvent(l)},100),setTimeout(()=>{const l=new CustomEvent("userLoggedOut");window.dispatchEvent(l)},500),setTimeout(()=>{document.querySelectorAll('input[type="email"], input[type="password"]').forEach(c=>{c&&(c.value="",c.defaultValue="",c.setAttribute("autocomplete","off"))})},200),console.log("✅ Logout - Sesión cerrada y localStorage limpiado")};return i.jsx(uf.Provider,{value:{currentUser:e,login:a,logout:o,loading:n},children:t})}function ce(){const t=_.useContext(uf);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const K={async testConnection(){try{const{data:t,error:e}=await B.from("users").select("count").limit(1);return!e}catch(t){return console.error("❌ Error de conexión:",t),!1}},async getUsers(){try{console.log("👥 Obteniendo usuarios de Supabase...");const{data:t,error:e}=await B.from("users").select("*").order("created_at",{ascending:!1});if(e)throw console.error("❌ Error obteniendo usuarios:",e),e;const r=t.map(n=>({id:n.id,name:n.name,email:n.email,role:n.role,phone:n.phone,department:n.department,isOnline:n.is_online||!1,lastSeen:new Date(n.last_seen)}));return console.log("✅ Usuarios obtenidos:",r.length),r}catch(t){throw console.error("❌ Error en getUsers:",t),t}},async createUser(t){try{console.log("👤 Creando usuario en Supabase...");const{data:e,error:r}=await B.from("users").insert({name:t.name,email:t.email,role:t.role,phone:t.phone,department:t.department,password_hash:t.password||"temp_hash",is_online:!0,last_seen:new Date().toISOString()}).select().single();if(r)throw console.error("❌ Error creando usuario:",r),r;const n={id:e.id,name:e.name,email:e.email,role:e.role,phone:e.phone,department:e.department,isOnline:e.is_online,lastSeen:new Date(e.last_seen)};return console.log("✅ Usuario creado:",n.name),n}catch(e){throw console.error("❌ Error en createUser:",e),e}},async updateUser(t,e){try{console.log("👤 Actualizando usuario en Supabase...");const r={};e.name&&(r.name=e.name),e.email&&(r.email=e.email),e.role&&(r.role=e.role),e.phone!==void 0&&(r.phone=e.phone),e.department!==void 0&&(r.department=e.department),e.isOnline!==void 0&&(r.is_online=e.isOnline),e.lastSeen&&(r.last_seen=e.lastSeen.toISOString());const{error:n}=await B.from("users").update(r).eq("id",t);if(n)throw console.error("❌ Error actualizando usuario:",n),n;return console.log("✅ Usuario actualizado"),!0}catch(r){throw console.error("❌ Error en updateUser:",r),r}},async deleteUser(t){try{console.log("👤 Eliminando usuario de Supabase...");const{error:e}=await B.from("users").delete().eq("id",t);if(e)throw console.error("❌ Error eliminando usuario:",e),e;return console.log("✅ Usuario eliminado"),!0}catch(e){throw console.error("❌ Error en deleteUser:",e),e}},async getTickets(){try{console.log("🎫 Obteniendo tickets de Supabase...");const{data:t,error:e}=await B.from("tickets").select("*").order("created_at",{ascending:!1});if(e)throw console.error("❌ Error obteniendo tickets:",e),e;const r=t.map(n=>({id:n.id,title:n.title,description:n.description,status:n.status,priority:n.priority,category:n.category,createdBy:n.created_by,assignedTo:n.assigned_to,createdAt:new Date(n.created_at),updatedAt:new Date(n.updated_at),tags:n.tags||[],attachments:n.attachments||[]}));return console.log("✅ Tickets obtenidos:",r.length),r}catch(t){throw console.error("❌ Error en getTickets:",t),t}},async createTicket(t){try{console.log("🎫 Creando ticket en Supabase..."),console.log("Datos del ticket:",t);const e={title:t.title,description:t.description,status:t.status,priority:t.priority,category:t.category,created_by:t.createdBy,assigned_to:t.assignedTo,tags:t.tags};e.attachments=t.attachments||[];const{data:r,error:n}=await B.from("tickets").insert(e).select().single();if(n)throw console.error("❌ Error creando ticket:",n),console.error("Detalles del error:",n.message,n.details),n;const s={id:r.id,title:r.title,description:r.description,status:r.status,priority:r.priority,category:r.category,createdBy:r.created_by,assignedTo:r.assigned_to,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at),tags:r.tags||[],attachments:r.attachments||[]};return console.log("✅ Ticket creado:",s.title),s}catch(e){throw console.error("❌ Error en createTicket:",e),e}},async updateTicket(t,e){try{console.log("🎫 Actualizando ticket en Supabase...");const r={};if(e.title&&(r.title=e.title),e.description&&(r.description=e.description),e.status&&(r.status=e.status),e.priority&&(r.priority=e.priority),e.category&&(r.category=e.category),e.assignedTo!==void 0&&(r.assigned_to=e.assignedTo),e.tags&&(r.tags=e.tags),e.attachments)try{const{data:s,error:a}=await B.from("tickets").select("attachments").limit(1);a||(r.attachments=e.attachments)}catch{console.log("⚠️ Columna attachments no existe, omitiendo actualización...")}const{error:n}=await B.from("tickets").update(r).eq("id",t);if(n)throw console.error("❌ Error actualizando ticket:",n),n;return console.log("✅ Ticket actualizado"),!0}catch(r){throw console.error("❌ Error en updateTicket:",r),r}},async deleteTicket(t){try{console.log("🎫 Eliminando ticket de Supabase...");const{error:e}=await B.from("tickets").delete().eq("id",t);if(e)throw console.error("❌ Error eliminando ticket:",e),e;return console.log("✅ Ticket eliminado"),!0}catch(e){throw console.error("❌ Error en deleteTicket:",e),e}},async getTicketById(t){try{const{data:e,error:r}=await B.from("tickets").select("*").eq("id",t).single();return r||!e?(console.error("❌ Error obteniendo ticket por id:",r),null):{id:e.id,title:e.title,description:e.description,status:e.status,priority:e.priority,category:e.category,createdBy:e.created_by,assignedTo:e.assigned_to,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),tags:e.tags||[],attachments:e.attachments||[]}}catch(e){return console.error("❌ Error en getTicketById:",e),null}},async getChatMessages(t){try{console.log("💬 Obteniendo mensajes de Supabase...");const{data:e,error:r}=await B.from("chat_messages").select("*").eq("ticket_id",t).order("created_at",{ascending:!0});if(r)throw console.error("❌ Error obteniendo mensajes:",r),r;const n=e.map(s=>({id:s.id,ticketId:s.ticket_id,senderId:s.sender_id,content:s.content,timestamp:new Date(s.created_at),attachments:s.attachments||[],isSystem:s.is_system||!1}));return console.log("✅ Mensajes obtenidos:",n.length),n}catch(e){throw console.error("❌ Error en getChatMessages:",e),e}},async sendMessage(t,e,r,n){try{console.log("💬 Enviando mensaje a Supabase...");const s={ticket_id:t,sender_id:e,content:r,is_system:!1};try{const{data:c,error:u}=await B.from("chat_messages").select("attachments").limit(1);u||(s.attachments=n||[])}catch{console.log("⚠️ Columna attachments no existe en chat_messages, omitiendo...")}const{data:a,error:o}=await B.from("chat_messages").insert(s).select().single();if(o)throw console.error("❌ Error enviando mensaje:",o),o;const l={id:a.id,ticketId:a.ticket_id,senderId:a.sender_id,content:a.content,timestamp:new Date(a.created_at),attachments:a.attachments||[],isSystem:a.is_system||!1};return console.log("✅ Mensaje enviado"),l}catch(s){throw console.error("❌ Error en sendMessage:",s),s}},async deleteMessage(t){try{console.log("💬 Eliminando mensaje de Supabase...");const{error:e}=await B.from("chat_messages").delete().eq("id",t);if(e)throw console.error("❌ Error eliminando mensaje:",e),e;return console.log("✅ Mensaje eliminado"),!0}catch(e){throw console.error("❌ Error en deleteMessage:",e),e}},async getChatRoomUnreadCounts(t){try{console.log("📊 Obteniendo contadores de mensajes no leídos para usuario:",t);const{data:e,error:r}=await B.from("chat_room_unread").select("room_id, unread_count").eq("user_id",t);if(r)return console.error("❌ Error obteniendo contadores de no leídos:",r),{};const n={};return e.forEach(s=>{n[s.room_id]=s.unread_count}),console.log("✅ Contadores de no leídos obtenidos:",Object.keys(n).length),n}catch(e){return console.error("❌ Error en getChatRoomUnreadCounts:",e),{}}},async updateChatRoomUnreadCount(t,e,r){try{console.log("📊 Actualizando contador de no leídos:",{roomId:t,userId:e,count:r});const{data:n,error:s}=await B.from("chat_room_unread").select("id").eq("room_id",t).eq("user_id",e).limit(1);if(s)return console.error("❌ Error verificando contador existente:",s),!1;if(n&&n.length>0){const{error:a}=await B.from("chat_room_unread").update({unread_count:r,updated_at:new Date().toISOString()}).eq("id",n[0].id);if(a)return console.error("❌ Error actualizando contador:",a),!1}else{const{error:a}=await B.from("chat_room_unread").insert({room_id:t,user_id:e,unread_count:r});if(a)return console.error("❌ Error creando contador:",a),!1}return console.log("✅ Contador actualizado correctamente"),!0}catch(n){return console.error("❌ Error en updateChatRoomUnreadCount:",n),!1}},async incrementChatRoomUnreadCount(t,e){try{console.log("📊 Incrementando contador de no leídos:",{roomId:t,userId:e});const{data:r,error:n}=await B.from("chat_rooms").select("id").eq("ticket_id",t).limit(1);if((!r||r.length===0)&&!n){console.log("📊 Chat room no existe, creando uno nuevo para ticket:",t);const{error:o}=await B.from("chat_rooms").insert({ticket_id:t,participants:[e]});o&&console.error("❌ Error creando chat room:",o)}const{data:s,error:a}=await B.from("chat_room_unread").select("id, unread_count").eq("room_id",t).eq("user_id",e).limit(1);if(a)return console.error("❌ Error verificando contador existente:",a),!1;if(s&&s.length>0){const o=(s[0].unread_count||0)+1,{error:l}=await B.from("chat_room_unread").update({unread_count:o,updated_at:new Date().toISOString()}).eq("id",s[0].id);if(l)return console.error("❌ Error incrementando contador:",l),!1}else{const{error:o}=await B.from("chat_room_unread").insert({room_id:t,user_id:e,unread_count:1});if(o)return console.error("❌ Error creando contador:",o),!1}return console.log("✅ Contador incrementado correctamente"),!0}catch(r){return console.error("❌ Error en incrementChatRoomUnreadCount:",r),!1}},async getNotifications(t){try{console.log("🔔 Obteniendo notificaciones de Supabase...");const{data:e,error:r}=await B.from("notifications").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(r)throw console.error("❌ Error obteniendo notificaciones:",r),r;const n=e.map(s=>({id:s.id,type:s.type,title:s.title,message:s.message,ticketId:s.ticket_id,userId:s.user_id,isRead:s.is_read===!0||s.is_read==="true"||s.is_read===1,createdAt:new Date(s.created_at)}));return console.log("✅ Notificaciones obtenidas:",n.length),n}catch(e){throw console.error("❌ Error en getNotifications:",e),e}},async createNotification(t){try{console.log("🔔 Creando notificación en Supabase..."),console.log("🔔 Datos:",t);const{error:e}=await B.from("notifications").insert({type:t.type,title:t.title,message:t.message,ticket_id:t.ticketId,user_id:t.userId,is_read:!1});if(e)throw console.error("❌ Error creando notificación:",e),console.error("Detalles del error:",e.message,e.details),e;return console.log("✅ Notificación creada"),!0}catch(e){throw console.error("❌ Error en createNotification:",e instanceof Error?e.message:e),e}},async markNotificationAsRead(t){try{console.log("🔔 Marcando notificación como leída...");const{error:e}=await B.from("notifications").update({is_read:!0}).eq("id",t);if(e)throw console.error("❌ Error marcando notificación:",e),e;return console.log("✅ Notificación marcada como leída"),!0}catch(e){throw console.error("❌ Error en markNotificationAsRead:",e),e}},async markAllNotificationsAsRead(t){try{console.log("🔔 Marcando todas las notificaciones como leídas...");const{error:e}=await B.from("notifications").update({is_read:!0}).eq("user_id",t).eq("is_read",!1);if(e)throw console.error("❌ Error marcando notificaciones:",e),e;return console.log("✅ Todas las notificaciones marcadas como leídas"),!0}catch(e){throw console.error("❌ Error en markAllNotificationsAsRead:",e),e}},async deleteAuditLogsByTicketId(t){try{console.log("🗑️ Eliminando logs de auditoría para ticket:",t);const{error:e}=await B.from("audit_logs").delete().eq("ticket_id",t);if(e)throw console.error("❌ Error eliminando logs de auditoría:",e),e;console.log("✅ Logs de auditoría eliminados")}catch(e){throw console.error("❌ Error en deleteAuditLogsByTicketId:",e),e}},async createAuditLog(t){try{console.log("📝 Creando log de auditoría especial:",t);const{error:e}=await B.from("audit_logs").insert({user_id:t.user_id,user_name:t.user_name,action_type:t.action_type,ticket_id:t.ticket_id,details:t.details,created_at:new Date().toISOString()});if(e)throw console.error("❌ Error creando log de auditoría especial:",e),e;console.log("✅ Log de auditoría especial creado")}catch(e){throw console.error("❌ Error en createAuditLog:",e),e}},async createOrUpdateChatRoom(t,e){try{const{data:r,error:n}=await B.from("chat_rooms").select("id").eq("ticket_id",t).limit(1);if(n)throw n;r&&r.length>0?await B.from("chat_rooms").update({participants:e}).eq("ticket_id",t):await B.from("chat_rooms").insert({ticket_id:t,participants:e})}catch(r){throw console.error("❌ Error en createOrUpdateChatRoom:",r),r}}};async function Be({user_id:t,user_name:e,action_type:r,ticket_id:n=null,message_id:s=null,details:a={}}){const{error:o}=await B.from("audit_logs").insert([{user_id:t,user_name:e,action_type:r,ticket_id:n,message_id:s,details:a}]);o&&console.error("Error registrando acción de auditoría:",o.message)}const df=({message:t,sender:e,onClose:r,duration:n=4e3})=>(_.useEffect(()=>{const s=setTimeout(r,n);return()=>clearTimeout(s)},[r,n]),i.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-white shadow-lg rounded-lg px-5 py-4 flex items-center space-x-3 border-l-4 border-blue-500 animate-fade-in-up",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-blue-700 text-sm",children:e?`${e} te ha enviado un mensaje:`:"Nuevo mensaje de chat"}),i.jsx("div",{className:"text-gray-800 text-base max-w-xs truncate",children:t})]}),i.jsx("button",{onClick:r,className:"ml-4 text-gray-400 hover:text-gray-700 text-lg",children:"×"})]})),hf=_.createContext(void 0);function wx({children:t}){const{currentUser:e}=ce(),[r,n]=_.useState([]),[s,a]=_.useState([]),[o,l]=_.useState(!0),[c,u]=_.useState([]),[h,p]=_.useState(null),g=()=>{try{const P=new(window.AudioContext||window.webkitAudioContext),N=P.createOscillator(),T=P.createGain();N.connect(T),T.connect(P.destination),N.frequency.setValueAtTime(660,P.currentTime),N.frequency.setValueAtTime(440,P.currentTime+.1),T.gain.setValueAtTime(.3,P.currentTime),T.gain.exponentialRampToValueAtTime(.01,P.currentTime+.3),N.start(P.currentTime),N.stop(P.currentTime+.3)}catch{console.log("🔊 No se pudo reproducir sonido de asignación")}};_.useEffect(()=>{if(e){const P=`pinnedTickets_${e.id}`,N=localStorage.getItem(P);u(N?JSON.parse(N):[])}},[e]),_.useEffect(()=>{if(e){const P=`pinnedTickets_${e.id}`;localStorage.setItem(P,JSON.stringify(c))}},[c,e]);const b=P=>{u(N=>N.includes(P)?N:[...N,P])},v=P=>{u(N=>N.filter(T=>T!==P))},x=P=>c.includes(P),y=()=>c;Ye.useEffect(()=>{if(!e)return;console.log("🔄 TicketContext - Configurando escucha de eventos en tiempo real");const P=N=>{const T=N.detail;if(console.log("🔄 TicketContext - Evento de ticket en tiempo real recibido:",T),T.eventType==="INSERT"){const z={id:T.new.id,title:T.new.title,description:T.new.description,status:T.new.status,priority:T.new.priority,category:T.new.category,createdBy:T.new.created_by,assignedTo:T.new.assigned_to,createdAt:new Date(T.new.created_at),updatedAt:new Date(T.new.updated_at),tags:T.new.tags||[],attachments:T.new.attachments||[]};n(F=>F.some(I=>I.id===z.id)?(console.log("🔄 Ticket ya existe, ignorando duplicado:",z.id),F):(console.log("🔄 Agregando nuevo ticket:",z.id),[z,...F]))}else T.eventType==="UPDATE"?n(z=>z.map(F=>F.id===T.new.id?(e&&e.role==="technician"&&T.new.assigned_to===e.id&&F.assignedTo!==e.id&&(g(),p({title:"Nuevo ticket asignado",message:`Se te ha asignado el ticket: ${T.new.title}`})),{...F,title:T.new.title,description:T.new.description,status:T.new.status,priority:T.new.priority,category:T.new.category,assignedTo:T.new.assigned_to,updatedAt:new Date(T.new.updated_at),tags:T.new.tags||[],attachments:T.new.attachments||[]}):F)):T.eventType==="DELETE"&&n(z=>z.filter(F=>F.id!==T.old.id))};return window.addEventListener("realtimeTicket",P),()=>{window.removeEventListener("realtimeTicket",P)}},[e]);const m=async()=>{try{l(!0),console.log("📊 TicketContext - Cargando datos en modo local...",{currentUser:e==null?void 0:e.email});const[P,N]=await Promise.all([K.getTickets(),K.getUsers()]);console.log("📊 TicketContext - Datos recibidos:",{tickets:P.length,usuarios:N.length,usuariosDetalle:N.map(T=>({id:T.id,name:T.name,email:T.email,role:T.role}))}),n(P),a(N),console.log("✅ TicketContext - Estado actualizado:",{ticketsEnEstado:P.length,usuariosEnEstado:N.length})}catch(P){console.error("❌ TicketContext - Error cargando datos:",P)}finally{l(!1)}};_.useEffect(()=>{e?(console.log("🔄 TicketContext - Usuario detectado, iniciando carga...",e.email),m()):(console.log("⚠️ TicketContext - No hay usuario, esperando..."),l(!1))},[e]);const d=async P=>{try{if(!e)return console.error("No hay usuario actual"),null;console.log("🎫 Creando ticket...");const N={...P,createdBy:e.id,attachments:[]},T=await K.createTicket(N);if(T){n(F=>[T,...F]),e&&Be({user_id:e.id,user_name:e.name,action_type:"crear_ticket",ticket_id:T.id,details:{titulo:T.title,descripcion:T.description,prioridad:T.priority,categoria:T.category}});const z={...T,createdByName:(e==null?void 0:e.name)||""};setTimeout(()=>{console.log("🔔 Dispatching ticketCreated event for notifications");const F=new CustomEvent("ticketCreated",{detail:{ticket:z}});window.dispatchEvent(F)},100),console.log("✅ Ticket creado:",T.title)}return T}catch(N){throw console.error("❌ Error creando ticket:",N),N}},f=async(P,N)=>{try{if(console.log("🎫 Actualizando ticket:",P),await K.updateTicket(P,N)){if(n(z=>z.map(F=>F.id===P?{...F,...N,updatedAt:new Date}:F)),e&&(Be({user_id:e.id,user_name:e.name,action_type:"actualizar_ticket",ticket_id:P,details:{updates:N}}),N.status&&Be({user_id:e.id,user_name:e.name,action_type:"cambio_estado_ticket",ticket_id:P,details:{nuevo_estado:N.status}})),N.assignedTo){const z=r.find(F=>F.id===P);if(z){const F=new CustomEvent("ticketAssigned",{detail:{ticketId:P,assignedTo:N.assignedTo,ticketTitle:z.title}});window.dispatchEvent(F)}}console.log("✅ Ticket actualizado")}}catch(T){throw console.error("❌ Error actualizando ticket:",T),T}},w=async P=>{try{if(console.log("🎫 Eliminando ticket:",P),await K.deleteAuditLogsByTicketId(P),e&&await K.createAuditLog({user_id:e.id,user_name:e.name,action_type:"eliminar_ticket",ticket_id:null,details:{mensaje:`El ticket con ID ${P} fue eliminado por ${e.name} el ${new Date().toLocaleString()}`}}),await K.deleteTicket(P)){n(z=>z.filter(F=>F.id!==P));const T=new CustomEvent("ticketDeleted",{detail:{ticketId:P}});window.dispatchEvent(T),console.log("✅ Ticket eliminado")}}catch(N){throw console.error("❌ Error eliminando ticket:",N),N}},C=async(P,N)=>{await f(P,{assignedTo:N}),e&&Be({user_id:e.id,user_name:e.name,action_type:"asignar_ticket",ticket_id:P,details:{asignado_a:N}})},E=P=>r.filter(N=>N.createdBy===P),k=P=>r.filter(N=>N.assignedTo===P),j=()=>r,O=async P=>{try{console.log("👤 Creando usuario...");const N=await K.createUser(P);N&&(a(T=>[N,...T]),e&&Be({user_id:e.id,user_name:e.name,action_type:"crear_usuario",details:{usuario_creado:N.id,datos:N}}),console.log("✅ Usuario creado:",N.name))}catch(N){throw console.error("❌ Error creando usuario:",N),N}},S=async(P,N)=>{try{console.log("👤 Actualizando usuario:",P),await K.updateUser(P,N)&&(a(z=>z.map(F=>F.id===P?{...F,...N}:F)),e&&(Be({user_id:e.id,user_name:e.name,action_type:"actualizar_usuario",details:{usuario_actualizado:P,cambios:N}}),N.role&&Be({user_id:e.id,user_name:e.name,action_type:"cambio_rol_usuario",details:{usuario_actualizado:P,nuevo_rol:N.role}})),console.log("✅ Usuario actualizado"))}catch(T){throw console.error("❌ Error actualizando usuario:",T),T}},M=async P=>{try{console.log("👤 Eliminando usuario:",P),await K.deleteUser(P)&&(a(T=>T.filter(z=>z.id!==P)),e&&Be({user_id:e.id,user_name:e.name,action_type:"eliminar_usuario",details:{usuario_eliminado:P}}),console.log("✅ Usuario eliminado"))}catch(N){throw console.error("❌ Error eliminando usuario:",N),N}};return i.jsxs(hf.Provider,{value:{tickets:r,users:s,loading:o,createTicket:d,updateTicket:f,deleteTicket:w,assignTicket:C,getTicketsByUser:E,getTicketsByAssignee:k,addUser:O,updateUser:S,deleteUser:M,pinTicket:b,unpinTicket:v,isTicketPinned:x,getPinnedTickets:y,getAllTickets:j},children:[t,h&&i.jsx(df,{sender:h.title,message:h.message,onClose:()=>p(null)})]})}function st(){const t=_.useContext(hf);if(t===void 0)throw new Error("useTickets must be used within a TicketProvider");return t}const ff=_.createContext(void 0);function bx({children:t}){const{currentUser:e}=ce(),[r,n]=_.useState({}),[s,a]=_.useState({}),[o,l]=_.useState(!1),[c,u]=_.useState(null),[h,p]=_.useState(null),g=_.useCallback(()=>{try{const k=new(window.AudioContext||window.webkitAudioContext),j=k.createOscillator(),O=k.createGain();j.connect(O),O.connect(k.destination),j.frequency.setValueAtTime(880,k.currentTime),j.frequency.setValueAtTime(440,k.currentTime+.1),O.gain.setValueAtTime(.2,k.currentTime),O.gain.exponentialRampToValueAtTime(.01,k.currentTime+.2),j.start(k.currentTime),j.stop(k.currentTime+.2)}catch{console.log("🔊 No se pudo reproducir sonido de mensaje")}},[]),b=_.useCallback(async()=>{if(e)try{console.log("🔄 ChatContext - Recargando contadores de mensajes no leídos...");const k=await K.getChatRoomUnreadCounts(e.id);n(j=>{const O={...j};return Object.entries(k).forEach(([S,M])=>{O[S]?O[S]={...O[S],unreadCount:{...O[S].unreadCount,[e.id]:M}}:O[S]={ticketId:S,participants:[e.id],unreadCount:{[e.id]:M}}}),O}),window.dispatchEvent(new CustomEvent("messagesRead"))}catch(k){console.error("❌ ChatContext - Error recargando contadores:",k)}},[e]);_.useEffect(()=>{if(!e)return;(async()=>{try{console.log("🔄 ChatContext - Cargando contadores de mensajes no leídos...");const j=await K.getChatRoomUnreadCounts(e.id);n(O=>{const S={...O};return Object.entries(j).forEach(([M,P])=>{S[M]?S[M]={...S[M],unreadCount:{...S[M].unreadCount,[e.id]:P}}:S[M]={ticketId:M,participants:[e.id],unreadCount:{[e.id]:P}}}),S}),console.log("✅ ChatContext - Contadores de no leídos cargados")}catch(j){console.error("❌ ChatContext - Error cargando contadores:",j)}})()},[e]),_.useEffect(()=>{if(!e)return;console.log("🔄 ChatContext - Suscripción global a mensajes en tiempo real");let k=0;function j(){return console.log("[ChatContext] Suscribiéndose a canal global-chat-messages..."),B.channel("global-chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},M=>{if(console.log("[ChatContext] Evento recibido de Supabase:",M),e&&M.new.sender_id!==e.id){if(g(),p({sender:M.new.sender_name||"Alguien",message:M.new.content.length>50?M.new.content.substring(0,50)+"...":M.new.content}),document.hidden&&"Notification"in window&&Notification.permission==="granted"){const P=new Notification(M.new.sender_name||"Nuevo mensaje",{body:M.new.content.length>50?M.new.content.substring(0,50)+"...":M.new.content,icon:"/tickets/logo-alcaldia.png",tag:M.new.ticket_id});setTimeout(()=>P.close(),5e3),P.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("navigateToChat",{detail:{ticketId:M.new.ticket_id}})),P.close()}}window.dispatchEvent(new CustomEvent("navigateToChat",{detail:{ticketId:M.new.ticket_id}})),n(P=>{const N={...P},T=N[M.new.ticket_id];return T&&T.participants&&T.participants.forEach(z=>{z!==M.new.sender_id&&(T.unreadCount[z]=(T.unreadCount[z]||0)+1)}),N}),window.dispatchEvent(new CustomEvent("messageReceived"))}b()}).subscribe(M=>{M==="SUBSCRIBED"?console.log("[ChatContext] Suscripción a Supabase exitosa."):(M==="CHANNEL_ERROR"||M==="CLOSED")&&(console.error("[ChatContext] Error de suscripción a Supabase, reintentando...",M),k<3&&(k++,setTimeout(j,1e3*k)))})}const O=j();return()=>{O.unsubscribe&&O.unsubscribe()}},[e,g,b]);const v="00000000-0000-0000-0000-000000000999",x=_.useCallback(async()=>{const{data:k,error:j}=await B.from("tickets").select("id").eq("id",v).single();(j||!k)&&await B.from("tickets").insert({id:v,title:"Chat Privado (Administradores y Técnicos)",description:"Canal privado para comunicación interna del personal técnico y administradores.",status:"open",priority:"low",category:"privado",created_by:(e==null?void 0:e.id)||null,assigned_to:(e==null?void 0:e.id)||null,tags:["privado"],attachments:[]})},[e]),y=_.useCallback(()=>{u(null)},[]),m=_.useCallback(async k=>{try{l(!0),u(null);let j=[];if(k===v)await x(),j=(await K.getUsers()).filter(M=>M.role==="admin"||M.role==="technician").map(M=>M.id),await K.createOrUpdateChatRoom(k,j);else{const S=await K.getTicketById(k);S&&(j=[S.created_by,S.assigned_to].filter(Boolean))}console.log("[ChatContext] Inicializando participantes para ticket",k,j);const O=await K.getChatMessages(k);a(S=>({...S,[k]:O})),n(S=>{var P,N;const M={...S,[k]:{ticketId:k,participants:j.length?j:((P=S[k])==null?void 0:P.participants)||[(e==null?void 0:e.id)||""],unreadCount:((N=S[k])==null?void 0:N.unreadCount)||{},lastMessage:O[O.length-1]}};return console.log("[ChatContext] Inicialización/actualización de chatRooms en loadMessages:",M),M}),console.log("✅ Mensajes cargados:",O.length)}catch(j){console.error("❌ Error cargando mensajes:",j),u("Error cargando mensajes")}finally{l(!1)}},[e]),d=_.useCallback(async(k,j,O)=>{if(e){l(!0),u(null);try{k===v&&await x();const S=await K.sendMessage(k,e.id,j,O);if(S&&(a(M=>({...M,[k]:[...M[k]||[],S]})),k===v)){const P=(await K.getUsers()).filter(N=>(N.role==="admin"||N.role==="technician")&&N.id!==e.id);for(const N of P)await K.createNotification({type:"new-message",title:"Nuevo mensaje en Chat Privado",message:`${e.name}: ${j}`,ticketId:k,userId:N.id})}}catch(S){u("Error enviando mensaje"),console.error("❌ Error en sendMessage:",S)}finally{l(!1)}}},[e]),f=_.useCallback(async(k,j)=>{if(!e){u("Debes iniciar sesión para eliminar mensajes");return}try{u(null),console.log("💬 Eliminando mensaje:",j),await K.deleteMessage(j)&&(a(S=>{var M;return{...S,[k]:((M=S[k])==null?void 0:M.filter(P=>P.id!==j))||[]}}),console.log("✅ Mensaje eliminado"))}catch(O){console.error("❌ Error eliminando mensaje:",O),u("Error al eliminar mensaje")}},[e]),w=_.useCallback(async(k,j)=>{try{await K.updateChatRoomUnreadCount(k,j,0),n(O=>{var M;const S={...O,[k]:{...O[k],unreadCount:{...(M=O[k])==null?void 0:M.unreadCount,[j]:0}}};return console.log(`[ChatContext] markAsRead: contador puesto en 0 para ticketId=${k}, userId=${j}`,S),S}),window.dispatchEvent(new CustomEvent("messagesRead"))}catch(O){console.error("❌ Error marcando como leído:",O)}},[]),C=_.useCallback((k,j)=>{const O=r[k],S=(O==null?void 0:O.unreadCount[j])||0;return console.log(`[ChatContext] getUnreadCount para ticketId=${k}, userId=${j}:`,S,O),S},[r]),E=_.useCallback(k=>Object.values(r).reduce((j,O)=>j+(O.unreadCount[k]||0),0),[r]);return i.jsxs(ff.Provider,{value:{chatRooms:r,messages:s,setMessages:a,loading:o,error:c,sendMessage:d,deleteMessage:f,markAsRead:w,getUnreadCount:C,getTotalUnreadCount:E,loadMessages:m,clearError:y,reloadUnreadCounts:b,playMessageSound:g},children:[t,h&&i.jsx(df,{sender:h.sender,message:h.message,onClose:()=>p(null)})]})}function or(){const t=_.useContext(ff);if(t===void 0)throw new Error("useChat must be used within a ChatProvider");return t}const mf=_.createContext(void 0);function jx({children:t}){const{currentUser:e}=ce(),[r,n]=_.useState([]),[s,a]=_.useState(!1);Ye.useEffect(()=>{if(!e)return;console.log("🔄 NotificationContext - Configurando escucha de eventos en tiempo real");const y=m=>{const d=m.detail;if(console.log("🔄 NotificationContext - Evento de notificación en tiempo real recibido:",d),d.eventType==="INSERT"&&d.new.user_id===e.id){const f={id:d.new.id,type:d.new.type,title:d.new.title,message:d.new.message,ticketId:d.new.ticket_id,userId:d.new.user_id,isRead:d.new.is_read,createdAt:new Date(d.new.created_at)};console.log("🔄 NotificationContext - Agregando nueva notificación:",f),n(w=>[f,...w]),l(),c(f)}};return window.addEventListener("realtimeNotification",y),()=>{window.removeEventListener("realtimeNotification",y)}},[e]);const o=async()=>{if(e)try{a(!0),console.log("🔔 Cargando notificaciones...");const y=await K.getNotifications(e.id);n(y),console.log("✅ Notificaciones cargadas:",y.length)}catch(y){console.error("❌ Error cargando notificaciones:",y)}finally{a(!1)}};_.useEffect(()=>{e&&o()},[e]);const l=_.useCallback(()=>{try{const y=new(window.AudioContext||window.webkitAudioContext),m=y.createOscillator(),d=y.createGain();m.connect(d),d.connect(y.destination),m.frequency.setValueAtTime(800,y.currentTime),m.frequency.setValueAtTime(600,y.currentTime+.1),d.gain.setValueAtTime(.3,y.currentTime),d.gain.exponentialRampToValueAtTime(.01,y.currentTime+.3),m.start(y.currentTime),m.stop(y.currentTime+.3)}catch{console.log("🔊 No se pudo reproducir sonido de notificación")}},[]),c=_.useCallback(y=>{if("Notification"in window&&Notification.permission==="granted")try{const m=new Notification(y.title,{body:y.message,icon:"/vite.svg",tag:y.ticketId,requireInteraction:!1,silent:!1});setTimeout(()=>{m.close()},5e3),m.onclick=()=>{window.focus(),m.close();const d=new CustomEvent("navigateToTicket",{detail:{ticketId:y.ticketId}});window.dispatchEvent(d)}}catch{console.log("🔔 No se pudo mostrar notificación del navegador")}if(document.hidden){const m=document.title;let d=!0;const f=setInterval(()=>{document.title=d?"🔔 Nueva notificación!":m,d=!d},1e3),w=()=>{document.hidden||(clearInterval(f),document.title=m,document.removeEventListener("visibilitychange",w))};document.addEventListener("visibilitychange",w),setTimeout(()=>{clearInterval(f),document.title=m,document.removeEventListener("visibilitychange",w)},1e4)}},[]),u=_.useCallback(async y=>{try{if(y.type==="ticket-updated"&&y.message&&y.message.toLowerCase().includes("ha sido eliminado")){console.log("⛔ No se crea notificación para ticket eliminado");return}if(console.log("🔔 Creando notificación:",y.title),console.log("🔔 Detalles:",y),await K.createNotification(y)){const d={...y,id:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,isRead:!1};n(f=>[d,...f]),l(),c(d),window.dispatchEvent(new CustomEvent("notificationReceived")),console.log("✅ Notificación creada")}else console.log("❌ Error al crear notificación en la base de datos")}catch(m){console.error("❌ Error creando notificación:",m)}},[l,c]);_.useEffect(()=>{const y=C=>{console.log("🔔 NotificationContext - Evento ticketCreated recibido:",C.detail);const{ticket:E}=C.detail;e&&(e.role==="admin"||e.role==="technician")?(console.log("🔔 NotificationContext - Creando notificación para:",e.name,e.role),u({type:"ticket-created",title:"Nuevo ticket creado",message:`${E.createdByName||"Un usuario"} creó: ${E.title}`,ticketId:E.id,userId:e.id})):console.log("🔔 NotificationContext - Usuario no es admin/técnico, no se crea notificación")},m=C=>{const{ticketId:E,assignedTo:k,ticketTitle:j}=C.detail;(e==null?void 0:e.id)===k&&u({type:"ticket-assigned",title:"Ticket asignado",message:`Se te ha asignado el ticket: ${j}`,ticketId:E,userId:k})},d=C=>{const{ticketId:E,senderId:k,content:j,senderName:O}=C.detail;e&&e.id!==k&&u({type:"new-message",title:"Nuevo mensaje",message:`${O||"Alguien"}: ${j.length>50?j.substring(0,50)+"...":j}`,ticketId:E,userId:(e==null?void 0:e.id)||""})},f=C=>{const{ticketId:E}=C.detail;(e==null?void 0:e.role)==="admin"&&u({type:"ticket-updated",title:"Ticket eliminado",message:`El ticket #${E.slice(0,6)} ha sido eliminado`,ticketId:E,userId:e.id})},w=C=>{const{ticketId:E,newStatus:k,ticketTitle:j,changedBy:O}=C.detail;e&&e.id!==O&&u({type:"ticket-updated",title:"Estado de ticket actualizado",message:`"${j}" cambió a ${{open:"abierto","in-progress":"en progreso",resolved:"resuelto",closed:"cerrado"}[k]||k}`,ticketId:E,userId:e.id})};return window.addEventListener("ticketCreated",y),window.addEventListener("ticketAssigned",m),window.addEventListener("newMessage",d),window.addEventListener("ticketDeleted",f),window.addEventListener("ticketStatusChanged",w),()=>{window.removeEventListener("ticketCreated",y),window.removeEventListener("ticketAssigned",m),window.removeEventListener("newMessage",d),window.removeEventListener("ticketDeleted",f),window.removeEventListener("ticketStatusChanged",w)}},[u,e]);const h=_.useCallback(async y=>{try{console.log("✅ Marcando notificación como leída:",y),await K.markNotificationAsRead(y)&&(n(d=>d.map(f=>f.id===y?{...f,isRead:!0}:f)),window.dispatchEvent(new CustomEvent("notificationRead")))}catch(m){console.error("❌ Error marcando notificación como leída:",m)}},[]),p=_.useCallback(async()=>{if(!e)return!1;try{return console.log("✅ Marcando todas las notificaciones como leídas"),await K.markAllNotificationsAsRead(e.id)?(n(m=>m.map(d=>d.userId===e.id?{...d,isRead:!0}:d)),await o(),setTimeout(()=>{const m=new CustomEvent("notificationRead");window.dispatchEvent(m),console.log("✅ Estado de notificaciones tras marcar como leídas:",r)},100),!0):!1}catch(y){return console.error("❌ Error marcando todas las notificaciones como leídas:",y),!1}},[e,o,r]),g=_.useCallback(()=>{if(!e)return 0;const y=r.filter(m=>m.userId===e.id&&!m.isRead).length;return console.log(`[NotificationContext] getUnreadCount para userId=${e.id}:`,y,r),y},[r,e]),b=_.useCallback(y=>r.filter(m=>m.userId===y).sort((m,d)=>d.createdAt.getTime()-m.createdAt.getTime()),[r]),v=_.useCallback(y=>{n(m=>m.filter(d=>d.id!==y))},[]),x=_.useCallback(async()=>{e&&await p()},[e,p]);return i.jsx(mf.Provider,{value:{notifications:r,loading:s,addNotification:u,markAsRead:h,markAllAsRead:p,getUnreadCount:g,getNotificationsByUser:b,removeNotification:v,removeAllNotifications:x},children:t})}function Ai(){const t=_.useContext(mf);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(t,e)=>{const r=_.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>_.createElement("svg",{ref:h,...kx,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Nx(t)}`,l].join(" "),...u},[...e.map(([p,g])=>_.createElement(p,g)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=U("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=U("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=U("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=U("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=U("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=U("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=U("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=U("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=U("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=U("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=U("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=U("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=U("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=U("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=U("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=U("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=U("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=U("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=U("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=U("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=U("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=U("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=U("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=U("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=U("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=U("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=U("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=U("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=U("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=U("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=U("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=U("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=U("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=U("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=U("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=U("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=U("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Yx(){const{login:t,loading:e}=ce(),[r,n]=_.useState(!1),[s,a]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState(""),[h,p]=_.useState(""),[g,b]=_.useState(""),[v,x]=_.useState(!1),[y,m]=_.useState(""),[d,f]=_.useState(Date.now()),w=_.useRef(null),C=_.useRef(null),E=_.useRef(null),k=_.useRef(null),j=_.useRef(null),O=_.useRef(null),S=async T=>{T.preventDefault(),x(!0),m("");try{const z=await t(s.trim(),o);z?Be({user_id:z.id,user_name:z.name,action_type:"login",details:{email:s.trim(),user_agent:navigator.userAgent}}):m("Usuario no encontrado. Usa uno de los botones de acceso rápido.")}catch(z){console.error("Login error:",z),m("Error al iniciar sesión. Intenta nuevamente.")}finally{x(!1)}},M=async T=>{var z,F;T.preventDefault(),x(!0),m("");try{if(!c.trim()||!s.trim()||!o.trim()){m("Todos los campos obligatorios deben ser completados");return}if(o.length<6){m("La contraseña debe tener al menos 6 caracteres");return}await K.createUser({name:c.trim(),email:s.trim().toLowerCase(),role:"user",phone:h.trim()||void 0,department:g.trim()||void 0,password:o})&&(await t(s.trim(),o)||m("Usuario creado pero error al iniciar sesión. Intenta iniciar sesión manualmente."))}catch(ge){console.error("Register error:",ge),(z=ge.message)!=null&&z.includes("duplicate")||(F=ge.message)!=null&&F.includes("unique")?m("Ya existe un usuario con este email. Intenta iniciar sesión."):m("Error al crear la cuenta. Intenta nuevamente.")}finally{x(!1)}},P=()=>{console.log("🧹 LIMPIEZA COMPLETA - Iniciando limpieza total de formulario..."),a(""),l(""),u(""),p(""),b(""),m(""),f(Date.now());const T=()=>{document.querySelectorAll('input[type="email"], input[type="password"], input[type="text"], input[type="tel"]').forEach(F=>{F&&(F.value="",F.defaultValue="",F.setAttribute("autocomplete","new-password"),F.setAttribute("data-lpignore","true"),F.setAttribute("data-form-type","other"),F.removeAttribute("data-com.bitwarden.browser.user-edited"))}),O.current&&O.current.reset()};T(),setTimeout(T,50),setTimeout(T,100),setTimeout(T,200),setTimeout(T,500),console.log("✅ LIMPIEZA COMPLETA - Todos los campos han sido limpiados")};_.useEffect(()=>{console.log("🔄 LoginForm montado - Ejecutando limpieza inicial..."),P();const T=[100,300,500,1e3].map(z=>setTimeout(()=>{P()},z));return()=>{T.forEach(z=>clearTimeout(z))}},[]),_.useEffect(()=>{const T=()=>{s&&Be({user_id:"",user_name:"",action_type:"logout",details:{email:s}}),P()};return window.addEventListener("userLoggedOut",T),()=>{window.removeEventListener("userLoggedOut",T)}},[]);const N=()=>{P(),setTimeout(()=>{n(!r)},100)};return e?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx(dn,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Cargando aplicación..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Alcaldía Municipal de Cabañas Oeste"}),i.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Unidad de Informática"}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2 inline-block",children:i.jsx("p",{className:"text-sm text-blue-700",children:r?"Registro de Nuevo Usuario":"Sistema de Gestión para Soporte Técnico"})})]}),i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-100",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 text-center",children:r?"Crear Cuenta":"Iniciar Sesión"}),i.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:r?"Completa los datos para crear tu cuenta de usuario":"Ingresa tus credenciales para acceder al sistema"})]}),i.jsxs("form",{ref:O,onSubmit:r?M:S,className:"space-y-6",autoComplete:"off","data-lpignore":"true",children:[r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Nombre completo *"}),i.jsxs("div",{className:"relative",children:[i.jsx(rr,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),i.jsx("input",{ref:E,type:"text",value:c,onChange:T=>u(T.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",placeholder:"Tu nombre completo",required:r,disabled:v,autoComplete:"new-password","data-lpignore":"true","data-form-type":"other"},`name-${d}`)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(xf,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),i.jsx("input",{ref:w,type:"email",value:s,onChange:T=>a(T.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",placeholder:r?"tu@email.com":"tu@empresa.com",disabled:v,autoComplete:"new-password","data-lpignore":"true","data-form-type":"other"},`email-${d}`)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Contraseña"}),i.jsxs("div",{className:"relative",children:[i.jsx(Rx,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),i.jsx("input",{ref:C,type:"password",value:o,onChange:T=>l(T.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",placeholder:r?"Mínimo 6 caracteres":"••••••••",required:!0,disabled:v,autoComplete:"new-password","data-lpignore":"true","data-form-type":"other"},`password-${d}`)]}),r&&i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"La contraseña debe tener al menos 6 caracteres"})]}),r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Teléfono (opcional)"}),i.jsxs("div",{className:"relative",children:[i.jsx(rr,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),i.jsx("input",{ref:k,type:"tel",value:h,onChange:T=>p(T.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",placeholder:"+52 55 1234 5678",disabled:v,autoComplete:"new-password","data-lpignore":"true","data-form-type":"other"},`phone-${d}`)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Departamento/Área (opcional)"}),i.jsxs("div",{className:"relative",children:[i.jsx(pu,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),i.jsx("input",{ref:j,type:"text",value:g,onChange:T=>b(T.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",placeholder:"Ej: Servicios Públicos, Administración",disabled:v,autoComplete:"new-password","data-lpignore":"true","data-form-type":"other"},`department-${d}`)]})]})]}),y&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start",children:[i.jsx(Hl,{className:"w-5 h-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Error de autenticación"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:y})]})]}),i.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-6 rounded-xl hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center text-lg font-semibold shadow-lg",children:v?i.jsxs(i.Fragment,{children:[i.jsx(dn,{className:"w-5 h-5 animate-spin mr-3"}),r?"Creando cuenta...":"Iniciando sesión..."]}):r?"Crear Cuenta":"Iniciar Sesión"})]},d),i.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center space-y-4",children:[i.jsx("button",{onClick:N,disabled:v,className:"text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors disabled:opacity-50",children:r?"¿Ya tienes cuenta? Iniciar sesión":"¿No tienes cuenta? Registrarse"}),i.jsx(pu,{className:"w-5 h-5 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-xs text-gray-500",children:r?"Al registrarte, tendrás acceso como usuario para crear solicitudes":"Ingrese con sus credenciales asignadas"})]})]})]})})}function Xx({activeView:t,setActiveView:e}){const{currentUser:r}=ce(),{getTotalUnreadCount:n,getUnreadCount:s}=or(),{tickets:a,getTicketsByUser:o,getTicketsByAssignee:l}=st(),[,c]=_.useState(0);if(_.useEffect(()=>{const d=f=>{c(w=>w+1)};return window.addEventListener("notificationReceived",d),window.addEventListener("notificationRead",d),window.addEventListener("messageReceived",d),window.addEventListener("messagesRead",d),()=>{window.removeEventListener("notificationReceived",d),window.removeEventListener("notificationRead",d),window.removeEventListener("messageReceived",d),window.removeEventListener("messagesRead",d)}},[]),!r)return null;let u=[];r.role==="user"?u=o(r.id):r.role==="technician"?u=l(r.id):u=a;const h=u.reduce((d,f)=>d+(s(f.id,r.id)||0),0);s();const g=s("00000000-0000-0000-0000-000000000999",r.id),v=(()=>{const d=[{id:"tickets",label:r.role==="user"?"Mis Tickets":r.role==="technician"?"Tickets Asignados":"Gestión de Tickets",icon:yr},{id:"chat",label:"Chat",icon:_r,badge:h},...r.role==="admin"||r.role==="technician"?[{id:"private-chat",label:"Chat Privado",icon:hn,badge:g}]:[],{id:"notifications",label:"Notificaciones",icon:yn}];return r.role==="admin"?[{id:"dashboard",label:"Dashboard",icon:hs},...d,{id:"users",label:"Usuarios",icon:Et},{id:"reports",label:"Reportes",icon:Pi},{id:"audit",label:"Auditoría",icon:hs},{id:"database-status",label:"Base de Datos",icon:Ii},{id:"settings",label:"Configuración",icon:Li}]:r.role==="technician"?[...d,{id:"reports",label:"Mis Reportes",icon:Pi}]:d})(),y=(()=>{switch(r.role){case"user":return{title:"Ciudadano",subtitle:"Gestiona tus solicitudes",icon:rr,color:"bg-green-500"};case"technician":return{title:"Funcionario",subtitle:"Tickets asignados",icon:kf,color:"bg-blue-500"};case"admin":return{title:"Administrador",subtitle:"Control total",icon:hn,color:"bg-purple-500"};default:return{title:"Alcaldía Municipal",subtitle:"Sistema de tickets",icon:rr,color:"bg-gray-500"}}})(),m=y.icon;return i.jsxs("div",{className:"bg-gray-900 text-white w-64 min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center mb-8",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-white p-2 shadow-lg flex items-center justify-center",children:i.jsx("img",{src:"/tickets/logo-alcaldia.png",alt:"Alcaldía de Cabañas Oeste",className:"w-full h-full object-contain",onError:d=>{d.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzMzNzNkYyIvPgo8cGF0aCBkPSJNMjAgMTBMMjUgMTVIMTVMMjAgMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB4PSIxNSIgeT0iMTgiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+"}})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h1",{className:"text-lg font-bold text-white leading-tight",children:"Unidad de Informática"}),i.jsx("p",{className:"text-xs text-gray-300",children:"Alcaldía Cabañas Oeste"})]})]}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex items-center p-4 bg-gray-800 rounded-lg border border-gray-700",children:[i.jsx("div",{className:`${y.color} w-12 h-12 rounded-full flex items-center justify-center`,children:i.jsx(m,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("p",{className:"font-semibold text-white",children:r.name}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),i.jsx("span",{className:"text-xs text-green-400 font-medium",children:"En línea"})]})]})]})}),i.jsxs("nav",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-2",children:"Navegación"}),v.map(d=>{const f=d.icon,w=t===d.id;return i.jsxs("button",{onClick:()=>e(d.id),className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 ${w?"bg-blue-600 text-white shadow-lg transform scale-105":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(f,{className:`w-5 h-5 mr-3 ${w?"text-white":""}`}),i.jsx("span",{className:"font-medium",children:d.label})]}),d.badge&&d.badge>0&&d.id!=="notifications"&&i.jsx("span",{className:`text-xs px-2 py-1 rounded-full min-w-[20px] text-center font-bold animate-pulse ${w?"bg-white text-blue-600":"bg-red-500 text-white"}`,children:d.badge>99?"99+":d.badge})]},d.id)})]})]})}function ey({onNavigateToTicket:t}){const{currentUser:e,logout:r}=ce(),{getUnreadCount:n,getNotificationsByUser:s,markAsRead:a,markAllAsRead:o}=Ai(),[l,c]=_.useState(!1),[,u]=_.useState(0);if(_.useEffect(()=>{if("Notification"in window&&Notification.permission==="default"){const d=()=>{Notification.requestPermission().then(w=>{if(console.log("🔔 Permiso de notificaciones:",w),w==="granted"&&e){const C=new Notification("Bienvenido a TicketFlow",{body:`Hola ${e.name}, ahora recibirás notificaciones de tus tickets`,icon:"/tickets/Logo.png"});setTimeout(()=>C.close(),5e3)}})},f=()=>{d(),document.removeEventListener("click",f),document.removeEventListener("keydown",f)};return document.addEventListener("click",f),document.addEventListener("keydown",f),()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",f)}}},[e]),_.useEffect(()=>{const d=()=>{console.log("🔄 Header - Actualizando contador de notificaciones"),u(f=>f+1)};return window.addEventListener("notificationReceived",d),window.addEventListener("notificationRead",d),window.addEventListener("messageReceived",d),window.addEventListener("messagesRead",d),()=>{window.removeEventListener("notificationReceived",d),window.removeEventListener("notificationRead",d),window.removeEventListener("messageReceived",d),window.removeEventListener("messagesRead",d)}},[]),!e)return null;const h=n(),p=s(e.id).filter(d=>!d.isRead),g=d=>{const w=new Date().getTime()-d.getTime(),C=Math.floor(w/(1e3*60)),E=Math.floor(w/(1e3*60*60)),k=Math.floor(w/(1e3*60*60*24));return C<1?"Ahora mismo":C<60?`Hace ${C}m`:E<24?`Hace ${E}h`:`Hace ${k}d`},b=d=>{switch(d){case"new-message":return"💬";case"ticket-assigned":return"👤";case"ticket-updated":return"⚠️";case"ticket-created":return"🎫";default:return"🔔"}},v=d=>{if(!d.isRead){a(d.id);const f=new CustomEvent("notificationRead");window.dispatchEvent(f)}c(!1),t&&t(d.ticketId),t&&t(d.ticketId)};Ye.useEffect(()=>{const d=f=>{const{ticketId:w}=f.detail;t&&t(w)};return window.addEventListener("navigateToTicket",d),()=>{window.removeEventListener("navigateToTicket",d)}},[t]);const y=(()=>{switch(e.role){case"user":return{title:"Portal Ciudadano",description:"Gestiona tus solicitudes municipales",icon:rr,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"};case"technician":return{title:"Panel de Funcionario",description:"Gestiona solicitudes asignadas",icon:kf,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"};case"admin":return{title:"Panel Administrativo",description:"Unidad de Informática",icon:hn,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"};default:return{title:"Sistema Municipal",description:"Gestión de solicitudes ciudadanas",icon:rr,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}})(),m=y.icon;return Ai(),st(),or(),i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4 relative shadow-sm flex-shrink-0",style:{zIndex:99999},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${y.bgColor} ${y.borderColor}`,children:[i.jsx(m,{className:`w-6 h-6 ${y.color} mr-3`}),i.jsxs("div",{children:[i.jsx("h2",{className:`text-xl font-bold ${y.color}`,children:y.title}),i.jsx("p",{className:"text-sm text-gray-600",children:y.description})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("p",{className:"text-gray-600",children:["Bienvenido, ",i.jsx("span",{className:"font-semibold text-gray-900",children:e.name})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),i.jsx("span",{className:"text-xs text-green-600 font-medium",children:"En línea"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>c(!l),className:"relative p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors",children:[i.jsx(yn,{className:"w-6 h-6"}),h>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-medium animate-pulse",children:h>99?"99+":h})]}),l&&i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden flex flex-col",style:{zIndex:99998,maxHeight:"70vh"},children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Notificaciones"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[p.length>0&&i.jsx("button",{onClick:async()=>{console.log("🟦 Intentando marcar todas como leídas...");try{const d=await o();console.log("🟩 Resultado de markAllAsRead:",d),alert("Resultado de markAllAsRead: "+d)}catch(d){console.error("🟥 Error en markAllAsRead:",d),alert("Error en markAllAsRead: "+d)}},className:"text-sm text-blue-600 hover:text-blue-700",children:"Mostrar todas como leídas"}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx(vr,{className:"w-4 h-4"})})]})]}),i.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"calc(70vh - 80px)"},children:p.length===0?i.jsxs("div",{className:"p-4 text-center text-green-600",children:[i.jsx("span",{className:"text-2xl",children:"✅"}),i.jsx("p",{className:"mt-2 font-semibold",children:"Todas las notificaciones están leídas"})]}):p.slice(0,10).map(d=>i.jsx("div",{onClick:()=>v(d),className:`p-3 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${d.isRead?"":"bg-blue-50"}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("span",{className:"text-lg",children:b(d.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:`text-sm font-medium ${d.isRead?"text-gray-900":"text-blue-900"}`,children:d.title}),!d.isRead&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2"})]}),i.jsx("p",{className:`text-sm mt-1 ${d.isRead?"text-gray-600":"text-blue-700"}`,children:d.message}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:g(d.createdAt)}),i.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-mono",children:["#",d.ticketId]})]})]})]})},d.id))}),p.length>10&&i.jsx("div",{className:"p-3 text-center border-t border-gray-200 flex-shrink-0",children:i.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:"Ver todas las notificaciones"})})]})]}),i.jsx("button",{onClick:r,className:"flex items-center p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors",title:"Cerrar sesión",children:i.jsx(Ox,{className:"w-5 h-5"})})]})]})}),l&&i.jsx("div",{className:"fixed inset-0",style:{zIndex:99997},onClick:()=>{c(!1)}})]})}function vu(){const{currentUser:t}=ce(),{tickets:e,getTicketsByUser:r,getTicketsByAssignee:n}=st(),{getTotalUnreadCount:s}=or();if(!t)return null;const o=(()=>{if(t.role==="user"){const l=r(t.id);return[{title:"Mis Tickets",value:l.length,icon:yr,color:"bg-blue-500",change:"+2 este mes"},{title:"En Progreso",value:l.filter(c=>c.status==="in-progress").length,icon:Xt,color:"bg-yellow-500",change:"50% completado"},{title:"Resueltos",value:l.filter(c=>c.status==="resolved").length,icon:wt,color:"bg-green-500",change:"+1 esta semana"},{title:"Mensajes",value:s(t.id),icon:_r,color:"bg-purple-500",change:"Sin leer"}]}if(t.role==="technician"){const l=n(t.id);return[{title:"Asignados",value:l.length,icon:yr,color:"bg-blue-500",change:"+3 hoy"},{title:"Pendientes",value:l.filter(c=>c.status==="open").length,icon:Me,color:"bg-red-500",change:"Requieren atención"},{title:"En Progreso",value:l.filter(c=>c.status==="in-progress").length,icon:Xt,color:"bg-yellow-500",change:"Trabajando en ellos"},{title:"Completados",value:l.filter(c=>c.status==="resolved").length,icon:wt,color:"bg-green-500",change:"+5 esta semana"}]}return[{title:"Total Tickets",value:e.length,icon:yr,color:"bg-blue-500",change:"+12% vs mes anterior"},{title:"Abiertos",value:e.filter(l=>l.status==="open").length,icon:Me,color:"bg-red-500",change:"15% del total"},{title:"En Progreso",value:e.filter(l=>l.status==="in-progress").length,icon:Xt,color:"bg-yellow-500",change:"30% del total"},{title:"Resueltos",value:e.filter(l=>l.status==="resolved").length,icon:wt,color:"bg-green-500",change:"85% tasa resolución"}]})();return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:o.map((l,c)=>{const u=l.icon;return i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:l.title}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:l.value}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:l.change})]}),i.jsx("div",{className:`${l.color} p-3 rounded-full`,children:i.jsx(u,{className:"w-6 h-6 text-white"})})]})},c)})})}function ty({title:t,value:e,change:r,trend:n,icon:s,color:a}){const o=n==="up"?bf:n==="down"?Vx:hs,l=n==="up"?"text-green-600":n==="down"?"text-red-600":"text-gray-600";return i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-300 group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:`p-3 rounded-xl ${a} group-hover:scale-110 transition-transform duration-300`,children:i.jsx(s,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:`flex items-center ${l} text-sm font-medium`,children:[Ye.createElement(o,{className:"w-4 h-4 mr-1"}),r]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:e}),i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:t})]})]})}function ry({title:t,description:e,icon:r,color:n,onClick:s}){return i.jsx("button",{onClick:s,className:"w-full text-left p-4 bg-white rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-300 group",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`p-3 rounded-lg ${n} group-hover:scale-110 transition-transform duration-300`,children:i.jsx(r,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e})]}),i.jsx(Sx,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]})})}function wu(){const{currentUser:t}=ce(),{tickets:e,users:r}=st(),{getTotalUnreadCount:n}=or(),{getUnreadCount:s}=Ai(),[a,o]=_.useState("7d"),[l,c]=_.useState(!1);if(!t||t.role!=="admin")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(hn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-gray-600",children:"Solo los administradores pueden acceder a este panel"})]})});const u=async()=>{c(!0),await new Promise(j=>setTimeout(j,1e3)),c(!1)},h=r.length,p=r.filter(j=>j.isOnline).length,g=e.length,b=e.filter(j=>j.status==="open").length,v=e.filter(j=>j.status==="resolved").length,x=e.filter(j=>j.priority==="urgent").length;n(t.id);const y=s(),m=g>0?(v/g*100).toFixed(1):"0",C=[{title:"Usuarios Totales",value:h,change:"+12%",trend:"up",icon:Et,color:"bg-gradient-to-r from-blue-500 to-blue-600"},{title:"Usuarios Activos",value:p,change:`${(p/h*100).toFixed(0)}%`,trend:"up",icon:Ho,color:"bg-gradient-to-r from-green-500 to-green-600"},{title:"Total Solicitudes",value:g,change:"+8%",trend:"up",icon:yr,color:"bg-gradient-to-r from-purple-500 to-purple-600"},{title:"Tickets Abiertos",value:b,change:"-5%",trend:"down",icon:Me,color:"bg-gradient-to-r from-orange-500 to-orange-600"},{title:"Tasa Resolución",value:`${m}%`,change:"+3%",trend:"up",icon:wt,color:"bg-gradient-to-r from-emerald-500 to-emerald-600"},{title:"Tiempo Respuesta",value:"2.3h",change:"-15%",trend:"down",icon:Xt,color:"bg-gradient-to-r from-indigo-500 to-indigo-600"}],E=[{title:"Gestión de Usuarios",description:"Crear, editar y administrar cuentas de usuario",icon:Et,color:"bg-blue-500",onClick:()=>{const j=new CustomEvent("navigateToAdminSection",{detail:{section:"users"}});window.dispatchEvent(j)}},{title:"Reportes y Análisis",description:"Ver estadísticas detalladas y generar reportes",icon:Pi,color:"bg-green-500",onClick:()=>{const j=new CustomEvent("navigateToAdminSection",{detail:{section:"reports"}});window.dispatchEvent(j)}},{title:"Estado de Base de Datos",description:"Verificar conexión y rendimiento del sistema",icon:Ii,color:"bg-orange-500",onClick:()=>{const j=new CustomEvent("navigateToAdminSection",{detail:{section:"database-status"}});window.dispatchEvent(j)}},{title:"Configuración del Sistema",description:"Ajustar parámetros y configuraciones globales",icon:Li,color:"bg-purple-500",onClick:()=>{const j=new CustomEvent("navigateToAdminSection",{detail:{section:"settings"}});window.dispatchEvent(j)}}],k=[{id:1,type:"user_created",message:"Nuevo usuario registrado: Ana Martínez",time:"Hace 5 min",icon:Et,color:"text-blue-600"},{id:2,type:"ticket_resolved",message:"Ticket #1234 resuelto por María García",time:"Hace 12 min",icon:wt,color:"text-green-600"},{id:3,type:"urgent_ticket",message:"Ticket urgente creado: Servidor caído",time:"Hace 18 min",icon:Me,color:"text-red-600"},{id:4,type:"system_update",message:"Actualización del sistema completada",time:"Hace 1 hora",icon:Li,color:"text-purple-600"}];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 overflow-y-auto",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-10",children:i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-lg flex items-center justify-center",children:i.jsx("img",{src:"/tickets/logo-alcaldia.png",alt:"Alcaldía de Cabañas Oeste",className:"w-8 h-8 object-contain filter brightness-0 invert",onError:j=>{j.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2IDhMMjAgMTJIMTJMMTYgOFoiIGZpbGw9IndoaXRlIi8+CjxyZWN0IHg9IjEyIiB5PSIxNCIgd2lkdGg9IjgiIGhlaWdodD0iMTAiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg=="}})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Unidad de Informática"}),i.jsxs("p",{className:"text-gray-600",children:["Bienvenido(a), ",t.name]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("select",{value:a,onChange:j=>o(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"24h",children:"Últimas 24h"}),i.jsx("option",{value:"7d",children:"Últimos 7 días"}),i.jsx("option",{value:"30d",children:"Últimos 30 días"}),i.jsx("option",{value:"90d",children:"Últimos 90 días"})]}),i.jsxs("button",{onClick:u,disabled:l,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[i.jsx(vf,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),l?"Actualizando...":"Actualizar"]})]})]})})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:C.map((j,O)=>i.jsx(ty,{...j},O))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Acciones Rápidas"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("span",{className:"text-sm text-gray-500",children:"Herramientas de administración"})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map((j,O)=>i.jsx(ry,{...j},O))})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Actividad Reciente"}),i.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver todo"})]}),i.jsx("div",{className:"space-y-4",children:k.map(j=>i.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${j.color}`,children:i.jsx(j.icon,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:j.message}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.time})]})]},j.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Estado del Sistema"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-sm font-medium text-green-600",children:"Operativo"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ii,{className:"w-5 h-5 text-green-600"}),i.jsx("span",{className:"font-medium text-green-900",children:"Almacenamiento Local"})]}),i.jsx("span",{className:"text-sm font-medium text-green-600",children:"✓ Disponible"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl border border-blue-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(hs,{className:"w-5 h-5 text-blue-600"}),i.jsx("span",{className:"font-medium text-blue-900",children:"Aplicación"})]}),i.jsx("span",{className:"text-sm font-medium text-blue-600",children:"✓ Operativa"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-xl border border-purple-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(hn,{className:"w-5 h-5 text-purple-600"}),i.jsx("span",{className:"font-medium text-purple-900",children:"Datos Demo"})]}),i.jsx("span",{className:"text-sm font-medium text-purple-600",children:"✓ Cargados"})]})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Estadísticas Locales"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:["Usuarios: ",i.jsx("span",{className:"font-medium",children:r.length})]}),i.jsxs("div",{children:["Tickets: ",i.jsx("span",{className:"font-medium",children:e.length})]}),i.jsxs("div",{children:["Funcionarios: ",i.jsx("span",{className:"font-medium",children:r.filter(j=>j.role==="technician").length})]}),i.jsxs("div",{children:["Administradores: ",i.jsx("span",{className:"font-medium",children:r.filter(j=>j.role==="admin").length})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"text-xs text-gray-600",children:"Sistema en funcionamiento"})})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Rendimiento"}),i.jsx(Ax,{className:"w-5 h-5 text-gray-400"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uso de CPU"}),i.jsx("span",{className:"text-sm font-bold text-gray-900",children:"23%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:"23%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uso de Memoria"}),i.jsx("span",{className:"text-sm font-bold text-gray-900",children:"67%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 h-2 rounded-full",style:{width:"67%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Almacenamiento"}),i.jsx("span",{className:"text-sm font-bold text-gray-900",children:"45%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),i.jsx("div",{className:"pt-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Tiempo de respuesta promedio"}),i.jsx("span",{className:"font-bold text-green-600",children:"142ms"})]})})]})]})]}),(x>0||y>0)&&i.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Me,{className:"w-6 h-6 text-red-600"}),i.jsx("h2",{className:"text-xl font-bold text-red-900",children:"Alertas del Sistema"})]}),i.jsxs("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:[x+y," alertas"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x>0&&i.jsx("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Nf,{className:"w-5 h-5 text-red-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-red-900",children:"Tickets Urgentes"}),i.jsxs("p",{className:"text-sm text-red-700",children:[x," tickets requieren atención inmediata"]})]})]})}),y>0&&i.jsx("div",{className:"bg-white p-4 rounded-xl border border-orange-200",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(yn,{className:"w-5 h-5 text-orange-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-orange-900",children:"Notificaciones"}),i.jsxs("p",{className:"text-sm text-orange-700",children:[y," notificaciones sin leer"]})]})]})})]})]})]})]})}function ny({ticket:t,onClick:e,onDelete:r}){const{currentUser:n}=ce(),{users:s,updateTicket:a,deleteTicket:o}=st(),{getUnreadCount:l}=or(),[c,u]=_.useState(!1),[h,p]=_.useState(!1);if(!n)return null;const g=s.find(S=>S.id===t.createdBy),b=s.find(S=>S.id===t.assignedTo),v=l(t.id,n.id),x=s.filter(S=>S.role==="technician"),y=S=>{switch(S){case"open":return"bg-red-100 text-red-800 border-red-200";case"in-progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=S=>{switch(S){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},d=S=>{switch(S){case"urgent":return i.jsx(Nf,{className:"w-4 h-4"});case"high":return i.jsx(Me,{className:"w-4 h-4"});default:return null}},f=S=>{a(t.id,{status:S}),p(!1)},w=S=>{a(t.id,{assignedTo:S}),u(!1)},C=async S=>{S.stopPropagation(),window.confirm("¿Estás seguro de que deseas eliminar este ticket? Esta acción no se puede deshacer.")&&(await o(t.id),r&&r())},E=S=>new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(S),k=()=>{const M=new Date().getTime()-t.createdAt.getTime(),P=Math.floor(M/(1e3*60*60)),N=Math.floor(P/24);return N>0?`${N} día${N!==1?"s":""}`:P>0?`${P} hora${P!==1?"s":""}`:"Menos de 1 hora"},j=n.role==="technician"&&t.assignedTo===n.id;return i.jsxs("div",{className:`bg-white border-2 rounded-xl p-6 hover:shadow-lg transition-all duration-200 cursor-pointer relative
        ${j?"border-blue-200 bg-blue-50/30":"border-gray-200"}
        ${t.status==="open"&&t.priority==="urgent"?"ring-2 ring-red-200":""}
        ${t.id==="00000000-0000-0000-0000-000000000999"?"bg-red-50 border-red-200":""}`,onClick:e,children:[n.role==="admin"&&i.jsx("button",{className:"p-2 rounded-full hover:bg-red-100 transition-colors absolute bottom-4 right-4 z-10 shadow-md",title:"Eliminar ticket",onClick:C,children:i.jsx(tn,{className:"w-6 h-6 text-red-500"})}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium border ${m(t.priority)}`,children:[d(t.priority),i.jsx("span",{className:"capitalize",children:t.priority})]}),i.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${y(t.status)}`,children:[t.status==="open"&&"Abierto",t.status==="in-progress"&&"En Progreso",t.status==="resolved"&&"Resuelto",t.status==="closed"&&"Cerrado"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["#",t.id]}),j&&i.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded font-medium",children:"Asignado a ti"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),i.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:t.description}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(rr,{className:"w-4 h-4"}),i.jsxs("span",{children:["Creado por: ",i.jsx("span",{className:"font-medium",children:g==null?void 0:g.name})]})]}),b?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(rr,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignado a: ",i.jsx("span",{className:"font-medium text-blue-600",children:b.name})]})]}):i.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[i.jsx(Me,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:"Sin asignar"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Xt,{className:"w-4 h-4"}),i.jsxs("span",{children:["Hace ",k()]})]}),v>0&&i.jsxs("div",{className:"flex items-center gap-1 text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:[i.jsx(_r,{className:"w-4 h-4"}),i.jsxs("span",{className:"font-medium",children:[v," nuevos"]})]})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm font-medium",children:t.category}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Actualizado: ",E(t.updatedAt)]})]})]}),n.role==="admin"&&i.jsx("div",{className:"flex gap-2 pt-4 border-t border-gray-200 mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:S=>{S.stopPropagation(),u(!c)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm font-medium",children:[i.jsx(jf,{className:"w-4 h-4"}),b?"Reasignar":"Asignar Técnico",i.jsx(gu,{className:"w-3 h-3"})]}),c&&i.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-20 min-w-[250px]",children:i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Asignar ticket a técnico:"}),x.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No hay técnicos disponibles"}):i.jsx("div",{className:"space-y-1",children:x.map(S=>i.jsxs("button",{onClick:M=>{M.stopPropagation(),w(S.id)},className:`w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3 ${S.id===t.assignedTo?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700"}`,children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S.isOnline?"bg-green-500":"bg-gray-400"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:S.name}),i.jsx("div",{className:"text-xs text-gray-500",children:S.isOnline?"En línea":"Desconectado"})]}),S.id===t.assignedTo&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Actual"})]},S.id))}),t.assignedTo&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-gray-200 my-2"}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),a(t.id,{assignedTo:void 0}),u(!1)},className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(vr,{className:"w-4 h-4"}),"Quitar asignación"]})]})]})})]})}),n.role==="technician"&&j&&i.jsxs("div",{className:"pt-4 border-t border-blue-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Acciones del Técnico:"}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:S=>{S.stopPropagation(),p(!h)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1 text-sm",children:["Cambiar Estado",i.jsx(gu,{className:"w-3 h-3"})]}),h&&i.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl z-20 min-w-[180px]",children:i.jsxs("div",{className:"p-2",children:[i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("in-progress")},disabled:t.status==="in-progress",className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-yellow-50 transition-colors flex items-center gap-2 text-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(yu,{className:"w-4 h-4"}),"Iniciar Trabajo"]}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("resolved")},disabled:t.status==="resolved"||t.status==="closed",className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-green-50 transition-colors flex items-center gap-2 text-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(wt,{className:"w-4 h-4"}),"Marcar Resuelto"]}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("closed")},disabled:t.status==="closed",className:"w-full text-left px-3 py-2 text-sm rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(vr,{className:"w-4 h-4"}),"Cerrar Ticket"]})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("in-progress")},disabled:t.status==="in-progress",className:"px-3 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(yu,{className:"w-4 h-4"}),t.status==="in-progress"?"En Progreso":"Iniciar"]}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("resolved")},disabled:t.status==="resolved"||t.status==="closed",className:"px-3 py-2 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(wt,{className:"w-4 h-4"}),"Resolver"]})]}),t.status==="resolved"&&i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("closed")},className:"w-full mt-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[i.jsx(vr,{className:"w-4 h-4"}),"Cerrar Ticket"]})]}),n.role==="admin"&&i.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:S=>{S.stopPropagation(),f("in-progress")},disabled:t.status==="in-progress",className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm hover:bg-yellow-200 transition-colors disabled:opacity-50",children:"En Progreso"}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),f("resolved")},disabled:t.status==="resolved",className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm hover:bg-green-200 transition-colors flex items-center gap-1 disabled:opacity-50",children:[i.jsx(wt,{className:"w-4 h-4"}),"Resolver"]}),i.jsx("button",{onClick:S=>{S.stopPropagation(),f("closed")},disabled:t.status==="closed",className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cerrar"})]}),t.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-4 pt-3 border-t border-gray-100",children:t.tags.map((S,M)=>i.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-medium",children:["#",S]},M))}),(c||h)&&i.jsx("div",{className:"fixed inset-0 z-10",onClick:S=>{S.stopPropagation(),u(!1),p(!1)}})]})}function sy({isOpen:t,onClose:e}){const{currentUser:r}=ce(),{createTicket:n}=st(),[s,a]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState("medium"),[h,p]=_.useState(""),[g,b]=_.useState(""),[v,x]=_.useState(!1),[y,m]=_.useState(null);if(!t||!r)return null;const d=async w=>{if(w.preventDefault(),!v&&!v){x(!0),m(null);try{await n({title:s,description:o,priority:c,category:h||"General",status:"open",tags:g.split(",").map(E=>E.trim()).filter(Boolean),attachments:[]})?(a(""),l(""),u("medium"),p(""),b(""),e()):m("Error al crear el ticket. Por favor, inténtalo de nuevo.")}catch(C){console.error("Error creating ticket:",C),m("Error al crear el ticket. Por favor, inténtalo de nuevo.")}finally{x(!1)}}},f=["Hardware","Software","Red","Impresora","Periféricos","Sistema Operativo","Aplicaciones","Correo Electrónico","Seguridad","Otros"];return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nueva Solicitud Municipal"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:v,children:i.jsx(vr,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[y&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:y}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título *"}),i.jsx("input",{type:"text",value:s,onChange:w=>a(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente tu solicitud",required:!0,disabled:v})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción *"}),i.jsx("textarea",{value:o,onChange:w=>l(w.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Proporciona más detalles sobre tu solicitud",required:!0,disabled:v})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),i.jsxs("select",{value:c,onChange:w=>u(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:v,children:[i.jsx("option",{value:"low",children:"Baja"}),i.jsx("option",{value:"medium",children:"Media"}),i.jsx("option",{value:"high",children:"Alta"}),i.jsx("option",{value:"urgent",children:"Urgente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),i.jsxs("select",{value:h,onChange:w=>p(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:v,children:[i.jsx("option",{value:"",children:"Seleccionar categoría"}),f.map(w=>i.jsx("option",{value:w,children:w},w))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (separados por comas)"}),i.jsx("input",{type:"text",value:g,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"urgente, alumbrado, zona centro",disabled:v})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:v,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?"Enviando...":"Enviar Solicitud"})]})]})]})})}function iy({onTicketClick:t,onDeleteTicket:e}){const{currentUser:r}=ce(),{tickets:n,getTicketsByUser:s,getTicketsByAssignee:a,users:o,getPinnedTickets:l,isTicketPinned:c,getAllTickets:u}=st(),[h,p]=_.useState(!1),[g,b]=_.useState("all"),[v,x]=_.useState(""),[y,m]=_.useState("all"),[d,f]=_.useState(0);if(Ye.useEffect(()=>{(r==null?void 0:r.role)==="technician"&&f(A=>A+1)},[a(r==null?void 0:r.id).length]),!r)return null;const w="00000000-0000-0000-0000-000000000999",E=(()=>{let A=r.role==="user"?s(r.id):r.role==="technician"?a(r.id):u();return(r.role==="admin"||r.role==="technician")&&(A=A.filter($=>$.id!==w)),g!=="all"&&(A=A.filter($=>$.status===g)),r.role==="admin"&&y!=="all"&&(y==="unassigned"?A=A.filter($=>!$.assignedTo):y==="assigned"&&(A=A.filter($=>$.assignedTo))),v&&(A=A.filter($=>{var Ke,it;const q=o.find(Se=>Se.id===$.createdBy),J=o.find(Se=>Se.id===$.assignedTo),re=v.toLowerCase();return $.title.toLowerCase().includes(re)||$.description.toLowerCase().includes(re)||(((Ke=q==null?void 0:q.name)==null?void 0:Ke.toLowerCase().includes(re))??!1)||(((it=J==null?void 0:J.name)==null?void 0:it.toLowerCase().includes(re))??!1)||$.tags.some(Se=>Se.toLowerCase().includes(re))})),A.sort(($,q)=>{const J=q.createdAt.getTime()-$.createdAt.getTime();if(J!==0)return J;const re={urgent:4,high:3,medium:2,low:1};return re[q.priority]-re[$.priority]})})(),k=l(),j=k.map(A=>E.find($=>$.id===A)).filter(Boolean),O=E.filter(A=>!k.includes(A.id)),S=[...j,...O],M=r.role==="admin"?n.filter(A=>!A.assignedTo).length:0,N=(()=>{if(r.role!=="technician")return null;const A=a(r.id);return{total:A.length,open:A.filter($=>$.status==="open").length,inProgress:A.filter($=>$.status==="in-progress").length,resolved:A.filter($=>$.status==="resolved").length,urgent:A.filter($=>$.priority==="urgent"&&$.status!=="closed"&&$.status!=="resolved").length}})(),T=[{value:"all",label:"Todos"},{value:"open",label:"Abiertos"},{value:"in-progress",label:"En Progreso"},{value:"resolved",label:"Resueltos"},{value:"closed",label:"Cerrados"}],z=[{value:"all",label:"Todos"},{value:"assigned",label:"Asignados"},{value:"unassigned",label:"Sin asignar"}],F=A=>{t&&t(A)},ge=()=>{switch(r.role){case"user":return"Mis Tickets";case"technician":return"Tickets Asignados";case"admin":return"Gestión de Tickets";default:return"Tickets"}},I=()=>{switch(r.role){case"user":return"Gestiona y da seguimiento a tus solicitudes de soporte";case"technician":return"Tickets asignados por el administrador para tu atención";case"admin":return"Panel completo de administración de tickets y asignaciones";default:return""}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:ge()}),i.jsx("p",{className:"text-gray-600 mt-1",children:I()}),r.role==="admin"&&M>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[i.jsx(Me,{className:"w-5 h-5 text-orange-500"}),i.jsxs("span",{className:"text-sm text-orange-700 font-medium",children:[M," ticket",M!==1?"s":""," sin asignar requieren atención"]})]}),r.role==="technician"&&N&&N.urgent>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[i.jsx(Me,{className:"w-5 h-5 text-red-500"}),i.jsxs("span",{className:"text-sm text-red-700 font-medium",children:[N.urgent," ticket",N.urgent!==1?"s":""," urgente",N.urgent!==1?"s":""," requieren atención inmediata"]})]})]}),(r.role==="user"||r.role==="admin")&&i.jsxs("button",{onClick:()=>p(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center shadow-lg",children:[i.jsx(yf,{className:"w-5 h-5 mr-2"}),"Nueva Solicitud"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Oi,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Buscar por título, descripción o categoría...",value:v,onChange:A=>x(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(zo,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx("select",{value:g,onChange:A=>b(A.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[140px]",children:T.map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))})]}),r.role==="admin"&&i.jsxs("div",{className:"relative",children:[i.jsx(Et,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx("select",{value:y,onChange:A=>m(A.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[140px]",children:z.map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))})]})]})]}),r.role==="admin"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.length})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Ua,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sin Asignar"}),i.jsx("p",{className:"text-3xl font-bold text-orange-600",children:M})]}),i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:i.jsx(Me,{className:"w-6 h-6 text-orange-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En Progreso"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:n.filter(A=>A.status==="in-progress").length})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(Xt,{className:"w-6 h-6 text-yellow-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Técnicos Activos"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:o.filter(A=>A.role==="technician"&&A.isOnline).length})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Et,{className:"w-6 h-6 text-green-600"})})]})})]}),r.role==="technician"&&N&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Asignados"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:N.total})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(Ua,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgentes"}),i.jsx("p",{className:"text-3xl font-bold text-red-600",children:N.urgent})]}),i.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:i.jsx(Me,{className:"w-6 h-6 text-red-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Abiertos"}),i.jsx("p",{className:"text-3xl font-bold text-orange-600",children:N.open})]}),i.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:i.jsx(Me,{className:"w-6 h-6 text-orange-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En Progreso"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:N.inProgress})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:i.jsx(Xt,{className:"w-6 h-6 text-yellow-600"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resueltos"}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:N.resolved})]}),i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(wt,{className:"w-6 h-6 text-green-600"})})]})})]}),i.jsx("div",{className:"space-y-4",children:S.length===0?i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[i.jsx("div",{className:"text-gray-400 text-xl mb-4",children:r.role==="technician"?i.jsx(Ua,{className:"w-16 h-16 mx-auto mb-4"}):i.jsx(zo,{className:"w-16 h-16 mx-auto mb-4"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay tickets disponibles"}),i.jsxs("p",{className:"text-gray-600",children:[r.role==="user"&&"Crea tu primer ticket para comenzar",r.role==="admin"&&v&&"Intenta ajustar los filtros de búsqueda",r.role==="technician"&&"No tienes tickets asignados en este momento"]})]}):S.map(A=>i.jsx(ny,{ticket:A,onClick:()=>F(A.id),onDelete:e},A.id))}),h&&i.jsx(sy,{isOpen:h,onClose:()=>p(!1)})]})}function ay({selectedTicketId:t,onSelectTicket:e}){const{currentUser:r}=ce(),{tickets:n,getTicketsByUser:s,getTicketsByAssignee:a,users:o,pinTicket:l,unpinTicket:c,isTicketPinned:u,getPinnedTickets:h,updateTicket:p,deleteTicket:g}=st(),{getUnreadCount:b,chatRooms:v,getTotalUnreadCount:x,markAsRead:y,reloadUnreadCounts:m}=or(),[d,f]=_.useState(""),[w,C]=_.useState("all"),[,E]=_.useState(0),[k,j]=_.useState(null),[O,S]=_.useState(null),[M,P]=_.useState(!1),N=_.useRef(null),[T,z]=_.useState(null);Ye.useEffect(()=>{function R(we){N.current&&!N.current.contains(we.target)&&j(null)}return k?document.addEventListener("mousedown",R):document.removeEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[k]),_.useEffect(()=>{const R=()=>{console.log("🔄 ChatList - Actualizando contadores de mensajes no leídos"),E(we=>we+1)};return window.addEventListener("messagesRead",R),window.addEventListener("messageReceived",R),window.addEventListener("unreadCountsUpdated",R),window.addEventListener("notificationReceived",R),window.addEventListener("notificationRead",R),()=>{window.removeEventListener("messagesRead",R),window.removeEventListener("messageReceived",R),window.removeEventListener("unreadCountsUpdated",R),window.removeEventListener("notificationReceived",R),window.removeEventListener("notificationRead",R)}},[]);const F=o.filter(R=>R.role==="technician");if(_.useEffect(()=>{function R(we){N.current&&!N.current.contains(we.target)&&S(null)}return O?document.addEventListener("mousedown",R):document.removeEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[O]),!r)return null;const ge=()=>r.role==="user"?s(r.id):r.role==="technician"?a(r.id):n,I="00000000-0000-0000-0000-000000000999",A=ge().filter(R=>R.id!==I).filter(R=>{var bs,vn;const we=o.find(X=>X.id===R.createdBy),Ce=o.find(X=>X.id===R.assignedTo),Je=d.toLowerCase(),Ot=R.title.toLowerCase().includes(Je)||R.description.toLowerCase().includes(Je)||(((bs=we==null?void 0:we.name)==null?void 0:bs.toLowerCase().includes(Je))??!1)||(((vn=Ce==null?void 0:Ce.name)==null?void 0:vn.toLowerCase().includes(Je))??!1)||R.tags.some(X=>X.toLowerCase().includes(Je)),Ie=w==="all"||R.status===w;return Ot&&Ie}),$=h(),q=$.map(R=>A.find(we=>we.id===R)).filter(Boolean),J=A.filter(R=>!$.includes(R.id)),re=[...q,...J];console.log("userTickets:",re.map(R=>({id:R.id,title:R.title,unread:b(R.id,r.id)}))),console.log("Total unread (sidebar):",x(r.id));const Ke=async()=>{if(r){console.log("Marcando todos los chats como leídos...");for(const R of re)console.log("Marcando como leído:",R.id,R.title),await y(R.id,r.id);await m(),alert("Todos los chats marcados como leídos"),console.log("Después de marcar todos como leídos, total unread:",x(r.id))}},it=R=>{const Ce=new Date().getTime()-R.getTime(),Je=Math.floor(Ce/(1e3*60)),Ot=Math.floor(Ce/(1e3*60*60)),Ie=Math.floor(Ce/(1e3*60*60*24));return Je<1?"Ahora":Je<60?`${Je}m`:Ot<24?`${Ot}h`:Ie<7?`${Ie}d`:new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit"}).format(R)},Se=R=>{switch(R){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},Tr=R=>{switch(R){case"open":return"text-red-600 bg-red-50";case"in-progress":return"text-yellow-600 bg-yellow-50";case"resolved":return"text-green-600 bg-green-50";case"closed":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},Sf=T?ep.createPortal(i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Asignar técnico"}),F.length===0?i.jsx("div",{className:"text-gray-500 mb-4",children:"No hay técnicos disponibles"}):i.jsx("div",{className:"space-y-2 mb-4",children:F.map(R=>i.jsx("button",{className:"block w-full text-left px-4 py-2 rounded hover:bg-blue-100",disabled:M,onClick:async()=>{P(!0),await p(T,{assignedTo:R.id}),P(!1),z(null),j(null)},children:R.name},R.id))}),i.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-xl",onClick:()=>z(null),children:"×"})]})}),document.body):null;return i.jsxs("div",{className:"bg-white border-r border-gray-200 w-80 flex-shrink-0 flex flex-col h-full",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[re.some(R=>b(R.id,r.id)>0)&&i.jsx("button",{onClick:Ke,className:"text-xs text-green-700 bg-green-100 border border-green-200 rounded px-3 py-1 font-semibold shadow-sm hover:bg-green-200 transition-all ml-auto",children:"Marcar todos los chats como leídos"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-3",children:i.jsx(_r,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Chats"}),i.jsxs("p",{className:"text-xs text-gray-600",children:[re.length," conversaciones"]}),re.every(R=>b(R.id,r.id)===0)&&i.jsxs("div",{className:"flex items-center mt-1 text-green-600 text-xs font-semibold",children:[i.jsx("span",{className:"mr-1",children:"✅"})," Todos los chats están leídos"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 hover:bg-white hover:bg-opacity-50 rounded-lg transition-colors",children:i.jsx(Et,{className:"w-4 h-4 text-gray-600"})}),i.jsx("button",{className:"p-2 hover:bg-white hover:bg-opacity-50 rounded-lg transition-colors",children:i.jsx(Fo,{className:"w-4 h-4 text-gray-600"})})]})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(Oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Buscar conversaciones...",value:d,onChange:R=>f(R.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm placeholder-gray-500"})]}),i.jsx("div",{className:"flex space-x-1 bg-white rounded-lg p-1",children:[{key:"all",label:"Todos"},{key:"open",label:"Abiertos"},{key:"in-progress",label:"En Progreso"},{key:"closed",label:"Cerrados"}].map(R=>i.jsx("button",{onClick:()=>C(R.key),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${w===R.key?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:R.label},R.key))})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:re.length===0?i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(_r,{className:"w-8 h-8 text-gray-300"})}),i.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No hay conversaciones"}),i.jsx("p",{className:"text-xs text-gray-500",children:d?"No se encontraron resultados":"Las conversaciones aparecerán aquí"})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:re.map(R=>{var vn;const we=b(R.id,r.id),Ce=v[R.id],Je=t===R.id,Ot=o.find(X=>X.id===R.assignedTo),Ie=Ce==null?void 0:Ce.lastMessage,bs=(Ie==null?void 0:Ie.content)||((vn=Ie==null?void 0:Ie.attachments)!=null&&vn.length?`📎 ${Ie.attachments.length} archivo(s)`:"Haz clic para iniciar conversación");return i.jsxs("div",{role:"button",tabIndex:0,onClick:()=>e(R.id),onKeyPress:X=>{X.key==="Enter"&&e(R.id)},className:`w-full text-left p-4 hover:bg-gray-50 transition-all duration-200 relative group cursor-pointer ${Je?"bg-blue-50 border-r-2 border-blue-600":""}`,children:[i.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${Se(R.priority)}`}),i.jsxs("div",{className:"ml-2",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("h3",{className:`text-sm font-semibold truncate ${Je?"text-blue-900":"text-gray-900"}`,children:R.title}),R.priority==="urgent"&&i.jsx(Wx,{className:"w-3 h-3 text-red-500 fill-current"})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Tr(R.status)}`,children:[R.status==="open"&&"Abierto",R.status==="in-progress"&&"En Progreso",R.status==="resolved"&&"Resuelto",R.status==="closed"&&"Cerrado"]}),i.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:R.category})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[we>0&&i.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full min-w-[18px] text-center font-medium",children:we>99?"99+":we}),i.jsx("span",{className:"text-xs text-gray-500",children:Ce!=null&&Ce.lastMessage?it(Ce.lastMessage.timestamp):it(R.updatedAt)})]}),Ot&&i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs text-white font-medium",children:Ot.name.charAt(0)})}),i.jsx("span",{className:"text-xs text-gray-700 font-medium",children:Ot.name})]})]})]}),i.jsx("div",{className:"mb-2",children:i.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 leading-relaxed",children:bs})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-xs text-gray-400 font-mono",children:["#",R.id.slice(0,6)]}),i.jsx("span",{className:"text-xs text-gray-500",children:it(Ie?Ie.timestamp:R.updatedAt)}),R.tags.length>0&&i.jsxs("div",{className:"flex space-x-1",children:[R.tags.slice(0,2).map((X,Cf)=>i.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:["#",X]},Cf)),R.tags.length>2&&i.jsxs("span",{className:"text-xs text-gray-500",children:["+",R.tags.length-2]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",title:u(R.id)?"Desanclar ticket":"Anclar ticket",onClick:X=>{X.stopPropagation(),u(R.id)?c(R.id):l(R.id)},children:i.jsx(Dx,{className:`w-3 h-3 ${u(R.id)?"text-blue-600 fill-blue-600":"text-gray-400"}`})}),r.role==="admin"&&i.jsxs("div",{className:"relative inline-block",children:[i.jsx("button",{className:"p-1 hover:bg-gray-200 rounded",onClick:X=>{X.stopPropagation(),j(k===R.id?null:R.id)},children:i.jsx(Fo,{className:"w-3 h-3 text-gray-400"})}),k===R.id&&i.jsxs("div",{ref:N,className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow-lg z-50",children:[i.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",onClick:X=>{X.stopPropagation(),z(R.id)},children:"Asignar"}),i.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",onClick:X=>{X.stopPropagation(),p(R.id,{status:"in-progress"}),j(null)},children:"En progreso"}),i.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",onClick:X=>{X.stopPropagation(),p(R.id,{status:"resolved"}),j(null)},children:"Resuelto"}),i.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",onClick:X=>{X.stopPropagation(),p(R.id,{status:"closed"}),j(null)},children:"Cerrado"}),i.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:async X=>{X.stopPropagation(),j(null),window.confirm("¿Estás seguro de que deseas eliminar este ticket? Esta acción no se puede deshacer.")&&await g(R.id)},children:"Eliminar"})]})]})]})]})]})]},R.id)})})}),i.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("span",{children:[re.filter(R=>R.status==="open").length," abiertos"]}),i.jsxs("span",{children:[re.filter(R=>b(R.id,r.id)>0).length," no leídos"]}),i.jsxs("span",{children:[re.filter(R=>R.priority==="urgent").length," urgentes"]})]})}),Sf]})}function oy({attachment:t,onClose:e}){var x;const[r,n]=_.useState(1),[s,a]=_.useState(0),[o,l]=_.useState(!1),c=()=>{const y=document.createElement("a");y.href=t.url,y.download=t.name,y.target="_blank",document.body.appendChild(y),y.click(),document.body.removeChild(y)},u=()=>{n(y=>Math.min(y+.25,3))},h=()=>{n(y=>Math.max(y-.25,.25))},p=()=>{a(y=>(y+90)%360)},g=()=>{l(!o)},b=y=>{if(y===0)return"0 Bytes";const m=1024,d=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(y)/Math.log(m));return parseFloat((y/Math.pow(m,f)).toFixed(2))+" "+d[f]},v=()=>t.type.startsWith("image/")?i.jsx("div",{className:"flex items-center justify-center h-full overflow-auto",children:i.jsx("img",{src:t.url,alt:t.name,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${r}) rotate(${s}deg)`,transformOrigin:"center"},onError:y=>{y.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBMMTMwIDEwMEg3MEwxMDAgNzBaIiBmaWxsPSIjOUI5QkEwIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNDAiIHN0cm9rZT0iIzlCOUJBMCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOUI5QkEwIiBmb250LXNpemU9IjEyIj5JbWFnZW4gbm8gZGlzcG9uaWJsZTwvdGV4dD4KPHN2Zz4="}})}):t.type.includes("pdf")?i.jsx("div",{className:"h-full",children:i.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.name})}):t.type.includes("text")?i.jsx("div",{className:"p-6 bg-gray-50 rounded-lg h-full overflow-auto",children:i.jsxs("div",{className:"bg-white p-4 rounded border",children:[i.jsx("p",{className:"text-gray-600 text-center",children:"Vista previa de archivo de texto"}),i.jsx("p",{className:"text-sm text-gray-500 mt-2 text-center",children:"Descarga el archivo para ver su contenido completo"})]})}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(en,{className:"w-10 h-10 text-gray-400"})}),i.jsx("p",{className:"text-gray-600 mb-4 text-lg font-medium",children:"No se puede previsualizar este tipo de archivo"}),i.jsxs("p",{className:"text-gray-500 mb-6",children:["Tipo: ",t.type]}),i.jsxs("button",{onClick:c,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[i.jsx(en,{className:"w-5 h-5 mr-2"}),"Descargar archivo"]})]})});return i.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 ${o?"p-0":"p-4"}`,children:i.jsxs("div",{className:`bg-white rounded-lg flex flex-col ${o?"w-full h-full rounded-none":"max-w-6xl max-h-[90vh] w-full"}`,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-t-lg",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[b(t.size)," • ",t.type]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[t.type.startsWith("image/")&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:h,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Alejar",children:i.jsx(Zx,{className:"w-5 h-5"})}),i.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[Math.round(r*100),"%"]}),i.jsx("button",{onClick:u,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Acercar",children:i.jsx(_f,{className:"w-5 h-5"})}),i.jsx("button",{onClick:p,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Rotar",children:i.jsx(Bo,{className:"w-5 h-5"})})]}),i.jsx("button",{onClick:g,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:o?"Salir de pantalla completa":"Pantalla completa",children:o?i.jsx(Mx,{className:"w-5 h-5"}):i.jsx(Lx,{className:"w-5 h-5"})}),i.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Descargar",children:i.jsx(en,{className:"w-5 h-5"})}),i.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Cerrar",children:i.jsx(vr,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50",children:v()}),i.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[i.jsxs("span",{children:["Subido: ",new Date(t.uploadedAt).toLocaleString("es-ES")]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("span",{children:["Tipo: ",((x=t.type.split("/")[1])==null?void 0:x.toUpperCase())||"UNKNOWN"]}),i.jsx("button",{onClick:c,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Descargar archivo"})]})]})})]})})}function ly({message:t,isFirst:e=!1,isLast:r=!1}){const{currentUser:n}=ce(),{users:s}=st(),{deleteMessage:a}=or(),[o,l]=_.useState(null),[c,u]=_.useState(!1),[h,p]=_.useState(!1),[g,b]=_.useState(null),v=s.find(N=>N.id===t.senderId),x=(n==null?void 0:n.id)===t.senderId,y=x||(n==null?void 0:n.role)==="technician"||(n==null?void 0:n.role)==="admin",m=N=>new Intl.DateTimeFormat("es-ES",{hour:"2-digit",minute:"2-digit"}).format(N),d=N=>new Intl.DateTimeFormat("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(N),f=N=>N.startsWith("image/")?i.jsx(gf,{className:"w-5 h-5"}):N.includes("pdf")?i.jsx(pf,{className:"w-5 h-5"}):N.includes("video/")?i.jsx(Gn,{className:"w-5 h-5"}):N.includes("audio/")?i.jsx(Gn,{className:"w-5 h-5"}):i.jsx(Gn,{className:"w-5 h-5"}),w=N=>N.startsWith("image/")?"bg-green-100 text-green-700 border-green-200":N.includes("pdf")?"bg-red-100 text-red-700 border-red-200":N.includes("video/")?"bg-purple-100 text-purple-700 border-purple-200":N.includes("audio/")?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200",C=N=>N.startsWith("image/")||N.includes("pdf")||N.includes("text"),E=N=>{if(N===0)return"0 Bytes";const T=1024,z=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(N)/Math.log(T));return parseFloat((N/Math.pow(T,F)).toFixed(2))+" "+z[F]},k=async N=>{try{const T=document.createElement("a");T.href=N.url,T.download=N.name,T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)}catch(T){console.error("Error downloading file:",T),alert("Error al descargar el archivo")}},j=async N=>{if(!y){alert("No tienes permisos para eliminar este archivo");return}if(window.confirm("¿Estás seguro de que quieres eliminar este archivo?")){b(N);try{let T=[];t.attachments&&(T=t.attachments.filter(ge=>ge.id!==N),t.attachments=T);const{error:z}=await B.from("chat_messages").update({attachments:T}).eq("id",t.id);if(z){alert("Error actualizando el mensaje en la base de datos: "+z.message);return}const F=document.createElement("div");F.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",F.textContent="Archivo eliminado",document.body.appendChild(F),setTimeout(()=>{document.body.contains(F)&&document.body.removeChild(F)},2e3)}catch(T){console.error("Error deleting attachment:",T);const z=document.createElement("div");z.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",z.textContent="Error al eliminar archivo",document.body.appendChild(z),setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},3e3)}finally{b(null)}}},O=()=>{window.confirm("¿Estás seguro de que quieres eliminar este mensaje?")&&(a(t.ticketId,t.id),u(!1))},S=()=>{navigator.clipboard.writeText(t.content),u(!1),alert("Mensaje copiado al portapapeles")},M=()=>{p(!h)},P=N=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:N.url,alt:N.name,className:"max-w-xs max-h-48 rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>l(N.id),onError:T=>{T.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBMMTMwIDEwMEg3MEwxMDAgNzBaIiBmaWxsPSIjOUI5QkEwIi8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNDAiIHN0cm9rZT0iIzlCOUJBMCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOUI5QkEwIiBmb250LXNpemU9IjEyIj5JbWFnZW4gbm8gZGlzcG9uaWJsZTwvdGV4dD4KPHN2Zz4="}}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 rounded-lg transition-all duration-200 flex items-center justify-center",children:i.jsx(_f,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]});return i.jsxs("div",{className:`flex ${x?"justify-end":"justify-start"} group relative mb-3`,children:[i.jsxs("div",{className:`flex max-w-[70%] ${x?"flex-row-reverse":"flex-row"} items-end space-x-2`,children:[!x&&r&&i.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-xs text-white font-medium",children:(v==null?void 0:v.name.charAt(0))||"?"})}),!x&&!r&&i.jsx("div",{className:"w-7 h-7 flex-shrink-0"}),i.jsxs("div",{className:`relative ${x?"mr-2":"ml-2"}`,children:[!x&&e&&i.jsxs("div",{className:"mb-1 ml-2",children:[i.jsx("span",{className:"text-xs font-semibold text-gray-700",children:v==null?void 0:v.name}),i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:(v==null?void 0:v.role)==="technician"?"Técnico":(v==null?void 0:v.role)==="admin"?"Administrador":"Usuario"})]}),i.jsxs("div",{className:`relative rounded-xl px-3 py-2 shadow-sm ${x?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"bg-white text-gray-900 border border-gray-200"} ${e&&r?"":e?x?"rounded-br-md":"rounded-bl-md":r?x?"rounded-tr-md":"rounded-tl-md":x?"rounded-r-md":"rounded-l-md"}`,children:[t.content&&i.jsx("div",{className:"whitespace-pre-wrap break-words text-sm leading-normal",children:t.content}),t.attachments&&t.attachments.length>0&&i.jsx("div",{className:`${t.content?"mt-2":""} space-y-2`,children:t.attachments.map(N=>{var T;return i.jsxs("div",{className:"space-y-1",children:[N.type.startsWith("image/")&&i.jsxs("div",{className:"space-y-1",children:[P(N),i.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border transition-colors ${x?"border-blue-400 bg-blue-500 hover:bg-blue-400":"border-gray-200 bg-gray-50 hover:bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("div",{className:`p-1 rounded mr-2 ${w(N.type)}`,children:f(N.type)}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-xs font-medium truncate ${x?"text-white":"text-gray-900"}`,children:N.name}),i.jsx("p",{className:`text-xs ${x?"text-blue-100":"text-gray-500"}`,children:E(N.size)})]})]}),i.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[i.jsx("button",{onClick:()=>l(N.id),className:`p-1 rounded transition-colors ${x?"hover:bg-blue-400 text-blue-100":"hover:bg-gray-200 text-gray-600"}`,title:"Vista previa",children:i.jsx(Ri,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>k(N),className:`p-1 rounded transition-colors ${x?"hover:bg-blue-400 text-blue-100":"hover:bg-gray-200 text-gray-600"}`,title:"Descargar",children:i.jsx(en,{className:"w-3.5 h-3.5"})}),y&&i.jsx("button",{onClick:()=>j(N.id),disabled:g===N.id,className:`p-1 rounded transition-colors ${x?"hover:bg-red-500 text-blue-100":"hover:bg-red-100 text-red-600"} disabled:opacity-50`,title:"Eliminar archivo",children:g===N.id?i.jsx(Bo,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(tn,{className:"w-3.5 h-3.5"})})]})]})]}),!N.type.startsWith("image/")&&i.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg border transition-colors ${x?"border-blue-400 bg-blue-500 hover:bg-blue-400":"border-gray-200 bg-gray-50 hover:bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("div",{className:`p-1.5 rounded mr-2 ${w(N.type)}`,children:f(N.type)}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-sm font-medium truncate ${x?"text-white":"text-gray-900"}`,children:N.name}),i.jsxs("p",{className:`text-xs ${x?"text-blue-100":"text-gray-500"}`,children:[E(N.size)," • ",((T=N.type.split("/")[1])==null?void 0:T.toUpperCase())||"FILE"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[C(N.type)&&i.jsx("button",{onClick:()=>l(N.id),className:`p-1 rounded transition-colors ${x?"hover:bg-blue-400 text-blue-100":"hover:bg-gray-200 text-gray-600"}`,title:"Vista previa",children:i.jsx(Ri,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>k(N),className:`p-1 rounded transition-colors ${x?"hover:bg-blue-400 text-blue-100":"hover:bg-gray-200 text-gray-600"}`,title:"Descargar",children:i.jsx(en,{className:"w-3.5 h-3.5"})}),y&&i.jsx("button",{onClick:()=>j(N.id),disabled:g===N.id,className:`p-1 rounded transition-colors ${x?"hover:bg-red-500 text-blue-100":"hover:bg-red-100 text-red-600"} disabled:opacity-50`,title:"Eliminar archivo",children:g===N.id?i.jsx(Bo,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(tn,{className:"w-3.5 h-3.5"})})]})]})]},N.id)})}),i.jsxs("div",{className:`absolute top-1 ${x?"left-1":"right-1"} opacity-0 group-hover:opacity-100 transition-opacity`,children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:M,className:`p-0.5 rounded-full transition-colors ${h?"text-red-500 bg-red-50":x?"text-blue-100 hover:bg-blue-500":"text-gray-400 hover:bg-gray-100"}`,title:"Me gusta",children:i.jsx(Ix,{className:`w-3 h-3 ${h?"fill-current":""}`})}),i.jsx("button",{onClick:()=>u(!c),className:`p-1 rounded-full transition-colors ${x?"text-blue-100 hover:bg-blue-500":"text-gray-400 hover:bg-gray-100"}`,title:"Más opciones",children:i.jsx(Fo,{className:"w-3 h-3"})})]}),c&&i.jsxs("div",{className:"absolute top-6 right-0 bg-white border border-gray-200 rounded-lg shadow-xl z-20 min-w-[140px] py-1",children:[i.jsxs("button",{onClick:()=>{},className:"w-full text-left px-2 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center",children:[i.jsx(zx,{className:"w-3 h-3 mr-2"}),"Responder"]}),i.jsxs("button",{onClick:S,className:"w-full text-left px-2 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center",children:[i.jsx(Cx,{className:"w-3 h-3 mr-2"}),"Copiar texto"]}),x&&i.jsxs("button",{onClick:()=>{},className:"w-full text-left px-2 py-1.5 text-xs text-gray-700 hover:bg-gray-50 flex items-center",children:[i.jsx(wf,{className:"w-3 h-3 mr-2"}),"Editar"]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-gray-100 my-1"}),i.jsxs("button",{onClick:O,className:"w-full text-left px-2 py-1.5 text-xs text-red-600 hover:bg-red-50 flex items-center",children:[i.jsx(tn,{className:"w-3 h-3 mr-2"}),"Eliminar mensaje"]})]})]})]})]}),r&&i.jsxs("div",{className:`mt-0.5 text-xs text-gray-400 ${x?"text-right":"text-left"} px-1`,children:[i.jsx("span",{title:d(t.timestamp),children:m(t.timestamp)}),x&&i.jsx("span",{className:"ml-1 text-blue-500",children:"✓✓"})]})]})]}),o&&(()=>{var T;const N=(T=t.attachments)==null?void 0:T.find(z=>z.id===o);return N?i.jsx(oy,{attachment:N,onClose:()=>l(null)}):null})(),c&&i.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)})]})}function cy({onUpload:t,onClose:e}){const{currentUser:r}=ce(),[n,s]=_.useState(!1),[a,o]=_.useState([]),[l,c]=_.useState({}),u=_.useRef(null),h=f=>{f.preventDefault(),f.stopPropagation(),f.type==="dragenter"||f.type==="dragover"?s(!0):f.type==="dragleave"&&s(!1)},p=f=>{f.preventDefault(),f.stopPropagation(),s(!1);const w=Array.from(f.dataTransfer.files);b(w)},g=f=>{if(f.target.files){const w=Array.from(f.target.files);b(w)}},b=f=>{const w=f.filter(C=>C.size>10485760?(alert(`El archivo "${C.name}" es demasiado grande. Máximo 10MB.`),!1):!0);o(C=>[...C,...w]),w.forEach(C=>{if(C.type.startsWith("image/")){const E=new FileReader;E.onload=k=>{c(j=>{var O;return{...j,[C.name]:(O=k.target)==null?void 0:O.result}})},E.readAsDataURL(C)}})},v=f=>{const w=a[f];o(C=>C.filter((E,k)=>k!==f)),r&&Be({user_id:r.id,user_name:r.name,action_type:"eliminar_archivo",details:{nombre:w.name,size:w.size,type:w.type}}),l[w.name]&&c(C=>{const E={...C};return delete E[w.name],E})},x=f=>f.startsWith("image/")?i.jsx(gf,{className:"w-5 h-5 text-green-600"}):f.includes("pdf")?i.jsx(pf,{className:"w-5 h-5 text-red-600"}):f.includes("video/")?i.jsx(Gn,{className:"w-5 h-5 text-purple-600"}):f.includes("audio/")?i.jsx(Gn,{className:"w-5 h-5 text-yellow-600"}):i.jsx(Tx,{className:"w-5 h-5 text-gray-600"}),y=f=>{if(f===0)return"0 Bytes";const w=1024,C=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(f)/Math.log(w));return parseFloat((f/Math.pow(w,E)).toFixed(2))+" "+C[E]},m=async()=>{const f=[];for(const w of a){const C=`${Date.now()}_${w.name}`,{data:E,error:k}=await B.storage.from("attachments").upload(C,w);if(k){alert(`Error subiendo el archivo ${w.name}: ${k.message}`);continue}const{data:j}=B.storage.from("attachments").getPublicUrl(C),O=(j==null?void 0:j.publicUrl)||"",{data:S,error:M}=await B.from("file_attachments").insert({message_id:null,name:w.name,size:w.size,type:w.type,url:O,uploaded_by:r==null?void 0:r.id,created_at:new Date().toISOString()}).select().single();if(M){alert(`Error guardando el archivo en la base de datos: ${M.message}`);continue}r&&Be({user_id:r.id,user_name:r.name,action_type:"subir_archivo",details:{nombre:w.name,size:w.size,type:w.type,url:O}}),f.push({id:S.id,name:w.name,size:w.size,type:w.type,url:O,uploadedBy:(r==null?void 0:r.id)||"",uploadedAt:new Date})}t(f),e()},d=()=>{var f;(f=u.current)==null||f.click()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[70vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Adjuntar Archivos"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:i.jsx(vr,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${n?"border-blue-500 bg-blue-50 scale-105":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:p,children:[i.jsx(qx,{className:`w-12 h-12 mx-auto mb-3 transition-colors ${n?"text-blue-500":"text-gray-400"}`}),i.jsx("p",{className:"text-base font-medium text-gray-700 mb-2",children:n?"¡Suelta los archivos aquí!":"Arrastra archivos aquí"}),i.jsxs("p",{className:"text-gray-500 mb-4",children:["o"," ",i.jsx("button",{onClick:d,className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"selecciona archivos"})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Máximo 10MB por archivo • Imágenes, PDFs, documentos y más"}),i.jsx("input",{ref:u,type:"file",multiple:!0,onChange:g,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.rar"})]})}),a.length>0&&i.jsxs("div",{className:"px-4 pb-4 flex-1 overflow-hidden",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Archivos seleccionados (",a.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.map((f,w)=>{var C;return i.jsxs("div",{className:"flex items-center p-2 bg-gray-50 rounded border border-gray-200 hover:bg-gray-100 transition-colors",children:[i.jsx("div",{className:"flex-shrink-0 mr-3",children:l[f.name]?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:l[f.name],alt:f.name,className:"w-10 h-10 object-cover rounded"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 rounded transition-all duration-200 flex items-center justify-center",children:i.jsx(Ri,{className:"w-4 h-4 text-white opacity-0 hover:opacity-100"})})]}):i.jsx("div",{className:"w-10 h-10 bg-white rounded border border-gray-200 flex items-center justify-center",children:x(f.type)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:f.name}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[i.jsx("p",{className:"text-xs text-gray-500",children:y(f.size)}),i.jsx("span",{className:"text-xs text-gray-400",children:"•"}),i.jsx("p",{className:"text-xs text-gray-500",children:((C=f.type.split("/")[1])==null?void 0:C.toUpperCase())||"FILE"})]})]}),i.jsx("button",{onClick:()=>v(w),className:"flex-shrink-0 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Eliminar archivo",children:i.jsx(tn,{className:"w-3 h-3"})})]},w)})})]}),i.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[i.jsx("div",{className:"text-xs text-gray-600",children:a.length>0&&i.jsxs("span",{children:[a.length," archivo",a.length!==1?"s":""," seleccionado",a.length!==1?"s":""," • ",y(a.reduce((f,w)=>f+w.size,0))," total"]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:m,disabled:a.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Adjuntar ",a.length>0&&`(${a.length})`]})]})]})]})})}function bu({ticketId:t}){const{currentUser:e}=ce(),{messages:r,sendMessage:n,markAsRead:s,loadMessages:a,loading:o,error:l,playMessageSound:c,setMessages:u}=or(),{tickets:h,users:p}=st(),[g,b]=_.useState(""),[v,x]=_.useState(!1),[y,m]=_.useState([]),[d,f]=_.useState(!1);_.useState(!1);const w=_.useRef(null),C=_.useRef(null),E=_.useRef(null),k="00000000-0000-0000-0000-000000000999",j=t===k?null:h.find(I=>I.id===t),O=(r[t]||[]).filter(I=>I.ticketId===t),S=t===k?null:p.find(I=>I.id===(j==null?void 0:j.createdBy)),M=t===k?null:p.find(I=>I.id===(j==null?void 0:j.assignedTo));_.useEffect(()=>{if(!t||!e)return;console.log("🔄 ChatWindow - Suscribiéndose a cambios en tiempo real para ticket:",t);const I=B.channel(`chat:${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`ticket_id=eq.${t}`},A=>{console.log("🔄 ChatWindow - Nuevo mensaje en tiempo real:",A),A.new.sender_id!==e.id&&c(),u($=>{const q=$[t]||[];return q.some(J=>J.id===A.new.id)?$:{...$,[t]:[...q,{id:A.new.id,ticketId:A.new.ticket_id,senderId:A.new.sender_id,content:A.new.content,timestamp:new Date(A.new.created_at),attachments:A.new.attachments||[],isSystem:A.new.is_system||!1}]}})}).subscribe();return()=>{console.log("🔄 ChatWindow - Cancelando suscripción para ticket:",t),I.unsubscribe()}},[t,e,u,c]),_.useEffect(()=>{t&&(console.log("🔄 Cargando mensajes para ticket:",t),a(t))},[t,a]),_.useEffect(()=>{e&&t&&r[t]&&r[t].length>0&&s(t,e.id)},[t,e,r,s]),_.useEffect(()=>{w.current&&O.length>0&&w.current.scrollIntoView({behavior:"smooth"})},[O.length]),_.useEffect(()=>{E.current&&(E.current.style.height="auto",E.current.style.height=Math.min(E.current.scrollHeight,120)+"px")},[g]);const P=async I=>{if(I.preventDefault(),!(!g.trim()&&y.length===0||d)){f(!0);try{await n(t,g,y),b(""),m([]),x(!1)}catch(A){console.error("Error sending message:",A)}finally{f(!1)}}},N=I=>{m(A=>[...A,...I])},T=I=>{m(A=>A.filter($=>$.id!==I))},z=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),P(I))};if(!e||!j&&t!==k)return i.jsx("div",{className:"h-full flex items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:i.jsx(Ws,{className:"w-10 h-10 text-blue-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Selecciona una conversación"}),i.jsx("p",{className:"text-gray-600 max-w-sm",children:"Elige un ticket de la lista para comenzar a chatear y resolver problemas"})]})});const F=I=>{switch(I){case"open":return"bg-red-100 text-red-800 border-red-200";case"in-progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"resolved":return"bg-green-100 text-green-800 border-green-200";case"closed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ge=I=>{switch(I){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return i.jsxs("div",{className:"h-full flex flex-col bg-white",children:[i.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 shadow-sm",children:i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx(Px,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[t===k?i.jsx("h3",{className:"text-base font-bold text-gray-900 truncate",children:"Chat Privado (Administradores y Técnicos)"}):i.jsx("h3",{className:"text-base font-bold text-gray-900 truncate",children:j.title}),!t===k&&i.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[i.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["#",j.id.slice(0,6)]}),i.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${F(j.status)}`,children:[j.status==="open"&&"Abierto",j.status==="in-progress"&&"En Progreso",j.status==="resolved"&&"Resuelto",j.status==="closed"&&"Cerrado"]}),i.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${ge(j.priority)}`,children:[j.priority==="urgent"&&"Urgente",j.priority==="high"&&"Alta",j.priority==="medium"&&"Media",j.priority==="low"&&"Baja"]})]})]})]}),i.jsx("div",{className:"flex items-center space-x-2"})]}),!t===k&&i.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[i.jsxs("span",{children:["Por: ",i.jsx("span",{className:"font-medium text-gray-900",children:S==null?void 0:S.name})]}),M&&i.jsxs("span",{children:["• Asignado: ",i.jsx("span",{className:"font-medium text-blue-600",children:M.name})]})]}),i.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:j.category})]})]})}),i.jsx("div",{ref:C,className:"flex-1 overflow-y-auto bg-gradient-to-b from-gray-50 to-white p-3",children:o&&O.length===0?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(dn,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-3"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Cargando mensajes..."})]})}):l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Ws,{className:"w-8 h-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error cargando mensajes"}),i.jsx("p",{className:"text-red-600 max-w-sm mx-auto",children:l})]})}):O.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Ws,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"¡Inicia la conversación!"}),i.jsx("p",{className:"text-gray-600 max-w-sm mx-auto",children:"Envía el primer mensaje para comenzar a gestionar esta solicitud. El equipo municipal estará aquí para ayudarte."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-semibold text-blue-900 mb-1",children:"Chat de la Solicitud"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Comunícate directamente con el equipo municipal para gestionar esta solicitud."})]})]})}),O.map((I,A)=>i.jsx(ly,{message:I,isFirst:A===0||O[A-1].senderId!==I.senderId,isLast:A===O.length-1||O[A+1].senderId!==I.senderId},I.id)),i.jsx("div",{ref:w})]})}),y.length>0&&i.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-2 bg-gray-50",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(I=>i.jsxs("div",{className:"flex items-center bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs border border-blue-200",children:[i.jsx(xu,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"truncate max-w-[120px]",children:I.name}),i.jsx("button",{onClick:()=>T(I.id),className:"ml-1 text-blue-500 hover:text-blue-700 font-bold text-sm leading-none",children:"×"})]},I.id))})}),v&&i.jsx(cy,{onUpload:N,onClose:()=>x(!1)}),i.jsx("div",{className:"flex-shrink-0 bg-white border-t border-gray-200",children:i.jsx("div",{className:"p-3",children:i.jsxs("form",{onSubmit:P,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>x(!0),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",disabled:d,title:"Adjuntar archivo",children:i.jsx(xu,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("textarea",{ref:E,value:g,onChange:I=>b(I.target.value),onKeyDown:z,placeholder:"Mensaje...",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200 text-sm placeholder-gray-500",rows:1,disabled:d,style:{minHeight:"48px",maxHeight:"120px"}}),i.jsx("button",{type:"button",className:"absolute right-3 bottom-3 p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Emojis",disabled:d,children:i.jsx(Hx,{className:"w-4 h-4"})})]}),i.jsx("button",{type:"submit",disabled:!g.trim()&&y.length===0||d,className:"p-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center min-w-[40px] min-h-[40px] shadow-md hover:shadow-lg",title:"Enviar mensaje",children:d?i.jsx(dn,{className:"w-4 h-4 animate-spin"}):i.jsx(Ws,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[i.jsx("span",{children:"Enter para enviar • Shift+Enter nueva línea"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{type:"button",className:"hover:text-gray-600 transition-colors",title:"Mencionar usuario",children:"@"}),i.jsx("button",{type:"button",className:"hover:text-gray-600 transition-colors",title:"Comandos",children:"/"}),i.jsx("button",{type:"button",className:"hover:text-gray-600 transition-colors",title:"Formato",children:"**"})]})]})]})})})]})}function uy({onTicketClick:t}){const{currentUser:e}=ce(),{notifications:r,markAsRead:n,markAllAsRead:s,removeNotification:a}=Ai(),[,o]=_.useState(0);if(_.useEffect(()=>{const g=()=>{o(b=>b+1)};return window.addEventListener("notificationReceived",g),window.addEventListener("notificationRead",g),()=>{window.removeEventListener("notificationReceived",g),window.removeEventListener("notificationRead",g)}},[]),!e)return null;const l=r.filter(g=>g.userId===e.id),c=l.filter(g=>!g.isRead).length,u=g=>{switch(g){case"new-message":return i.jsx(_r,{className:"w-5 h-5 text-blue-600"});case"ticket-assigned":return i.jsx(jf,{className:"w-5 h-5 text-green-600"});case"ticket-updated":return i.jsx(Me,{className:"w-5 h-5 text-yellow-600"});case"ticket-created":return i.jsx(yr,{className:"w-5 h-5 text-purple-600"});default:return i.jsx(yn,{className:"w-5 h-5 text-gray-600"})}},h=g=>{const v=new Date().getTime()-g.getTime(),x=Math.floor(v/(1e3*60)),y=Math.floor(v/(1e3*60*60)),m=Math.floor(v/(1e3*60*60*24));return x<1?"Ahora mismo":x<60?`Hace ${x}m`:y<24?`Hace ${y}h`:`Hace ${m}d`},p=g=>{if(!g.isRead){n(g.id);const b=new CustomEvent("notificationRead");window.dispatchEvent(b)}a(g.id),t(g.ticketId)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notificaciones"}),c>0&&i.jsxs("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:[i.jsx(_x,{className:"w-4 h-4 mr-1"}),"Marcar todas como leídas"]})]}),l.length===0?i.jsxs("div",{className:"text-center py-12 text-green-600",children:[i.jsx("span",{className:"text-3xl",children:"✅"}),i.jsx("h3",{className:"text-lg font-semibold mt-2",children:"Todas las notificaciones están leídas"})]}):i.jsx("div",{className:"space-y-2",children:l.map(g=>i.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${g.isRead?"bg-white border-gray-200 hover:bg-gray-50":"bg-blue-50 border-blue-200 hover:bg-blue-100"}`,onClick:()=>p(g),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 mr-3",children:u(g.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:`text-sm font-medium ${g.isRead?"text-gray-900":"text-blue-900"}`,children:g.title}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-xs text-gray-500 mr-2",children:h(g.createdAt)}),!g.isRead&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})]}),i.jsx("p",{className:`text-sm mt-1 ${g.isRead?"text-gray-600":"text-blue-700"}`,children:g.message}),i.jsx("div",{className:"flex items-center mt-2",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 font-mono",children:["Ticket #",g.ticketId]})})]})]})},g.id))})]})}function dy(){const{currentUser:t}=ce(),{users:e,addUser:r,updateUser:n,deleteUser:s,loading:a}=st(),[o,l]=_.useState(!1),[c,u]=_.useState(null),[h,p]=_.useState(""),[g,b]=_.useState("all");if(Ye.useEffect(()=>{var d;console.log("👥 UserManagement - Estado:",{currentUser:t==null?void 0:t.email,usersCount:e.length,loading:a,hasUsers:e.length>0,firstUser:((d=e[0])==null?void 0:d.name)||"N/A"})},[e,t,a]),!t||t.role!=="admin")return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta sección"})});const v=e.filter(d=>{const f=d.name.toLowerCase().includes(h.toLowerCase())||d.email.toLowerCase().includes(h.toLowerCase()),w=g==="all"||d.role===g;return f&&w}),x=d=>{switch(d){case"admin":return"bg-purple-100 text-purple-800";case"technician":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=d=>{switch(d){case"admin":return"Administrador";case"technician":return"Técnico";case"user":return"Usuario";default:return d}},m=async d=>{try{if(console.log("💾 Guardando usuario:",d),c)await n(c.id,d);else{if(!d.password)throw new Error("La contraseña es requerida para nuevos usuarios");await r(d)}l(!1),u(null);const f=c?"Usuario actualizado exitosamente":"Usuario creado exitosamente",w=document.createElement("div");w.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",w.textContent=f,document.body.appendChild(w),setTimeout(()=>{document.body.contains(w)&&document.body.removeChild(w)},3e3)}catch(f){throw console.error("❌ Error guardando usuario:",f),f}};return i.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Usuarios"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Administra usuarios, roles y permisos del sistema"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center shadow-lg",children:[i.jsx(yf,{className:"w-5 h-5 mr-2"}),"Nuevo Usuario"]})]}),i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Oi,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:h,onChange:d=>p(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(zo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),i.jsxs("select",{value:g,onChange:d=>b(d.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white min-w-[180px]",children:[i.jsx("option",{value:"all",children:"Todos los roles"}),i.jsx("option",{value:"admin",children:"Administradores"}),i.jsx("option",{value:"technician",children:"Técnicos"}),i.jsx("option",{value:"user",children:"Usuarios"})]})]})]})}),a?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:i.jsx(Ho,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cargando usuarios..."}),i.jsx("p",{className:"text-gray-600",children:"Obteniendo datos del sistema local"})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(d=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-lg ${d.isOnline?"bg-green-500":"bg-gray-400"}`,children:d.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"ml-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.name}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${x(d.role)}`,children:y(d.role)})]})]}),i.jsx("div",{className:"flex items-center",children:d.isOnline?i.jsxs("div",{className:"flex items-center text-green-600",children:[i.jsx(Ho,{className:"w-5 h-5 mr-1"}),i.jsx("span",{className:"text-xs font-medium",children:"En línea"})]}):i.jsxs("div",{className:"flex items-center text-gray-400",children:[i.jsx(Gx,{className:"w-5 h-5 mr-1"}),i.jsx("span",{className:"text-xs font-medium",children:"Desconectado"})]})})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(xf,{className:"w-4 h-4 mr-3 text-gray-400"}),i.jsx("span",{className:"truncate",children:d.email})]}),d.phone&&i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Ux,{className:"w-4 h-4 mr-3 text-gray-400"}),i.jsx("span",{children:d.phone})]}),d.department&&i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-medium",children:"Departamento:"})," ",d.department]})]}),i.jsx("div",{className:"text-xs text-gray-500 mb-4 p-3 bg-gray-50 rounded-lg",children:d.isOnline?i.jsx("span",{className:"text-green-600 font-medium",children:"● Actualmente en línea"}):i.jsxs("span",{children:["Última actividad: ",new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(d.lastSeen)]})}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>u(d),className:"flex-1 bg-blue-50 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors flex items-center justify-center font-medium",children:[i.jsx(wf,{className:"w-4 h-4 mr-2"}),"Editar"]}),i.jsxs("button",{onClick:()=>{window.confirm(`¿Estás seguro de que quieres eliminar a ${d.name}?`)&&s(d.id)},className:"flex-1 bg-red-50 text-red-700 px-4 py-2 rounded-lg hover:bg-red-100 transition-colors flex items-center justify-center font-medium",disabled:d.id===t.id,children:[i.jsx(tn,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]},d.id))}),!a&&v.length===0&&i.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.length===0?i.jsx(Hl,{className:"w-8 h-8 text-red-400"}):i.jsx(Oi,{className:"w-8 h-8 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.length===0?"No hay usuarios en el sistema":"No se encontraron usuarios"}),i.jsx("p",{className:"text-gray-600",children:e.length===0?"Crea el primer usuario para comenzar":"Intenta ajustar los filtros de búsqueda o crear un nuevo usuario"})]}),(o||c)&&i.jsx(hy,{user:c,onClose:()=>{l(!1),u(null)},onSave:m})]})}function hy({user:t,onClose:e,onSave:r}){const[n,s]=_.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",role:(t==null?void 0:t.role)||"user",phone:(t==null?void 0:t.phone)||"",department:(t==null?void 0:t.department)||"",password:""}),[a,o]=_.useState(!1),[l,c]=_.useState(null),[u,h]=_.useState(!1),p=async g=>{g.preventDefault(),c(null),h(!0);try{const b={name:n.name,email:n.email,role:n.role,phone:n.phone,department:n.department};n.password&&(b.password=n.password),await r(b)}catch(b){console.error("Error saving user:",b);let v="Error al guardar el usuario";b.message&&(v=b.message),c(v)}finally{h(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t?"Editar Usuario":"Crear Nuevo Usuario"}),l&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[i.jsx(Hl,{className:"w-5 h-5 text-red-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-red-700 text-sm font-medium",children:"Error"}),i.jsx("p",{className:"text-red-600 text-sm mt-1",children:l})]})]}),i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre completo *"}),i.jsx("input",{type:"text",value:n.name,onChange:g=>s({...n,name:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:u,placeholder:"Ej: Juan Pérez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),i.jsx("input",{type:"email",value:n.email,onChange:g=>s({...n,email:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:u,placeholder:"usuario@empresa.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rol *"}),i.jsxs("select",{value:n.role,onChange:g=>s({...n,role:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u,children:[i.jsx("option",{value:"user",children:"Usuario"}),i.jsx("option",{value:"technician",children:"Técnico"}),i.jsx("option",{value:"admin",children:"Administrador"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t?"Nueva Contraseña (opcional)":"Contraseña *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:a?"text":"password",value:n.password,onChange:g=>s({...n,password:g.target.value}),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!t,placeholder:t?"Dejar vacío para mantener actual":"Mínimo 6 caracteres",disabled:u}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",disabled:u,children:a?i.jsx(Ex,{className:"w-5 h-5"}):i.jsx(Ri,{className:"w-5 h-5"})})]}),!t&&i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ingrese una contraseña segura para el nuevo usuario"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Teléfono"}),i.jsx("input",{type:"tel",value:n.phone,onChange:g=>s({...n,phone:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u,placeholder:"+52 55 1234 5678"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Departamento"}),i.jsx("input",{type:"text",value:n.department,onChange:g=>s({...n,department:g.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u,placeholder:"Ej: Servicios Públicos, Administración, Obras"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium",disabled:u,children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",disabled:u,children:u?"Guardando...":t?"Actualizar":"Crear Usuario"})]})]})]})})})}function fy(){const{currentUser:t}=ce(),{tickets:e,users:r}=st(),[n,s]=_.useState("30");if(_.useState("overview"),!t||t.role!=="admin"&&t.role!=="technician")return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta sección"})});const o=(()=>{const y=parseInt(n),m=new Date;return m.setDate(m.getDate()-y),e.filter(d=>d.createdAt>=m)})(),l=()=>{const y=o.length,m=o.filter(k=>k.status==="resolved").length,d=o.filter(k=>k.status==="in-progress").length,f=o.filter(k=>k.status==="open").length,w=y>0?(m/y*100).toFixed(1):"0",E=(o.filter(k=>k.status==="resolved").reduce((k,j)=>{const O=j.updatedAt.getTime()-j.createdAt.getTime();return k+O},0)/(m||1)/(1e3*60*60*24)).toFixed(1);return{total:y,resolved:m,inProgress:d,open:f,resolutionRate:w,avgResolutionTime:E}},c=()=>{const y={};return o.forEach(m=>{y[m.category]=(y[m.category]||0)+1}),Object.entries(y).sort((m,d)=>d[1]-m[1])},u=()=>{const y={urgent:0,high:0,medium:0,low:0};return o.forEach(m=>{y[m.priority]++}),y},h=()=>{const y={};return r.filter(d=>d.role==="technician").forEach(d=>{const f=o.filter(C=>C.assignedTo===d.id),w=f.filter(C=>C.status==="resolved");y[d.id]={name:d.name,assigned:f.length,resolved:w.length,rate:f.length>0?(w.length/f.length*100).toFixed(1):"0"}}),y},p=l(),g=c(),b=u(),v=h(),x=()=>{const y={period:`Últimos ${n} días`,generated:new Date().toISOString(),stats:p,categories:g,priorities:b,technicians:v},m=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),d=URL.createObjectURL(m),f=document.createElement("a");f.href=d,f.download=`reporte-tickets-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reportes y Análisis"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("select",{value:n,onChange:y=>s(y.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"7",children:"Últimos 7 días"}),i.jsx("option",{value:"30",children:"Últimos 30 días"}),i.jsx("option",{value:"90",children:"Últimos 90 días"}),i.jsx("option",{value:"365",children:"Último año"})]}),i.jsxs("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[i.jsx(en,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Tickets"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.total}),i.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Últimos ",n," días"]})]}),i.jsx("div",{className:"bg-blue-500 p-3 rounded-full",children:i.jsx(Pi,{className:"w-6 h-6 text-white"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Tasa de Resolución"}),i.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[p.resolutionRate,"%"]}),i.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[p.resolved," de ",p.total]})]}),i.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:i.jsx(bf,{className:"w-6 h-6 text-white"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Tiempo Promedio"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.avgResolutionTime}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"días para resolver"})]}),i.jsx("div",{className:"bg-yellow-500 p-3 rounded-full",children:i.jsx(Xt,{className:"w-6 h-6 text-white"})})]})}),i.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Técnicos Activos"}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Object.keys(v).length}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"trabajando en tickets"})]}),i.jsx("div",{className:"bg-purple-500 p-3 rounded-full",children:i.jsx(Et,{className:"w-6 h-6 text-white"})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tickets por Categoría"}),i.jsx("div",{className:"space-y-3",children:g.map(([y,m],d)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:y}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${m/p.total*100}%`}})}),i.jsx("span",{className:"text-sm font-medium text-gray-900 w-8",children:m})]})]},y))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribución por Prioridad"}),i.jsx("div",{className:"space-y-3",children:Object.entries(b).map(([y,m])=>{const d={urgent:"bg-red-600",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-green-500"},f={urgent:"Urgente",high:"Alta",medium:"Media",low:"Baja"};return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:f[y]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:`${d[y]} h-2 rounded-full`,style:{width:`${p.total>0?m/p.total*100:0}%`}})}),i.jsx("span",{className:"text-sm font-medium text-gray-900 w-8",children:m})]})]},y)})})]})]}),t.role==="admin"&&i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rendimiento de Técnicos"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Técnico"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Asignados"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Resueltos"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tasa de Resolución"})]})}),i.jsx("tbody",{children:Object.entries(v).map(([y,m])=>i.jsxs("tr",{className:"border-b border-gray-100",children:[i.jsx("td",{className:"py-3 px-4 text-gray-900",children:m.name}),i.jsx("td",{className:"py-3 px-4 text-gray-600",children:m.assigned}),i.jsx("td",{className:"py-3 px-4 text-gray-600",children:m.resolved}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${parseFloat(m.rate)>=80?"bg-green-100 text-green-800":parseFloat(m.rate)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[m.rate,"%"]})})]},y))})]})})]})]})}function my(){const{currentUser:t}=ce(),[e,r]=_.useState({notifications:{email:!0,push:!0,sound:!0,desktop:!1},system:{autoAssign:!0,escalationTime:24,workingHours:"09:00-18:00",timezone:"America/Mexico_City"},security:{sessionTimeout:30,passwordExpiry:90,twoFactor:!1,loginAttempts:5},appearance:{theme:"light",language:"es",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}});if(!t||t.role!=="admin")return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta sección"})});const n=()=>{console.log("Saving settings:",e),t&&Be({user_id:t.id,user_name:t.name,action_type:"cambio_configuracion",details:{settings:e}}),alert("Configuración guardada exitosamente")},s=(a,o,l)=>{r(c=>({...c,[a]:{...c[a],[o]:l}}))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración del Sistema"}),i.jsxs("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[i.jsx(Fx,{className:"w-4 h-4 mr-2"}),"Guardar Cambios"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(yn,{className:"w-5 h-5 text-blue-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notificaciones"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notificaciones por email"}),i.jsx("input",{type:"checkbox",checked:e.notifications.email,onChange:a=>s("notifications","email",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notificaciones push"}),i.jsx("input",{type:"checkbox",checked:e.notifications.push,onChange:a=>s("notifications","push",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sonidos de notificación"}),i.jsx("input",{type:"checkbox",checked:e.notifications.sound,onChange:a=>s("notifications","sound",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notificaciones de escritorio"}),i.jsx("input",{type:"checkbox",checked:e.notifications.desktop,onChange:a=>s("notifications","desktop",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Li,{className:"w-5 h-5 text-green-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sistema"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Asignación automática"}),i.jsx("input",{type:"checkbox",checked:e.system.autoAssign,onChange:a=>s("system","autoAssign",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo de escalación (horas)"}),i.jsx("input",{type:"number",value:e.system.escalationTime,onChange:a=>s("system","escalationTime",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horario laboral"}),i.jsx("input",{type:"text",value:e.system.workingHours,onChange:a=>s("system","workingHours",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zona horaria"}),i.jsxs("select",{value:e.system.timezone,onChange:a=>s("system","timezone",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"America/Mexico_City",children:"Ciudad de México"}),i.jsx("option",{value:"America/New_York",children:"Nueva York"}),i.jsx("option",{value:"Europe/Madrid",children:"Madrid"}),i.jsx("option",{value:"Asia/Tokyo",children:"Tokio"})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(hn,{className:"w-5 h-5 text-red-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Seguridad"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiempo de sesión (minutos)"}),i.jsx("input",{type:"number",value:e.security.sessionTimeout,onChange:a=>s("security","sessionTimeout",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiración de contraseña (días)"}),i.jsx("input",{type:"number",value:e.security.passwordExpiry,onChange:a=>s("security","passwordExpiry",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Autenticación de dos factores"}),i.jsx("input",{type:"checkbox",checked:e.security.twoFactor,onChange:a=>s("security","twoFactor",a.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intentos de login máximos"}),i.jsx("input",{type:"number",value:e.security.loginAttempts,onChange:a=>s("security","loginAttempts",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx($x,{className:"w-5 h-5 text-purple-600 mr-2"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Apariencia"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tema"}),i.jsxs("select",{value:e.appearance.theme,onChange:a=>s("appearance","theme",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"light",children:"Claro"}),i.jsx("option",{value:"dark",children:"Oscuro"}),i.jsx("option",{value:"auto",children:"Automático"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),i.jsxs("select",{value:e.appearance.language,onChange:a=>s("appearance","language",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"es",children:"Español"}),i.jsx("option",{value:"en",children:"English"}),i.jsx("option",{value:"fr",children:"Français"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de fecha"}),i.jsxs("select",{value:e.appearance.dateFormat,onChange:a=>s("appearance","dateFormat",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),i.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),i.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de hora"}),i.jsxs("select",{value:e.appearance.timeFormat,onChange:a=>s("appearance","timeFormat",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"24h",children:"24 horas"}),i.jsx("option",{value:"12h",children:"12 horas (AM/PM)"})]})]})]})]})]})]})}function py(){const{currentUser:t}=ce(),[e,r]=_.useState(null),[n,s]=_.useState(null),[a,o]=_.useState([]),[l,c]=_.useState(!1),[u,h]=_.useState(null),p=async()=>{c(!0),o([]);const v=[{name:"Conexión básica a Supabase",status:"pending",message:"Probando..."},{name:"Lectura de tabla users",status:"pending",message:"Probando..."},{name:"Lectura de tabla tickets",status:"pending",message:"Probando..."},{name:"Lectura de tabla chat_messages",status:"pending",message:"Probando..."},{name:"Lectura de tabla notifications",status:"pending",message:"Probando..."},{name:"Inserción de datos de prueba",status:"pending",message:"Probando..."}];o([...v]);try{const x=Date.now(),y=await yx(),m=Date.now()-x;v[0]={name:"Conexión básica a Supabase",status:y?"success":"error",message:y?`Conectado exitosamente (${m}ms)`:"No se pudo conectar",duration:m},r(y)}catch(x){v[0]={name:"Conexión básica a Supabase",status:"error",message:`Error: ${x.message}`},r(!1)}o([...v]);try{const x=Date.now(),y=await K.getUsers(),m=Date.now()-x;v[1]={name:"Lectura de tabla users",status:"success",message:`${y.length} usuarios encontrados (${m}ms)`,duration:m}}catch(x){v[1]={name:"Lectura de tabla users",status:"error",message:`Error: ${x.message}`}}o([...v]);try{const x=Date.now(),y=await K.getTickets(),m=Date.now()-x;v[2]={name:"Lectura de tabla tickets",status:"success",message:`${y.length} tickets encontrados (${m}ms)`,duration:m}}catch(x){v[2]={name:"Lectura de tabla tickets",status:"error",message:`Error: ${x.message}`}}o([...v]);try{const x=Date.now(),{data:y,error:m}=await B.from("chat_messages").select("count").limit(1),d=Date.now()-x;if(m)throw m;v[3]={name:"Lectura de tabla chat_messages",status:"success",message:`Tabla accesible (${d}ms)`,duration:d}}catch(x){v[3]={name:"Lectura de tabla chat_messages",status:"error",message:`Error: ${x.message}`}}o([...v]);try{const x=Date.now(),{data:y,error:m}=await B.from("notifications").select("count").limit(1),d=Date.now()-x;if(m)throw m;v[4]={name:"Lectura de tabla notifications",status:"success",message:`Tabla accesible (${d}ms)`,duration:d}}catch(x){v[4]={name:"Lectura de tabla notifications",status:"error",message:`Error: ${x.message}`}}if(o([...v]),(t==null?void 0:t.role)==="admin")try{const x=Date.now(),y=await K.createTicket({title:"Test de conexión - "+new Date().toLocaleTimeString(),description:"Este es un ticket de prueba para verificar la conexión a Supabase",status:"open",priority:"low",category:"Test",createdBy:t.id,tags:["test","conexion"],attachments:[]});y&&await K.deleteTicket(y.id);const m=Date.now()-x;v[5]={name:"Inserción de datos de prueba",status:"success",message:`Ticket creado y eliminado exitosamente (${m}ms)`,duration:m}}catch(x){v[5]={name:"Inserción de datos de prueba",status:"error",message:`Error: ${x.message}`}}else v[5]={name:"Inserción de datos de prueba",status:"success",message:"Omitido (requiere permisos de admin)"};o([...v]),c(!1)},g=async()=>{try{const[v,x]=await Promise.all([K.getUsers(),K.getTickets()]),{data:y}=await B.from("chat_messages").select("id",{count:"exact"}),{data:m}=await B.from("notifications").select("id",{count:"exact"});s({users:v.length,tickets:x.length,messages:(y==null?void 0:y.length)||0,notifications:(m==null?void 0:m.length)||0})}catch(v){console.error("Error cargando estadísticas:",v)}},b=async()=>{var v;try{const x="https://wfykgzmaijulvvdwexcm.supabase.co",y=(v=x==null?void 0:x.split("//")[1])==null?void 0:v.split(".")[0];h({url:"https://wfykgzmaijulvvdwexcm.supabase.co",projectId:y,hasAnonKey:!0,keyLength:208})}catch(x){console.error("Error obteniendo info de Supabase:",x)}};return _.useEffect(()=>{b(),g(),p()},[]),!t||t.role!=="admin"?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Me,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-gray-600",children:"Solo los administradores pueden acceder al estado de la base de datos"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Estado de Base de Datos"}),i.jsx("p",{className:"text-gray-600",children:"Diagnóstico de conexión a Supabase"})]}),i.jsxs("button",{onClick:p,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[i.jsx(vf,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),l?"Probando...":"Probar Conexión"]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Estado General"}),i.jsx("div",{className:"flex items-center",children:e===null?i.jsx(dn,{className:"w-5 h-5 text-gray-400 animate-spin"}):e?i.jsxs("div",{className:"flex items-center text-green-600",children:[i.jsx(Jx,{className:"w-5 h-5 mr-2"}),i.jsx("span",{className:"font-medium",children:"Conectado"})]}):i.jsxs("div",{className:"flex items-center text-red-600",children:[i.jsx(Kx,{className:"w-5 h-5 mr-2"}),i.jsx("span",{className:"font-medium",children:"Desconectado"})]})})]}),u&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(Bx,{className:"w-5 h-5 text-blue-600 mr-2"}),i.jsx("span",{className:"font-medium text-blue-900",children:"Información del Proyecto"})]}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"URL:"})," ",u.url]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Proyecto ID:"})," ",u.projectId]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"API Key:"})," ",u.hasAnonKey?"✅ Configurada":"❌ Faltante"]})]})]}),n&&i.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(hs,{className:"w-5 h-5 text-green-600 mr-2"}),i.jsx("span",{className:"font-medium text-green-900",children:"Estadísticas de Datos"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Et,{className:"w-4 h-4 text-gray-500 mr-1"}),i.jsxs("span",{children:[n.users," usuarios"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(yr,{className:"w-4 h-4 text-gray-500 mr-1"}),i.jsxs("span",{children:[n.tickets," solicitudes"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(_r,{className:"w-4 h-4 text-gray-500 mr-1"}),i.jsxs("span",{children:[n.messages," mensajes"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(yn,{className:"w-4 h-4 text-gray-500 mr-1"}),i.jsxs("span",{children:[n.notifications," notificaciones"]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pruebas de Conexión"}),i.jsx("div",{className:"space-y-3",children:a.map((v,x)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center",children:[v.status==="pending"?i.jsx(dn,{className:"w-5 h-5 text-gray-400 animate-spin mr-3"}):v.status==="success"?i.jsx(wt,{className:"w-5 h-5 text-green-600 mr-3"}):i.jsx(Qx,{className:"w-5 h-5 text-red-600 mr-3"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-900",children:v.name}),i.jsx("p",{className:"text-sm text-gray-600",children:v.message})]})]}),v.duration&&i.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:[v.duration,"ms"]})]},x))}),a.length>0&&!l&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ii,{className:"w-5 h-5 text-blue-600 mr-2"}),i.jsx("span",{className:"font-medium text-blue-900",children:"Resumen"})]}),i.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[a.filter(v=>v.status==="success").length," de ",a.length," pruebas exitosas",a.every(v=>v.status==="success")&&" - ✅ Conexión 100% funcional"]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información Técnica"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Variables de Entorno"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"VITE_SUPABASE_URL:"}),i.jsx("span",{className:"text-green-600",children:"✅ Configurada"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"VITE_SUPABASE_ANON_KEY:"}),i.jsx("span",{className:"text-green-600",children:"✅ Configurada"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Estado del Cliente"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Cliente Supabase:"}),i.jsx("span",{className:"text-green-600",children:"✅ Inicializado"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Modo:"}),i.jsx("span",{className:"text-blue-600",children:"Producción (Supabase)"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Persistencia:"}),i.jsx("span",{className:"text-green-600",children:"✅ Habilitada"})]})]})]})]})]})]})}function ni({detalles:t,tipoAccion:e}){const[r,n]=Ye.useState(!1);if(t&&t.url&&t.type&&t.type.startsWith("image/"))return i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:t.url,alt:t.nombre||t.name,className:"w-12 h-12 object-cover rounded border"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-gray-800",children:t.nombre||t.name}),i.jsx("div",{className:"text-xs text-gray-500",children:t.uploadedAt?new Date(t.uploadedAt).toLocaleString():""})]})]});if(Array.isArray(t))return i.jsx("ul",{className:"list-disc pl-4",children:t.map((s,a)=>i.jsx("li",{children:i.jsx(ni,{detalles:s,tipoAccion:e})},a))});if(typeof t=="object"&&t){if(e==="asignar_ticket")return i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Asignado a:"})," ",t.asignado_a]}),t.fecha&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Fecha:"})," ",new Date(t.fecha).toLocaleString()]})]});if(e==="cambio_estado_ticket")return i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Nuevo estado:"})," ",t.nuevo_estado]}),t.usuario_ticket&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Usuario del ticket:"})," ",t.usuario_ticket]})]});if(e==="mensaje")return i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Mensaje:"})," ",t.contenido]}),t.usuario_ticket&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Usuario del ticket:"})," ",t.usuario_ticket]})]});if(e==="subir_archivo"&&t.url&&t.type&&t.type.startsWith("image/"))return i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:t.url,alt:t.nombre||t.name,className:"w-12 h-12 object-cover rounded border"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-gray-800",children:t.nombre||t.name}),i.jsx("div",{className:"text-xs text-gray-500",children:t.uploadedAt?new Date(t.uploadedAt).toLocaleString():""})]})]});const s=Object.keys(t);return!r&&s.length>4?i.jsxs("div",{children:[i.jsx("ul",{className:"list-none pl-0",children:s.slice(0,4).map((a,o)=>i.jsxs("li",{className:"mb-1",children:[i.jsxs("span",{className:"font-semibold text-gray-700",children:[a,":"]})," ",typeof t[a]=="object"?i.jsx(ni,{detalles:t[a]}):i.jsx("span",{className:"text-gray-800",children:String(t[a])})]},o))}),i.jsx("button",{className:"text-blue-600 text-xs mt-1",onClick:()=>n(!0),children:"Ver más..."})]}):i.jsx("ul",{className:"list-none pl-0",children:Object.entries(t).map(([a,o],l)=>i.jsxs("li",{className:"mb-1",children:[i.jsxs("span",{className:"font-semibold text-gray-700",children:[a,":"]})," ",typeof o=="object"?i.jsx(ni,{detalles:o}):i.jsx("span",{className:"text-gray-800",children:String(o)})]},l))})}return t?i.jsx("span",{children:String(t)}):i.jsx("span",{className:"text-gray-400",children:"Sin detalles"})}function gy(){const[t,e]=_.useState([]),[r,n]=_.useState(!0),[s,a]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState(""),[h,p]=_.useState([]),[g,b]=_.useState([]);_.useEffect(()=>{v()},[s,o,c]);const v=async()=>{n(!0);let x=B.from("audit_logs").select("*").order("created_at",{ascending:!1});if(s&&(x=x.eq("user_name",s)),o&&(x=x.eq("action_type",o)),c){const d=new Date(c),f=new Date(c);f.setHours(23,59,59,999),x=x.gte("created_at",d.toISOString()).lte("created_at",f.toISOString())}const{data:y,error:m}=await x;!m&&y&&(e(y),p(Array.from(new Set(y.map(d=>d.user_name).filter(Boolean)))),b(Array.from(new Set(y.map(d=>d.action_type).filter(Boolean))))),n(!1)};return i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Auditoría de Actividades"}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Usuario"}),i.jsxs("select",{value:s,onChange:x=>a(x.target.value),className:"border px-2 py-1 rounded",children:[i.jsx("option",{value:"",children:"Todos"}),h.map(x=>i.jsx("option",{value:x,children:x},x))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Acción"}),i.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"border px-2 py-1 rounded",children:[i.jsx("option",{value:"",children:"Todas"}),g.map(x=>i.jsx("option",{value:x,children:x},x))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:c,onChange:x=>u(x.target.value),className:"border px-2 py-1 rounded"})]}),i.jsx("button",{onClick:()=>{a(""),l(""),u("")},className:"ml-2 px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm",children:"Limpiar filtros"})]}),i.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:i.jsxs("table",{className:"min-w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2",children:"Fecha"}),i.jsx("th",{className:"px-4 py-2",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2",children:"Acción"}),i.jsx("th",{className:"px-4 py-2",children:"Realizado por"}),i.jsx("th",{className:"px-4 py-2",children:"Detalles"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8",children:"Cargando..."})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-8",children:"No hay registros"})}):t.map(x=>i.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-2 font-mono text-xs",children:new Date(x.created_at).toLocaleString()}),i.jsx("td",{className:"px-4 py-2",children:x.user_name||x.user_id}),i.jsx("td",{className:"px-4 py-2",children:x.action_type}),i.jsx("td",{className:"px-4 py-2",children:x.user_name||x.user_id}),i.jsx("td",{className:"px-4 py-2 whitespace-pre-wrap break-all max-w-xs",children:i.jsx(ni,{detalles:x.details,tipoAccion:x.action_type})})]},x.id))})]})})]})}function xy(){console.log("App se está renderizando");function t(){console.log("AppContent se está renderizando");const{currentUser:e,loading:r}=ce(),[n,s]=_.useState(""),[a,o]=_.useState(null);if(Ye.useEffect(()=>{e&&(console.log("🔄 App - Usuario autenticado, inicializando suscripciones en tiempo real"),xx())},[e]),Ye.useEffect(()=>{e&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[e]),Ye.useEffect(()=>{if(e&&!n)switch(e.role){case"user":s("tickets");break;case"technician":s("tickets");break;case"admin":s("dashboard");break;default:s("dashboard")}},[e,n]),Ye.useEffect(()=>{const p=b=>{const{section:v}=b.detail;s(v)};window.addEventListener("navigateToAdminSection",p);const g=b=>{o(b.detail.ticketId),s("chat")};return window.addEventListener("navigateToChat",g),()=>{window.removeEventListener("navigateToAdminSection",p),window.removeEventListener("navigateToChat",g)}},[]),r)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mb-6 mx-auto animate-pulse shadow-xl",children:i.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"TicketFlow"}),i.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Iniciando sistema..."}),i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})});if(!e)return i.jsx(Yx,{});const l=p=>{o(p),s("chat")},c=p=>{o(p),s("chat")},u=()=>{n==="tickets"&&s("tickets")},h=()=>{switch(n){case"dashboard":return e.role==="admin"?i.jsx(wu,{}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(vu,{}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actividad Reciente"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Nuevo ticket creado"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Hace 15 minutos"})]})]}),i.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Ticket resuelto"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Hace 1 hora"})]})]}),i.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[i.jsx("div",{className:"w-2 h-2 bg-yellow-600 rounded-full mr-3"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Ticket actualizado"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Hace 2 horas"})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rendimiento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Tiempo promedio de resolución"}),i.jsx("span",{className:"font-medium",children:"2.5 días"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Satisfacción del cliente"}),i.jsx("span",{className:"font-medium",children:"4.8/5"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"96%"}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Tickets resueltos este mes"}),i.jsx("span",{className:"font-medium",children:"87%"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"87%"}})})]})]})]})]})]});case"tickets":return i.jsx(iy,{onTicketClick:l,onDeleteTicket:u});case"chat":return i.jsxs("div",{className:"flex h-full bg-gray-50",children:[i.jsx(ay,{selectedTicketId:a,onSelectTicket:o}),i.jsx("div",{className:"flex-1 min-w-0 bg-white border-l border-gray-200",children:a?i.jsx(bu,{ticketId:a}):i.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-4.906-1.456L3 21l2.456-5.094A8.959 8.959 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})})}),i.jsx("p",{className:"text-base font-medium text-gray-900 mb-1",children:"Selecciona una conversación"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Elige un ticket de la lista para comenzar a chatear"})]})})})]});case"notifications":return i.jsx(uy,{onTicketClick:l});case"users":return i.jsx(dy,{});case"reports":return i.jsx(fy,{});case"settings":return i.jsx(my,{});case"database-status":return i.jsx(py,{});case"audit":return i.jsx(gy,{});case"private-chat":return e.role==="admin"||e.role==="technician"?i.jsx("div",{className:"flex h-full bg-gray-50",children:i.jsx("div",{className:"flex-1 min-w-0 bg-white border-l border-gray-200",children:i.jsx(bu,{ticketId:"00000000-0000-0000-0000-000000000999"})})}):null;default:return e.role==="admin"?i.jsx(wu,{}):i.jsx(vu,{})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[i.jsx(Xx,{activeView:n,setActiveView:s}),i.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[i.jsx(ey,{onNavigateToTicket:c}),i.jsx("main",{className:"flex-1 overflow-hidden",children:n==="chat"?i.jsx("div",{className:"h-full",children:h()}):n==="dashboard"&&e.role==="admin"?i.jsx("div",{className:"h-full overflow-y-auto",children:h()}):i.jsx("div",{className:"h-full overflow-y-auto",children:i.jsx("div",{className:"p-6",children:h()})})})]})]})}return i.jsx(vx,{children:i.jsx(jx,{children:i.jsx(wx,{children:i.jsx(bx,{children:i.jsx(t,{})})})})})}Mh(document.getElementById("root")).render(i.jsx(_.StrictMode,{children:i.jsx(xy,{})}));
